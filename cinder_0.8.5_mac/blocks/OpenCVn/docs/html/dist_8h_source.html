<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>Cinder</title>
		<link rel="stylesheet" href="cinder_doxygen.css" type="text/css" media="screen" />
	</head>
<body>	
<div class="wrapper">
	<div id="header">
		<h1><a href="http://libcinder.org">Cinder</a></h1>
	</div>

<!-- Generated by Doxygen 1.8.0 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">include/opencv2/flann/dist.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="dist_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/***********************************************************************</span>
<a name="l00002"></a>00002 <span class="comment"> * Software License Agreement (BSD License)</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * Copyright 2008-2009  Marius Muja (mariusm@cs.ubc.ca). All rights reserved.</span>
<a name="l00005"></a>00005 <span class="comment"> * Copyright 2008-2009  David G. Lowe (lowe@cs.ubc.ca). All rights reserved.</span>
<a name="l00006"></a>00006 <span class="comment"> *</span>
<a name="l00007"></a>00007 <span class="comment"> * THE BSD LICENSE</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
<a name="l00010"></a>00010 <span class="comment"> * modification, are permitted provided that the following conditions</span>
<a name="l00011"></a>00011 <span class="comment"> * are met:</span>
<a name="l00012"></a>00012 <span class="comment"> *</span>
<a name="l00013"></a>00013 <span class="comment"> * 1. Redistributions of source code must retain the above copyright</span>
<a name="l00014"></a>00014 <span class="comment"> *    notice, this list of conditions and the following disclaimer.</span>
<a name="l00015"></a>00015 <span class="comment"> * 2. Redistributions in binary form must reproduce the above copyright</span>
<a name="l00016"></a>00016 <span class="comment"> *    notice, this list of conditions and the following disclaimer in the</span>
<a name="l00017"></a>00017 <span class="comment"> *    documentation and/or other materials provided with the distribution.</span>
<a name="l00018"></a>00018 <span class="comment"> *</span>
<a name="l00019"></a>00019 <span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS&#39;&#39; AND ANY EXPRESS OR</span>
<a name="l00020"></a>00020 <span class="comment"> * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES</span>
<a name="l00021"></a>00021 <span class="comment"> * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00022"></a>00022 <span class="comment"> * IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,</span>
<a name="l00023"></a>00023 <span class="comment"> * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT</span>
<a name="l00024"></a>00024 <span class="comment"> * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span>
<a name="l00025"></a>00025 <span class="comment"> * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span>
<a name="l00026"></a>00026 <span class="comment"> * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<a name="l00027"></a>00027 <span class="comment"> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF</span>
<a name="l00028"></a>00028 <span class="comment"> * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00029"></a>00029 <span class="comment"> *************************************************************************/</span>
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="preprocessor">#ifndef OPENCV_FLANN_DIST_H_</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span><span class="preprocessor">#define OPENCV_FLANN_DIST_H_</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;cmath&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;cstdlib&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#ifdef _MSC_VER</span>
<a name="l00038"></a><a class="code" href="dist_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">00038</a> <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> __int32 <a class="code" href="dist_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a>;
<a name="l00039"></a><a class="code" href="dist_8h.html#aec6fcb673ff035718c238c8c9d544c47">00039</a> <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> __int64 <a class="code" href="dist_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>;
<a name="l00040"></a>00040 <span class="preprocessor">#else</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span><span class="preprocessor">#include &lt;stdint.h&gt;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#endif</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="defines_8h.html">defines.h</a>&quot;</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="preprocessor">#ifdef __ARM_NEON__</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span><span class="preprocessor">#include &quot;arm_neon.h&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#endif</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span>
<a name="l00050"></a>00050 <span class="keyword">namespace </span>cvflann
<a name="l00051"></a>00051 {
<a name="l00052"></a>00052 
<a name="l00053"></a>00053 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l00054"></a><a class="code" href="namespacecvflann.html#a51e0bdfcbd001afcf02cc5f812476488">00054</a> <span class="keyword">inline</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="namespacecvflann.html#a51e0bdfcbd001afcf02cc5f812476488">abs</a>(<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="highgui__c_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>) { <span class="keywordflow">return</span> (x&lt;0) ? -x : <a class="code" href="highgui__c_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>; }
<a name="l00055"></a>00055 
<a name="l00056"></a>00056 <span class="keyword">template</span>&lt;&gt;
<a name="l00057"></a><a class="code" href="namespacecvflann.html#aa807e7dfee3eee783f8b34dd1aadc6ae">00057</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="namespacecvflann.html#aa807e7dfee3eee783f8b34dd1aadc6ae">abs&lt;int&gt;</a>(<span class="keywordtype">int</span> <a class="code" href="highgui__c_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>) { <a class="code" href="namespacecvflann.html#a51e0bdfcbd001afcf02cc5f812476488">return ::abs</a>(<a class="code" href="highgui__c_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>); }
<a name="l00058"></a>00058 
<a name="l00059"></a>00059 <span class="keyword">template</span>&lt;&gt;
<a name="l00060"></a><a class="code" href="namespacecvflann.html#ac33717f5c0444506f69a15d8e86bb3e9">00060</a> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespacecvflann.html#ac33717f5c0444506f69a15d8e86bb3e9">abs&lt;float&gt;</a>(<span class="keywordtype">float</span> <a class="code" href="highgui__c_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>) { <span class="keywordflow">return</span> fabsf(<a class="code" href="highgui__c_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>); }
<a name="l00061"></a>00061 
<a name="l00062"></a>00062 <span class="keyword">template</span>&lt;&gt;
<a name="l00063"></a><a class="code" href="namespacecvflann.html#a4be1a31dcd0f78b8bb3663c26d20651b">00063</a> <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="namespacecvflann.html#a4be1a31dcd0f78b8bb3663c26d20651b">abs&lt;double&gt;</a>(<span class="keywordtype">double</span> <a class="code" href="highgui__c_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>) { <span class="keywordflow">return</span> fabs(<a class="code" href="highgui__c_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>); }
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l00066"></a><a class="code" href="structcvflann_1_1_accumulator.html#a9ce42bd623dc4709621e5aadeed80051">00066</a> <span class="keyword">struct </span><a class="code" href="structcvflann_1_1_accumulator.html">Accumulator</a> { <span class="keyword">typedef</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="structcvflann_1_1_accumulator.html#a9ce42bd623dc4709621e5aadeed80051">Type</a>; };
<a name="l00067"></a>00067 <span class="keyword">template</span>&lt;&gt;
<a name="l00068"></a><a class="code" href="structcvflann_1_1_accumulator_3_01unsigned_01char_01_4.html#af4b96e54d6c9facb7fc8a290d9b766d9">00068</a> <span class="keyword">struct </span><a class="code" href="structcvflann_1_1_accumulator.html">Accumulator</a>&lt;unsigned char&gt;  { <span class="keyword">typedef</span> <span class="keywordtype">float</span> <a class="code" href="structcvflann_1_1_accumulator_3_01unsigned_01char_01_4.html#af4b96e54d6c9facb7fc8a290d9b766d9">Type</a>; };
<a name="l00069"></a>00069 <span class="keyword">template</span>&lt;&gt;
<a name="l00070"></a><a class="code" href="structcvflann_1_1_accumulator_3_01unsigned_01short_01_4.html#af8a575320dfd46a6f3c42a774793ad5e">00070</a> <span class="keyword">struct </span><a class="code" href="structcvflann_1_1_accumulator.html">Accumulator</a>&lt;unsigned short&gt; { <span class="keyword">typedef</span> <span class="keywordtype">float</span> <a class="code" href="structcvflann_1_1_accumulator_3_01unsigned_01short_01_4.html#af8a575320dfd46a6f3c42a774793ad5e">Type</a>; };
<a name="l00071"></a>00071 <span class="keyword">template</span>&lt;&gt;
<a name="l00072"></a><a class="code" href="structcvflann_1_1_accumulator_3_01unsigned_01int_01_4.html#af2df00a95ec76717aa12116277c1557b">00072</a> <span class="keyword">struct </span><a class="code" href="structcvflann_1_1_accumulator.html">Accumulator</a>&lt;unsigned <a class="code" href="namespacecv_1_1gpu_1_1device.html#a75abe072f62e9cbacd4e282107467bbb">int</a>&gt; { <span class="keyword">typedef</span> <span class="keywordtype">float</span> <a class="code" href="structcvflann_1_1_accumulator_3_01unsigned_01int_01_4.html#af2df00a95ec76717aa12116277c1557b">Type</a>; };
<a name="l00073"></a>00073 <span class="keyword">template</span>&lt;&gt;
<a name="l00074"></a><a class="code" href="structcvflann_1_1_accumulator_3_01char_01_4.html#a7aafbff14621fbe63e78b863c4b7041b">00074</a> <span class="keyword">struct </span><a class="code" href="structcvflann_1_1_accumulator.html">Accumulator</a>&lt;char&gt;   { <span class="keyword">typedef</span> <span class="keywordtype">float</span> <a class="code" href="structcvflann_1_1_accumulator_3_01char_01_4.html#a7aafbff14621fbe63e78b863c4b7041b">Type</a>; };
<a name="l00075"></a>00075 <span class="keyword">template</span>&lt;&gt;
<a name="l00076"></a><a class="code" href="structcvflann_1_1_accumulator_3_01short_01_4.html#a651c7f49bd1342a479b326806905afc1">00076</a> <span class="keyword">struct </span><a class="code" href="structcvflann_1_1_accumulator.html">Accumulator</a>&lt;short&gt;  { <span class="keyword">typedef</span> <span class="keywordtype">float</span> <a class="code" href="structcvflann_1_1_accumulator_3_01short_01_4.html#a651c7f49bd1342a479b326806905afc1">Type</a>; };
<a name="l00077"></a>00077 <span class="keyword">template</span>&lt;&gt;
<a name="l00078"></a><a class="code" href="structcvflann_1_1_accumulator_3_01int_01_4.html#a0e6bee3064a33d6b39cf014282ba3e8e">00078</a> <span class="keyword">struct </span><a class="code" href="structcvflann_1_1_accumulator.html">Accumulator</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a75abe072f62e9cbacd4e282107467bbb">int</a>&gt; { <span class="keyword">typedef</span> <span class="keywordtype">float</span> <a class="code" href="structcvflann_1_1_accumulator_3_01int_01_4.html#a0e6bee3064a33d6b39cf014282ba3e8e">Type</a>; };
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 <span class="preprocessor">#undef True</span>
<a name="l00081"></a>00081 <span class="preprocessor"></span><span class="preprocessor">#undef False</span>
<a name="l00082"></a>00082 <span class="preprocessor"></span>
<a name="l00083"></a><a class="code" href="classcvflann_1_1_true.html">00083</a> <span class="keyword">class </span><a class="code" href="classcvflann_1_1_true.html">True</a>
<a name="l00084"></a>00084 {
<a name="l00085"></a>00085 };
<a name="l00086"></a>00086 
<a name="l00087"></a><a class="code" href="classcvflann_1_1_false.html">00087</a> <span class="keyword">class </span><a class="code" href="classcvflann_1_1_false.html">False</a>
<a name="l00088"></a>00088 {
<a name="l00089"></a>00089 };
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 
<a name="l00098"></a>00098 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00099"></a><a class="code" href="structcvflann_1_1_l2___simple.html">00099</a> <span class="keyword">struct </span><a class="code" href="structcvflann_1_1_l2___simple.html">L2_Simple</a>
<a name="l00100"></a>00100 {
<a name="l00101"></a><a class="code" href="structcvflann_1_1_l2___simple.html#a31398f63f04c3eacf258fc9f79713a36">00101</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_true.html">True</a> <a class="code" href="structcvflann_1_1_l2___simple.html#a31398f63f04c3eacf258fc9f79713a36">is_kdtree_distance</a>;
<a name="l00102"></a><a class="code" href="structcvflann_1_1_l2___simple.html#acbe5d8b162c1e137bebd06ddb1c24584">00102</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_true.html">True</a> <a class="code" href="structcvflann_1_1_l2___simple.html#acbe5d8b162c1e137bebd06ddb1c24584">is_vector_space_distance</a>;
<a name="l00103"></a>00103 
<a name="l00104"></a><a class="code" href="structcvflann_1_1_l2___simple.html#a670b89d34d56ea8dad5b4c723c19347b">00104</a>     <span class="keyword">typedef</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="structcvflann_1_1_l2___simple.html#a670b89d34d56ea8dad5b4c723c19347b">ElementType</a>;
<a name="l00105"></a><a class="code" href="structcvflann_1_1_l2___simple.html#a3eeebcb88e4e8dc88db089c80918f11d">00105</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structcvflann_1_1_accumulator.html#a9ce42bd623dc4709621e5aadeed80051">Accumulator&lt;T&gt;::Type</a> <a class="code" href="structcvflann_1_1_l2___simple.html#a3eeebcb88e4e8dc88db089c80918f11d">ResultType</a>;
<a name="l00106"></a>00106 
<a name="l00107"></a>00107     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Iterator1, <span class="keyword">typename</span> Iterator2&gt;
<a name="l00108"></a><a class="code" href="structcvflann_1_1_l2___simple.html#a97b02b192c382204f982005c4b1fd4da">00108</a>     <a class="code" href="structcvflann_1_1_l2___simple.html#a3eeebcb88e4e8dc88db089c80918f11d">ResultType</a> <a class="code" href="structcvflann_1_1_l2___simple.html#a97b02b192c382204f982005c4b1fd4da">operator()</a>(Iterator1 <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, Iterator2 <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">size_t</span> <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>, <a class="code" href="structcvflann_1_1_l2___simple.html#a3eeebcb88e4e8dc88db089c80918f11d">ResultType</a> <span class="comment">/*worst_dist*/</span> = -1)<span class="keyword"> const</span>
<a name="l00109"></a>00109 <span class="keyword">    </span>{
<a name="l00110"></a>00110         <a class="code" href="structcvflann_1_1_l2___simple.html#a3eeebcb88e4e8dc88db089c80918f11d">ResultType</a> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a> = <a class="code" href="structcvflann_1_1_l2___simple.html#a3eeebcb88e4e8dc88db089c80918f11d">ResultType</a>();
<a name="l00111"></a>00111         <a class="code" href="structcvflann_1_1_l2___simple.html#a3eeebcb88e4e8dc88db089c80918f11d">ResultType</a> diff;
<a name="l00112"></a>00112         <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>; ++i ) {
<a name="l00113"></a>00113             diff = *a++ - *b++;
<a name="l00114"></a>00114             result += diff*diff;
<a name="l00115"></a>00115         }
<a name="l00116"></a>00116         <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l00117"></a>00117     }
<a name="l00118"></a>00118 
<a name="l00119"></a>00119     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U, <span class="keyword">typename</span> V&gt;
<a name="l00120"></a><a class="code" href="structcvflann_1_1_l2___simple.html#a877ff5d391a4c665f472e5bedcef5243">00120</a>     <span class="keyword">inline</span> <a class="code" href="structcvflann_1_1_l2___simple.html#a3eeebcb88e4e8dc88db089c80918f11d">ResultType</a> <a class="code" href="structcvflann_1_1_l2___simple.html#a877ff5d391a4c665f472e5bedcef5243">accum_dist</a>(<span class="keyword">const</span> <a class="code" href="core__c_8h.html#aa9c521f41af9a5191e5e4b6ffbae211a">U</a>&amp; <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, <span class="keyword">const</span> <a class="code" href="core__c_8h.html#ad8dd4fff0e3910932187b6de0543cae1">V</a>&amp; <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">int</span>)<span class="keyword"> const</span>
<a name="l00121"></a>00121 <span class="keyword">    </span>{
<a name="l00122"></a>00122         <span class="keywordflow">return</span> (a-b)*(a-<a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>);
<a name="l00123"></a>00123     }
<a name="l00124"></a>00124 };
<a name="l00125"></a>00125 
<a name="l00126"></a>00126 
<a name="l00127"></a>00127 
<a name="l00131"></a>00131 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00132"></a><a class="code" href="structcvflann_1_1_l2.html">00132</a> <span class="keyword">struct </span><a class="code" href="structcvflann_1_1_l2.html">L2</a>
<a name="l00133"></a>00133 {
<a name="l00134"></a><a class="code" href="structcvflann_1_1_l2.html#a3da7a47efd79776d2eff26fcd3b6d3b1">00134</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_true.html">True</a> <a class="code" href="structcvflann_1_1_l2.html#a3da7a47efd79776d2eff26fcd3b6d3b1">is_kdtree_distance</a>;
<a name="l00135"></a><a class="code" href="structcvflann_1_1_l2.html#aaab92e6462f69adb45b3822b922a232d">00135</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_true.html">True</a> <a class="code" href="structcvflann_1_1_l2.html#aaab92e6462f69adb45b3822b922a232d">is_vector_space_distance</a>;
<a name="l00136"></a>00136 
<a name="l00137"></a><a class="code" href="structcvflann_1_1_l2.html#a947248fbf703551189651b69d75435db">00137</a>     <span class="keyword">typedef</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="structcvflann_1_1_l2.html#a947248fbf703551189651b69d75435db">ElementType</a>;
<a name="l00138"></a><a class="code" href="structcvflann_1_1_l2.html#a725e8728f510569bbdf7a14656be074f">00138</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structcvflann_1_1_accumulator.html#a9ce42bd623dc4709621e5aadeed80051">Accumulator&lt;T&gt;::Type</a> <a class="code" href="structcvflann_1_1_l2.html#a725e8728f510569bbdf7a14656be074f">ResultType</a>;
<a name="l00139"></a>00139 
<a name="l00149"></a>00149     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Iterator1, <span class="keyword">typename</span> Iterator2&gt;
<a name="l00150"></a><a class="code" href="structcvflann_1_1_l2.html#a5ae2dfa1a8482219801f7f2c8d1811f2">00150</a>     <a class="code" href="structcvflann_1_1_l2.html#a725e8728f510569bbdf7a14656be074f">ResultType</a> <a class="code" href="structcvflann_1_1_l2.html#a5ae2dfa1a8482219801f7f2c8d1811f2">operator()</a>(Iterator1 <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, Iterator2 <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">size_t</span> <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>, <a class="code" href="structcvflann_1_1_l2.html#a725e8728f510569bbdf7a14656be074f">ResultType</a> worst_dist = -1)<span class="keyword"> const</span>
<a name="l00151"></a>00151 <span class="keyword">    </span>{
<a name="l00152"></a>00152         <a class="code" href="structcvflann_1_1_l2.html#a725e8728f510569bbdf7a14656be074f">ResultType</a> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a> = <a class="code" href="structcvflann_1_1_l2.html#a725e8728f510569bbdf7a14656be074f">ResultType</a>();
<a name="l00153"></a>00153         <a class="code" href="structcvflann_1_1_l2.html#a725e8728f510569bbdf7a14656be074f">ResultType</a> diff0, diff1, diff2, diff3;
<a name="l00154"></a>00154         Iterator1 last = a + <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>;
<a name="l00155"></a>00155         Iterator1 lastgroup = last - 3;
<a name="l00156"></a>00156 
<a name="l00157"></a>00157         <span class="comment">/* Process 4 items with each loop for efficiency. */</span>
<a name="l00158"></a>00158         <span class="keywordflow">while</span> (a &lt; lastgroup) {
<a name="l00159"></a>00159             diff0 = (<a class="code" href="structcvflann_1_1_l2.html#a725e8728f510569bbdf7a14656be074f">ResultType</a>)(a[0] - b[0]);
<a name="l00160"></a>00160             diff1 = (<a class="code" href="structcvflann_1_1_l2.html#a725e8728f510569bbdf7a14656be074f">ResultType</a>)(a[1] - b[1]);
<a name="l00161"></a>00161             diff2 = (<a class="code" href="structcvflann_1_1_l2.html#a725e8728f510569bbdf7a14656be074f">ResultType</a>)(a[2] - b[2]);
<a name="l00162"></a>00162             diff3 = (<a class="code" href="structcvflann_1_1_l2.html#a725e8728f510569bbdf7a14656be074f">ResultType</a>)(a[3] - b[3]);
<a name="l00163"></a>00163             result += diff0 * diff0 + diff1 * diff1 + diff2 * diff2 + diff3 * diff3;
<a name="l00164"></a>00164             a += 4;
<a name="l00165"></a>00165             b += 4;
<a name="l00166"></a>00166 
<a name="l00167"></a>00167             <span class="keywordflow">if</span> ((worst_dist&gt;0)&amp;&amp;(result&gt;worst_dist)) {
<a name="l00168"></a>00168                 <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l00169"></a>00169             }
<a name="l00170"></a>00170         }
<a name="l00171"></a>00171         <span class="comment">/* Process last 0-3 pixels.  Not needed for standard vector lengths. */</span>
<a name="l00172"></a>00172         <span class="keywordflow">while</span> (a &lt; last) {
<a name="l00173"></a>00173             diff0 = (<a class="code" href="structcvflann_1_1_l2.html#a725e8728f510569bbdf7a14656be074f">ResultType</a>)(*a++ - *b++);
<a name="l00174"></a>00174             result += diff0 * diff0;
<a name="l00175"></a>00175         }
<a name="l00176"></a>00176         <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l00177"></a>00177     }
<a name="l00178"></a>00178 
<a name="l00185"></a>00185     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U, <span class="keyword">typename</span> V&gt;
<a name="l00186"></a><a class="code" href="structcvflann_1_1_l2.html#a41c76ac6d835169ea3619e16ff25f4ab">00186</a>     <span class="keyword">inline</span> <a class="code" href="structcvflann_1_1_l2.html#a725e8728f510569bbdf7a14656be074f">ResultType</a> <a class="code" href="structcvflann_1_1_l2.html#a41c76ac6d835169ea3619e16ff25f4ab">accum_dist</a>(<span class="keyword">const</span> <a class="code" href="core__c_8h.html#aa9c521f41af9a5191e5e4b6ffbae211a">U</a>&amp; <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, <span class="keyword">const</span> <a class="code" href="core__c_8h.html#ad8dd4fff0e3910932187b6de0543cae1">V</a>&amp; <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">int</span>)<span class="keyword"> const</span>
<a name="l00187"></a>00187 <span class="keyword">    </span>{
<a name="l00188"></a>00188         <span class="keywordflow">return</span> (a-b)*(a-<a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>);
<a name="l00189"></a>00189     }
<a name="l00190"></a>00190 };
<a name="l00191"></a>00191 
<a name="l00192"></a>00192 
<a name="l00193"></a>00193 <span class="comment">/*</span>
<a name="l00194"></a>00194 <span class="comment"> * Manhattan distance functor, optimized version</span>
<a name="l00195"></a>00195 <span class="comment"> */</span>
<a name="l00196"></a>00196 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00197"></a><a class="code" href="structcvflann_1_1_l1.html">00197</a> <span class="keyword">struct </span><a class="code" href="structcvflann_1_1_l1.html">L1</a>
<a name="l00198"></a>00198 {
<a name="l00199"></a><a class="code" href="structcvflann_1_1_l1.html#aa3e6c602907baa81d90ddcfc33041874">00199</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_true.html">True</a> <a class="code" href="structcvflann_1_1_l1.html#aa3e6c602907baa81d90ddcfc33041874">is_kdtree_distance</a>;
<a name="l00200"></a><a class="code" href="structcvflann_1_1_l1.html#a1df70c0d506c0446a8e55d60c697a55c">00200</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_true.html">True</a> <a class="code" href="structcvflann_1_1_l1.html#a1df70c0d506c0446a8e55d60c697a55c">is_vector_space_distance</a>;
<a name="l00201"></a>00201 
<a name="l00202"></a><a class="code" href="structcvflann_1_1_l1.html#a2e5f85d35af395e5654465e9a69643c0">00202</a>     <span class="keyword">typedef</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="structcvflann_1_1_l1.html#a2e5f85d35af395e5654465e9a69643c0">ElementType</a>;
<a name="l00203"></a><a class="code" href="structcvflann_1_1_l1.html#a4b809418ce6bf89439d5dbd0ccd42220">00203</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structcvflann_1_1_accumulator.html#a9ce42bd623dc4709621e5aadeed80051">Accumulator&lt;T&gt;::Type</a> <a class="code" href="structcvflann_1_1_l1.html#a4b809418ce6bf89439d5dbd0ccd42220">ResultType</a>;
<a name="l00204"></a>00204 
<a name="l00211"></a>00211     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Iterator1, <span class="keyword">typename</span> Iterator2&gt;
<a name="l00212"></a><a class="code" href="structcvflann_1_1_l1.html#ad243d0a072c18dbbb63956cc429ffea2">00212</a>     <a class="code" href="structcvflann_1_1_l1.html#a4b809418ce6bf89439d5dbd0ccd42220">ResultType</a> <a class="code" href="structcvflann_1_1_l1.html#ad243d0a072c18dbbb63956cc429ffea2">operator()</a>(Iterator1 <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, Iterator2 <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">size_t</span> <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>, <a class="code" href="structcvflann_1_1_l1.html#a4b809418ce6bf89439d5dbd0ccd42220">ResultType</a> worst_dist = -1)<span class="keyword"> const</span>
<a name="l00213"></a>00213 <span class="keyword">    </span>{
<a name="l00214"></a>00214         <a class="code" href="structcvflann_1_1_l1.html#a4b809418ce6bf89439d5dbd0ccd42220">ResultType</a> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a> = <a class="code" href="structcvflann_1_1_l1.html#a4b809418ce6bf89439d5dbd0ccd42220">ResultType</a>();
<a name="l00215"></a>00215         <a class="code" href="structcvflann_1_1_l1.html#a4b809418ce6bf89439d5dbd0ccd42220">ResultType</a> diff0, diff1, diff2, diff3;
<a name="l00216"></a>00216         Iterator1 last = a + <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>;
<a name="l00217"></a>00217         Iterator1 lastgroup = last - 3;
<a name="l00218"></a>00218 
<a name="l00219"></a>00219         <span class="comment">/* Process 4 items with each loop for efficiency. */</span>
<a name="l00220"></a>00220         <span class="keywordflow">while</span> (a &lt; lastgroup) {
<a name="l00221"></a>00221             diff0 = (<a class="code" href="structcvflann_1_1_l1.html#a4b809418ce6bf89439d5dbd0ccd42220">ResultType</a>)<a class="code" href="namespacecvflann.html#a51e0bdfcbd001afcf02cc5f812476488">abs</a>(a[0] - b[0]);
<a name="l00222"></a>00222             diff1 = (<a class="code" href="structcvflann_1_1_l1.html#a4b809418ce6bf89439d5dbd0ccd42220">ResultType</a>)<a class="code" href="namespacecvflann.html#a51e0bdfcbd001afcf02cc5f812476488">abs</a>(a[1] - b[1]);
<a name="l00223"></a>00223             diff2 = (<a class="code" href="structcvflann_1_1_l1.html#a4b809418ce6bf89439d5dbd0ccd42220">ResultType</a>)<a class="code" href="namespacecvflann.html#a51e0bdfcbd001afcf02cc5f812476488">abs</a>(a[2] - b[2]);
<a name="l00224"></a>00224             diff3 = (<a class="code" href="structcvflann_1_1_l1.html#a4b809418ce6bf89439d5dbd0ccd42220">ResultType</a>)<a class="code" href="namespacecvflann.html#a51e0bdfcbd001afcf02cc5f812476488">abs</a>(a[3] - b[3]);
<a name="l00225"></a>00225             result += diff0 + diff1 + diff2 + diff3;
<a name="l00226"></a>00226             a += 4;
<a name="l00227"></a>00227             b += 4;
<a name="l00228"></a>00228 
<a name="l00229"></a>00229             <span class="keywordflow">if</span> ((worst_dist&gt;0)&amp;&amp;(result&gt;worst_dist)) {
<a name="l00230"></a>00230                 <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l00231"></a>00231             }
<a name="l00232"></a>00232         }
<a name="l00233"></a>00233         <span class="comment">/* Process last 0-3 pixels.  Not needed for standard vector lengths. */</span>
<a name="l00234"></a>00234         <span class="keywordflow">while</span> (a &lt; last) {
<a name="l00235"></a>00235             diff0 = (<a class="code" href="structcvflann_1_1_l1.html#a4b809418ce6bf89439d5dbd0ccd42220">ResultType</a>)<a class="code" href="namespacecvflann.html#a51e0bdfcbd001afcf02cc5f812476488">abs</a>(*a++ - *b++);
<a name="l00236"></a>00236             result += diff0;
<a name="l00237"></a>00237         }
<a name="l00238"></a>00238         <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l00239"></a>00239     }
<a name="l00240"></a>00240 
<a name="l00244"></a>00244     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U, <span class="keyword">typename</span> V&gt;
<a name="l00245"></a><a class="code" href="structcvflann_1_1_l1.html#a09418975ebb5949306d3298c71241c6c">00245</a>     <span class="keyword">inline</span> <a class="code" href="structcvflann_1_1_l1.html#a4b809418ce6bf89439d5dbd0ccd42220">ResultType</a> <a class="code" href="structcvflann_1_1_l1.html#a09418975ebb5949306d3298c71241c6c">accum_dist</a>(<span class="keyword">const</span> <a class="code" href="core__c_8h.html#aa9c521f41af9a5191e5e4b6ffbae211a">U</a>&amp; <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, <span class="keyword">const</span> <a class="code" href="core__c_8h.html#ad8dd4fff0e3910932187b6de0543cae1">V</a>&amp; <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">int</span>)<span class="keyword"> const</span>
<a name="l00246"></a>00246 <span class="keyword">    </span>{
<a name="l00247"></a>00247         <span class="keywordflow">return</span> <a class="code" href="namespacecvflann.html#a51e0bdfcbd001afcf02cc5f812476488">abs</a>(a-b);
<a name="l00248"></a>00248     }
<a name="l00249"></a>00249 };
<a name="l00250"></a>00250 
<a name="l00251"></a>00251 
<a name="l00252"></a>00252 
<a name="l00253"></a>00253 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00254"></a><a class="code" href="structcvflann_1_1_minkowski_distance.html">00254</a> <span class="keyword">struct </span><a class="code" href="structcvflann_1_1_minkowski_distance.html">MinkowskiDistance</a>
<a name="l00255"></a>00255 {
<a name="l00256"></a><a class="code" href="structcvflann_1_1_minkowski_distance.html#ab0f43baaf0a36a5598a88b2ee55a3e01">00256</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_true.html">True</a> <a class="code" href="structcvflann_1_1_minkowski_distance.html#ab0f43baaf0a36a5598a88b2ee55a3e01">is_kdtree_distance</a>;
<a name="l00257"></a><a class="code" href="structcvflann_1_1_minkowski_distance.html#a84506bd48e3b43e87d56e9b60d9fb464">00257</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_true.html">True</a> <a class="code" href="structcvflann_1_1_minkowski_distance.html#a84506bd48e3b43e87d56e9b60d9fb464">is_vector_space_distance</a>;
<a name="l00258"></a>00258 
<a name="l00259"></a><a class="code" href="structcvflann_1_1_minkowski_distance.html#ade76f2298b0f811a466afdf72b18846b">00259</a>     <span class="keyword">typedef</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="structcvflann_1_1_minkowski_distance.html#ade76f2298b0f811a466afdf72b18846b">ElementType</a>;
<a name="l00260"></a><a class="code" href="structcvflann_1_1_minkowski_distance.html#a21baf56e06b45cdea5de1530c2e7c0ec">00260</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structcvflann_1_1_accumulator.html#a9ce42bd623dc4709621e5aadeed80051">Accumulator&lt;T&gt;::Type</a> <a class="code" href="structcvflann_1_1_minkowski_distance.html#a21baf56e06b45cdea5de1530c2e7c0ec">ResultType</a>;
<a name="l00261"></a>00261 
<a name="l00262"></a><a class="code" href="structcvflann_1_1_minkowski_distance.html#a2703b6de832914cac0163cab19803759">00262</a>     <span class="keywordtype">int</span> <a class="code" href="structcvflann_1_1_minkowski_distance.html#a2703b6de832914cac0163cab19803759">order</a>;
<a name="l00263"></a>00263 
<a name="l00264"></a><a class="code" href="structcvflann_1_1_minkowski_distance.html#a47e723962a1c64dc6f488f6e2e481d29">00264</a>     <a class="code" href="structcvflann_1_1_minkowski_distance.html#a47e723962a1c64dc6f488f6e2e481d29">MinkowskiDistance</a>(<span class="keywordtype">int</span> order_) : <a class="code" href="structcvflann_1_1_minkowski_distance.html#a2703b6de832914cac0163cab19803759">order</a>(order_) {}
<a name="l00265"></a>00265 
<a name="l00275"></a>00275     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Iterator1, <span class="keyword">typename</span> Iterator2&gt;
<a name="l00276"></a><a class="code" href="structcvflann_1_1_minkowski_distance.html#ac9ebfdd3f6bbf978ef88d68510828b75">00276</a>     <a class="code" href="structcvflann_1_1_minkowski_distance.html#a21baf56e06b45cdea5de1530c2e7c0ec">ResultType</a> <a class="code" href="structcvflann_1_1_minkowski_distance.html#ac9ebfdd3f6bbf978ef88d68510828b75">operator()</a>(Iterator1 <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, Iterator2 <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">size_t</span> <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>, <a class="code" href="structcvflann_1_1_minkowski_distance.html#a21baf56e06b45cdea5de1530c2e7c0ec">ResultType</a> worst_dist = -1)<span class="keyword"> const</span>
<a name="l00277"></a>00277 <span class="keyword">    </span>{
<a name="l00278"></a>00278         <a class="code" href="structcvflann_1_1_minkowski_distance.html#a21baf56e06b45cdea5de1530c2e7c0ec">ResultType</a> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a> = <a class="code" href="structcvflann_1_1_minkowski_distance.html#a21baf56e06b45cdea5de1530c2e7c0ec">ResultType</a>();
<a name="l00279"></a>00279         <a class="code" href="structcvflann_1_1_minkowski_distance.html#a21baf56e06b45cdea5de1530c2e7c0ec">ResultType</a> diff0, diff1, diff2, diff3;
<a name="l00280"></a>00280         Iterator1 last = a + <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>;
<a name="l00281"></a>00281         Iterator1 lastgroup = last - 3;
<a name="l00282"></a>00282 
<a name="l00283"></a>00283         <span class="comment">/* Process 4 items with each loop for efficiency. */</span>
<a name="l00284"></a>00284         <span class="keywordflow">while</span> (a &lt; lastgroup) {
<a name="l00285"></a>00285             diff0 = (<a class="code" href="structcvflann_1_1_minkowski_distance.html#a21baf56e06b45cdea5de1530c2e7c0ec">ResultType</a>)<a class="code" href="namespacecvflann.html#a51e0bdfcbd001afcf02cc5f812476488">abs</a>(a[0] - b[0]);
<a name="l00286"></a>00286             diff1 = (<a class="code" href="structcvflann_1_1_minkowski_distance.html#a21baf56e06b45cdea5de1530c2e7c0ec">ResultType</a>)<a class="code" href="namespacecvflann.html#a51e0bdfcbd001afcf02cc5f812476488">abs</a>(a[1] - b[1]);
<a name="l00287"></a>00287             diff2 = (<a class="code" href="structcvflann_1_1_minkowski_distance.html#a21baf56e06b45cdea5de1530c2e7c0ec">ResultType</a>)<a class="code" href="namespacecvflann.html#a51e0bdfcbd001afcf02cc5f812476488">abs</a>(a[2] - b[2]);
<a name="l00288"></a>00288             diff3 = (<a class="code" href="structcvflann_1_1_minkowski_distance.html#a21baf56e06b45cdea5de1530c2e7c0ec">ResultType</a>)<a class="code" href="namespacecvflann.html#a51e0bdfcbd001afcf02cc5f812476488">abs</a>(a[3] - b[3]);
<a name="l00289"></a>00289             result += <a class="code" href="namespacecv.html#aa7e17986072825dbb64f80683704c55d" title="raises the input matrix elements to the specified power (b = a**power)">pow</a>(diff0,<a class="code" href="structcvflann_1_1_minkowski_distance.html#a2703b6de832914cac0163cab19803759">order</a>) + <a class="code" href="namespacecv.html#aa7e17986072825dbb64f80683704c55d" title="raises the input matrix elements to the specified power (b = a**power)">pow</a>(diff1,<a class="code" href="structcvflann_1_1_minkowski_distance.html#a2703b6de832914cac0163cab19803759">order</a>) + <a class="code" href="namespacecv.html#aa7e17986072825dbb64f80683704c55d" title="raises the input matrix elements to the specified power (b = a**power)">pow</a>(diff2,<a class="code" href="structcvflann_1_1_minkowski_distance.html#a2703b6de832914cac0163cab19803759">order</a>) + <a class="code" href="namespacecv.html#aa7e17986072825dbb64f80683704c55d" title="raises the input matrix elements to the specified power (b = a**power)">pow</a>(diff3,<a class="code" href="structcvflann_1_1_minkowski_distance.html#a2703b6de832914cac0163cab19803759">order</a>);
<a name="l00290"></a>00290             a += 4;
<a name="l00291"></a>00291             b += 4;
<a name="l00292"></a>00292 
<a name="l00293"></a>00293             <span class="keywordflow">if</span> ((worst_dist&gt;0)&amp;&amp;(result&gt;worst_dist)) {
<a name="l00294"></a>00294                 <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l00295"></a>00295             }
<a name="l00296"></a>00296         }
<a name="l00297"></a>00297         <span class="comment">/* Process last 0-3 pixels.  Not needed for standard vector lengths. */</span>
<a name="l00298"></a>00298         <span class="keywordflow">while</span> (a &lt; last) {
<a name="l00299"></a>00299             diff0 = (<a class="code" href="structcvflann_1_1_minkowski_distance.html#a21baf56e06b45cdea5de1530c2e7c0ec">ResultType</a>)<a class="code" href="namespacecvflann.html#a51e0bdfcbd001afcf02cc5f812476488">abs</a>(*a++ - *b++);
<a name="l00300"></a>00300             result += <a class="code" href="namespacecv.html#aa7e17986072825dbb64f80683704c55d" title="raises the input matrix elements to the specified power (b = a**power)">pow</a>(diff0,<a class="code" href="structcvflann_1_1_minkowski_distance.html#a2703b6de832914cac0163cab19803759">order</a>);
<a name="l00301"></a>00301         }
<a name="l00302"></a>00302         <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l00303"></a>00303     }
<a name="l00304"></a>00304 
<a name="l00308"></a>00308     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U, <span class="keyword">typename</span> V&gt;
<a name="l00309"></a><a class="code" href="structcvflann_1_1_minkowski_distance.html#a548c7c4e8edf95dd3484463fc675a8a9">00309</a>     <span class="keyword">inline</span> <a class="code" href="structcvflann_1_1_minkowski_distance.html#a21baf56e06b45cdea5de1530c2e7c0ec">ResultType</a> <a class="code" href="structcvflann_1_1_minkowski_distance.html#a548c7c4e8edf95dd3484463fc675a8a9">accum_dist</a>(<span class="keyword">const</span> <a class="code" href="core__c_8h.html#aa9c521f41af9a5191e5e4b6ffbae211a">U</a>&amp; <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, <span class="keyword">const</span> <a class="code" href="core__c_8h.html#ad8dd4fff0e3910932187b6de0543cae1">V</a>&amp; <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">int</span>)<span class="keyword"> const</span>
<a name="l00310"></a>00310 <span class="keyword">    </span>{
<a name="l00311"></a>00311         <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#aa7e17986072825dbb64f80683704c55d" title="raises the input matrix elements to the specified power (b = a**power)">pow</a>(static_cast&lt;ResultType&gt;(<a class="code" href="namespacecvflann.html#a51e0bdfcbd001afcf02cc5f812476488">abs</a>(a-b)),<a class="code" href="structcvflann_1_1_minkowski_distance.html#a2703b6de832914cac0163cab19803759">order</a>);
<a name="l00312"></a>00312     }
<a name="l00313"></a>00313 };
<a name="l00314"></a>00314 
<a name="l00315"></a>00315 
<a name="l00316"></a>00316 
<a name="l00317"></a>00317 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00318"></a><a class="code" href="structcvflann_1_1_max_distance.html">00318</a> <span class="keyword">struct </span><a class="code" href="structcvflann_1_1_max_distance.html">MaxDistance</a>
<a name="l00319"></a>00319 {
<a name="l00320"></a><a class="code" href="structcvflann_1_1_max_distance.html#a88f64a88adf9ee4b90f59c3156a172aa">00320</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_false.html">False</a> <a class="code" href="structcvflann_1_1_max_distance.html#a88f64a88adf9ee4b90f59c3156a172aa">is_kdtree_distance</a>;
<a name="l00321"></a><a class="code" href="structcvflann_1_1_max_distance.html#a176a0c9d37039a277617e8a8b53e05b4">00321</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_true.html">True</a> <a class="code" href="structcvflann_1_1_max_distance.html#a176a0c9d37039a277617e8a8b53e05b4">is_vector_space_distance</a>;
<a name="l00322"></a>00322 
<a name="l00323"></a><a class="code" href="structcvflann_1_1_max_distance.html#a56df35de72712b6c97cf3ca7f299449f">00323</a>     <span class="keyword">typedef</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="structcvflann_1_1_max_distance.html#a56df35de72712b6c97cf3ca7f299449f">ElementType</a>;
<a name="l00324"></a><a class="code" href="structcvflann_1_1_max_distance.html#a180605be488b7132a31a86b93071e6a6">00324</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structcvflann_1_1_accumulator.html#a9ce42bd623dc4709621e5aadeed80051">Accumulator&lt;T&gt;::Type</a> <a class="code" href="structcvflann_1_1_max_distance.html#a180605be488b7132a31a86b93071e6a6">ResultType</a>;
<a name="l00325"></a>00325 
<a name="l00331"></a>00331     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Iterator1, <span class="keyword">typename</span> Iterator2&gt;
<a name="l00332"></a><a class="code" href="structcvflann_1_1_max_distance.html#a92102e7ec3b5d3848e9577bdf6009f8a">00332</a>     <a class="code" href="structcvflann_1_1_max_distance.html#a180605be488b7132a31a86b93071e6a6">ResultType</a> <a class="code" href="structcvflann_1_1_max_distance.html#a92102e7ec3b5d3848e9577bdf6009f8a">operator()</a>(Iterator1 <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, Iterator2 <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">size_t</span> <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>, <a class="code" href="structcvflann_1_1_max_distance.html#a180605be488b7132a31a86b93071e6a6">ResultType</a> worst_dist = -1)<span class="keyword"> const</span>
<a name="l00333"></a>00333 <span class="keyword">    </span>{
<a name="l00334"></a>00334         <a class="code" href="structcvflann_1_1_max_distance.html#a180605be488b7132a31a86b93071e6a6">ResultType</a> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a> = <a class="code" href="structcvflann_1_1_max_distance.html#a180605be488b7132a31a86b93071e6a6">ResultType</a>();
<a name="l00335"></a>00335         <a class="code" href="structcvflann_1_1_max_distance.html#a180605be488b7132a31a86b93071e6a6">ResultType</a> diff0, diff1, diff2, diff3;
<a name="l00336"></a>00336         Iterator1 last = a + <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>;
<a name="l00337"></a>00337         Iterator1 lastgroup = last - 3;
<a name="l00338"></a>00338 
<a name="l00339"></a>00339         <span class="comment">/* Process 4 items with each loop for efficiency. */</span>
<a name="l00340"></a>00340         <span class="keywordflow">while</span> (a &lt; lastgroup) {
<a name="l00341"></a>00341             diff0 = <a class="code" href="namespacecvflann.html#a51e0bdfcbd001afcf02cc5f812476488">abs</a>(a[0] - b[0]);
<a name="l00342"></a>00342             diff1 = <a class="code" href="namespacecvflann.html#a51e0bdfcbd001afcf02cc5f812476488">abs</a>(a[1] - b[1]);
<a name="l00343"></a>00343             diff2 = <a class="code" href="namespacecvflann.html#a51e0bdfcbd001afcf02cc5f812476488">abs</a>(a[2] - b[2]);
<a name="l00344"></a>00344             diff3 = <a class="code" href="namespacecvflann.html#a51e0bdfcbd001afcf02cc5f812476488">abs</a>(a[3] - b[3]);
<a name="l00345"></a>00345             <span class="keywordflow">if</span> (diff0&gt;result) {result = diff0; }
<a name="l00346"></a>00346             <span class="keywordflow">if</span> (diff1&gt;result) {result = diff1; }
<a name="l00347"></a>00347             <span class="keywordflow">if</span> (diff2&gt;result) {result = diff2; }
<a name="l00348"></a>00348             <span class="keywordflow">if</span> (diff3&gt;result) {result = diff3; }
<a name="l00349"></a>00349             a += 4;
<a name="l00350"></a>00350             b += 4;
<a name="l00351"></a>00351 
<a name="l00352"></a>00352             <span class="keywordflow">if</span> ((worst_dist&gt;0)&amp;&amp;(result&gt;worst_dist)) {
<a name="l00353"></a>00353                 <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l00354"></a>00354             }
<a name="l00355"></a>00355         }
<a name="l00356"></a>00356         <span class="comment">/* Process last 0-3 pixels.  Not needed for standard vector lengths. */</span>
<a name="l00357"></a>00357         <span class="keywordflow">while</span> (a &lt; last) {
<a name="l00358"></a>00358             diff0 = <a class="code" href="namespacecvflann.html#a51e0bdfcbd001afcf02cc5f812476488">abs</a>(*a++ - *b++);
<a name="l00359"></a>00359             result = (diff0&gt;<a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>) ? diff0 : result;
<a name="l00360"></a>00360         }
<a name="l00361"></a>00361         <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l00362"></a>00362     }
<a name="l00363"></a>00363 
<a name="l00364"></a>00364     <span class="comment">/* This distance functor is not dimension-wise additive, which</span>
<a name="l00365"></a>00365 <span class="comment">     * makes it an invalid kd-tree distance, not implementing the accum_dist method */</span>
<a name="l00366"></a>00366 
<a name="l00367"></a>00367 };
<a name="l00368"></a>00368 
<a name="l00370"></a>00370 
<a name="l00375"></a><a class="code" href="structcvflann_1_1_hamming_l_u_t.html">00375</a> <span class="keyword">struct </span><a class="code" href="structcvflann_1_1_hamming_l_u_t.html">HammingLUT</a>
<a name="l00376"></a>00376 {
<a name="l00377"></a><a class="code" href="structcvflann_1_1_hamming_l_u_t.html#a079b4722221e8938f9737527e03069b3">00377</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_false.html">False</a> <a class="code" href="structcvflann_1_1_hamming_l_u_t.html#a079b4722221e8938f9737527e03069b3">is_kdtree_distance</a>;
<a name="l00378"></a><a class="code" href="structcvflann_1_1_hamming_l_u_t.html#a31aace22379406498714791781139cd4">00378</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_false.html">False</a> <a class="code" href="structcvflann_1_1_hamming_l_u_t.html#a31aace22379406498714791781139cd4">is_vector_space_distance</a>;
<a name="l00379"></a>00379 
<a name="l00380"></a><a class="code" href="structcvflann_1_1_hamming_l_u_t.html#afb774f8aaf272c2806f6b0516b47d3ad">00380</a>     <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structcvflann_1_1_hamming_l_u_t.html#afb774f8aaf272c2806f6b0516b47d3ad">ElementType</a>;
<a name="l00381"></a><a class="code" href="structcvflann_1_1_hamming_l_u_t.html#a022e0260e3ecd3a202fadf6a52cba436">00381</a>     <span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="structcvflann_1_1_hamming_l_u_t.html#a022e0260e3ecd3a202fadf6a52cba436">ResultType</a>;
<a name="l00382"></a>00382 
<a name="l00385"></a><a class="code" href="structcvflann_1_1_hamming_l_u_t.html#ad707afb7a5c9d5ba5a730226cce45ccf">00385</a>     <a class="code" href="structcvflann_1_1_hamming_l_u_t.html#a022e0260e3ecd3a202fadf6a52cba436">ResultType</a> <a class="code" href="structcvflann_1_1_hamming_l_u_t.html#ad707afb7a5c9d5ba5a730226cce45ccf">operator()</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">int</span> <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>)<span class="keyword"> const</span>
<a name="l00386"></a>00386 <span class="keyword">    </span>{
<a name="l00387"></a>00387         <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> popCountTable[] =
<a name="l00388"></a>00388         {
<a name="l00389"></a>00389             0, 1, 1, 2, 1, 2, 2, 3, 1, 2, 2, 3, 2, 3, 3, 4, 1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5,
<a name="l00390"></a>00390             1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6,
<a name="l00391"></a>00391             1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6,
<a name="l00392"></a>00392             2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7,
<a name="l00393"></a>00393             1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6,
<a name="l00394"></a>00394             2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7,
<a name="l00395"></a>00395             2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7,
<a name="l00396"></a>00396             3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7, 4, 5, 5, 6, 5, 6, 6, 7, 5, 6, 6, 7, 6, 7, 7, 8
<a name="l00397"></a>00397         };
<a name="l00398"></a>00398         <a class="code" href="structcvflann_1_1_hamming_l_u_t.html#a022e0260e3ecd3a202fadf6a52cba436">ResultType</a> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a> = 0;
<a name="l00399"></a>00399         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>; i++) {
<a name="l00400"></a>00400             result += popCountTable[a[i] ^ b[i]];
<a name="l00401"></a>00401         }
<a name="l00402"></a>00402         <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l00403"></a>00403     }
<a name="l00404"></a>00404 };
<a name="l00405"></a>00405 
<a name="l00410"></a><a class="code" href="structcvflann_1_1_hamming_l_u_t2.html">00410</a> <span class="keyword">struct </span><a class="code" href="structcvflann_1_1_hamming_l_u_t2.html">HammingLUT2</a>
<a name="l00411"></a>00411 {
<a name="l00412"></a><a class="code" href="structcvflann_1_1_hamming_l_u_t2.html#a820002d9bc643ea44980001e7e67e4cf">00412</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_false.html">False</a> <a class="code" href="structcvflann_1_1_hamming_l_u_t2.html#a820002d9bc643ea44980001e7e67e4cf">is_kdtree_distance</a>;
<a name="l00413"></a><a class="code" href="structcvflann_1_1_hamming_l_u_t2.html#a58948f2e905cade31416d5daa98f1d0b">00413</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_false.html">False</a> <a class="code" href="structcvflann_1_1_hamming_l_u_t2.html#a58948f2e905cade31416d5daa98f1d0b">is_vector_space_distance</a>;
<a name="l00414"></a>00414 
<a name="l00415"></a><a class="code" href="structcvflann_1_1_hamming_l_u_t2.html#a055b0a7a52a889073ce9a8ede7274f0f">00415</a>     <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structcvflann_1_1_hamming_l_u_t2.html#a055b0a7a52a889073ce9a8ede7274f0f">ElementType</a>;
<a name="l00416"></a><a class="code" href="structcvflann_1_1_hamming_l_u_t2.html#ae3baeeac36b73addbd4d278444e2ecc8">00416</a>     <span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="structcvflann_1_1_hamming_l_u_t2.html#ae3baeeac36b73addbd4d278444e2ecc8">ResultType</a>;
<a name="l00417"></a>00417 
<a name="l00420"></a><a class="code" href="structcvflann_1_1_hamming_l_u_t2.html#a333426f044845ca7fa7486070dfeef86">00420</a>     <a class="code" href="structcvflann_1_1_hamming_l_u_t2.html#ae3baeeac36b73addbd4d278444e2ecc8">ResultType</a> <a class="code" href="structcvflann_1_1_hamming_l_u_t2.html#a333426f044845ca7fa7486070dfeef86">operator()</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">size_t</span> <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>)<span class="keyword"> const</span>
<a name="l00421"></a>00421 <span class="keyword">    </span>{
<a name="l00422"></a>00422         <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> popCountTable[] =
<a name="l00423"></a>00423         {
<a name="l00424"></a>00424             0, 1, 1, 2, 1, 2, 2, 3, 1, 2, 2, 3, 2, 3, 3, 4, 1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5,
<a name="l00425"></a>00425             1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6,
<a name="l00426"></a>00426             1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6,
<a name="l00427"></a>00427             2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7,
<a name="l00428"></a>00428             1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6,
<a name="l00429"></a>00429             2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7,
<a name="l00430"></a>00430             2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7,
<a name="l00431"></a>00431             3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7, 4, 5, 5, 6, 5, 6, 6, 7, 5, 6, 6, 7, 6, 7, 7, 8
<a name="l00432"></a>00432         };
<a name="l00433"></a>00433         <a class="code" href="structcvflann_1_1_hamming_l_u_t2.html#ae3baeeac36b73addbd4d278444e2ecc8">ResultType</a> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a> = 0;
<a name="l00434"></a>00434         <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>; i++) {
<a name="l00435"></a>00435             result += popCountTable[a[i] ^ b[i]];
<a name="l00436"></a>00436         }
<a name="l00437"></a>00437         <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l00438"></a>00438     }
<a name="l00439"></a>00439 };
<a name="l00440"></a>00440 
<a name="l00445"></a>00445 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00446"></a><a class="code" href="structcvflann_1_1_hamming.html">00446</a> <span class="keyword">struct </span><a class="code" href="structcvflann_1_1_hamming.html">Hamming</a>
<a name="l00447"></a>00447 {
<a name="l00448"></a><a class="code" href="structcvflann_1_1_hamming.html#a3b2a3e130d86c02b8cac98ae58645bad">00448</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_false.html">False</a> <a class="code" href="structcvflann_1_1_hamming.html#a3b2a3e130d86c02b8cac98ae58645bad">is_kdtree_distance</a>;
<a name="l00449"></a><a class="code" href="structcvflann_1_1_hamming.html#ac59dee15cce5d7a01bf8dc54ef30a305">00449</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_false.html">False</a> <a class="code" href="structcvflann_1_1_hamming.html#ac59dee15cce5d7a01bf8dc54ef30a305">is_vector_space_distance</a>;
<a name="l00450"></a>00450 
<a name="l00451"></a>00451 
<a name="l00452"></a><a class="code" href="structcvflann_1_1_hamming.html#a2be434e23cf78b659dc72d6a0d5fa41e">00452</a>     <span class="keyword">typedef</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="structcvflann_1_1_hamming.html#a2be434e23cf78b659dc72d6a0d5fa41e">ElementType</a>;
<a name="l00453"></a><a class="code" href="structcvflann_1_1_hamming.html#a08d0b008dcd6bce54b0f305176478d29">00453</a>     <span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="structcvflann_1_1_hamming.html#a08d0b008dcd6bce54b0f305176478d29">ResultType</a>;
<a name="l00454"></a>00454 
<a name="l00455"></a>00455     <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Iterator1, <span class="keyword">typename</span> Iterator2&gt;
<a name="l00456"></a><a class="code" href="structcvflann_1_1_hamming.html#a70f6160b6889e7e6546602b54b4408fe">00456</a>     <a class="code" href="structcvflann_1_1_hamming.html#a08d0b008dcd6bce54b0f305176478d29">ResultType</a> <a class="code" href="structcvflann_1_1_hamming.html#a70f6160b6889e7e6546602b54b4408fe">operator()</a>(Iterator1 <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, Iterator2 <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">size_t</span> <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>, <a class="code" href="structcvflann_1_1_hamming.html#a08d0b008dcd6bce54b0f305176478d29">ResultType</a> <span class="comment">/*worst_dist*/</span> = -1)<span class="keyword"> const</span>
<a name="l00457"></a>00457 <span class="keyword">    </span>{
<a name="l00458"></a>00458         <a class="code" href="structcvflann_1_1_hamming.html#a08d0b008dcd6bce54b0f305176478d29">ResultType</a> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a> = 0;
<a name="l00459"></a>00459 <span class="preprocessor">#ifdef __GNUC__</span>
<a name="l00460"></a>00460 <span class="preprocessor"></span><span class="preprocessor">#ifdef __ARM_NEON__</span>
<a name="l00461"></a>00461 <span class="preprocessor"></span>        {
<a name="l00462"></a>00462             uint32x4_t bits = vmovq_n_u32(0);
<a name="l00463"></a>00463             <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>; i += 16) {
<a name="l00464"></a>00464                 uint8x16_t A_vec = vld1q_u8 (a + i);
<a name="l00465"></a>00465                 uint8x16_t B_vec = vld1q_u8 (b + i);
<a name="l00466"></a>00466                 uint8x16_t AxorB = veorq_u8 (A_vec, B_vec);
<a name="l00467"></a>00467                 uint8x16_t bitsSet = vcntq_u8 (AxorB);
<a name="l00468"></a>00468                 uint16x8_t bitSet8 = vpaddlq_u8 (bitsSet);
<a name="l00469"></a>00469                 uint32x4_t bitSet4 = vpaddlq_u16 (bitSet8);
<a name="l00470"></a>00470                 bits = vaddq_u32(bits, bitSet4);
<a name="l00471"></a>00471             }
<a name="l00472"></a>00472             uint64x2_t bitSet2 = vpaddlq_u32 (bits);
<a name="l00473"></a>00473             result = vgetq_lane_s32 (vreinterpretq_s32_u64(bitSet2),0);
<a name="l00474"></a>00474             result += vgetq_lane_s32 (vreinterpretq_s32_u64(bitSet2),2);
<a name="l00475"></a>00475         }
<a name="l00476"></a>00476 <span class="preprocessor">#else</span>
<a name="l00477"></a>00477 <span class="preprocessor"></span>        {
<a name="l00478"></a>00478             <span class="comment">//for portability just use unsigned long -- and use the __builtin_popcountll (see docs for __builtin_popcountll)</span>
<a name="l00479"></a>00479             <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> pop_t;
<a name="l00480"></a>00480             <span class="keyword">const</span> <span class="keywordtype">size_t</span> modulo = size % <span class="keyword">sizeof</span>(pop_t);
<a name="l00481"></a>00481             <span class="keyword">const</span> pop_t* a2 = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>pop_t*<span class="keyword">&gt;</span> (<a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>);
<a name="l00482"></a>00482             <span class="keyword">const</span> pop_t* b2 = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>pop_t*<span class="keyword">&gt;</span> (<a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>);
<a name="l00483"></a>00483             <span class="keyword">const</span> pop_t* a2_end = a2 + (size / <span class="keyword">sizeof</span>(pop_t));
<a name="l00484"></a>00484 
<a name="l00485"></a>00485             <span class="keywordflow">for</span> (; a2 != a2_end; ++a2, ++b2) result += __builtin_popcountll((*a2) ^ (*b2));
<a name="l00486"></a>00486 
<a name="l00487"></a>00487             <span class="keywordflow">if</span> (modulo) {
<a name="l00488"></a>00488                 <span class="comment">//in the case where size is not dividable by sizeof(size_t)</span>
<a name="l00489"></a>00489                 <span class="comment">//need to mask off the bits at the end</span>
<a name="l00490"></a>00490                 pop_t a_final = 0, b_final = 0;
<a name="l00491"></a>00491                 memcpy(&amp;a_final, a2, modulo);
<a name="l00492"></a>00492                 memcpy(&amp;b_final, b2, modulo);
<a name="l00493"></a>00493                 result += __builtin_popcountll(a_final ^ b_final);
<a name="l00494"></a>00494             }
<a name="l00495"></a>00495         }
<a name="l00496"></a>00496 <span class="preprocessor">#endif //NEON</span>
<a name="l00497"></a>00497 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00498"></a>00498 <span class="preprocessor"></span>        <a class="code" href="structcvflann_1_1_hamming_l_u_t.html">HammingLUT</a> <a class="code" href="core__c_8h.html#ac0182572699c7759eba7ba1d6b8e32d6">lut</a>;
<a name="l00499"></a>00499         result = <a class="code" href="core__c_8h.html#ac0182572699c7759eba7ba1d6b8e32d6">lut</a>(reinterpret_cast&lt;const unsigned char*&gt; (a),
<a name="l00500"></a>00500                      reinterpret_cast&lt;const unsigned char*&gt; (b), size * <span class="keyword">sizeof</span>(pop_t));
<a name="l00501"></a>00501 <span class="preprocessor">#endif</span>
<a name="l00502"></a>00502 <span class="preprocessor"></span>        <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l00503"></a>00503     }
<a name="l00504"></a>00504 };
<a name="l00505"></a>00505 
<a name="l00506"></a>00506 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l00507"></a><a class="code" href="structcvflann_1_1_hamming2.html">00507</a> <span class="keyword">struct </span><a class="code" href="structcvflann_1_1_hamming2.html">Hamming2</a>
<a name="l00508"></a>00508 {
<a name="l00509"></a><a class="code" href="structcvflann_1_1_hamming2.html#a8e207493c0cb89f608de61095186e58a">00509</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_false.html">False</a> <a class="code" href="structcvflann_1_1_hamming2.html#a8e207493c0cb89f608de61095186e58a">is_kdtree_distance</a>;
<a name="l00510"></a><a class="code" href="structcvflann_1_1_hamming2.html#a7572b1466e814fee469fef9b279ce9e5">00510</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_false.html">False</a> <a class="code" href="structcvflann_1_1_hamming2.html#a7572b1466e814fee469fef9b279ce9e5">is_vector_space_distance</a>;
<a name="l00511"></a>00511 
<a name="l00512"></a><a class="code" href="structcvflann_1_1_hamming2.html#a334d2a82d1094c80367ae6e8defd3561">00512</a>     <span class="keyword">typedef</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="structcvflann_1_1_hamming2.html#a334d2a82d1094c80367ae6e8defd3561">ElementType</a>;
<a name="l00513"></a><a class="code" href="structcvflann_1_1_hamming2.html#a06581206d8fcf7b0282ea2813cb9f732">00513</a>     <span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="structcvflann_1_1_hamming2.html#a06581206d8fcf7b0282ea2813cb9f732">ResultType</a>;
<a name="l00514"></a>00514 
<a name="l00517"></a><a class="code" href="structcvflann_1_1_hamming2.html#a6c4830cc73eb8cfa0bcbe0c244456c44">00517</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structcvflann_1_1_hamming2.html#a6c4830cc73eb8cfa0bcbe0c244456c44">popcnt32</a>(<a class="code" href="dist_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a> <a class="code" href="legacy_8hpp.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>)<span class="keyword"> const</span>
<a name="l00518"></a>00518 <span class="keyword">    </span>{
<a name="l00519"></a>00519         n -= ((n &gt;&gt; 1) &amp; 0x55555555);
<a name="l00520"></a>00520         n = (n &amp; 0x33333333) + ((n &gt;&gt; 2) &amp; 0x33333333);
<a name="l00521"></a>00521         <span class="keywordflow">return</span> (((n + (n &gt;&gt; 4))&amp; 0xF0F0F0F)* 0x1010101) &gt;&gt; 24;
<a name="l00522"></a>00522     }
<a name="l00523"></a>00523 
<a name="l00524"></a>00524 <span class="preprocessor">#ifdef FLANN_PLATFORM_64_BIT</span>
<a name="l00525"></a><a class="code" href="structcvflann_1_1_hamming2.html#af36653de73302655a86ff0cc4973f1d1">00525</a> <span class="preprocessor"></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structcvflann_1_1_hamming2.html#af36653de73302655a86ff0cc4973f1d1">popcnt64</a>(<a class="code" href="dist_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> <a class="code" href="legacy_8hpp.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>)<span class="keyword"> const</span>
<a name="l00526"></a>00526 <span class="keyword">    </span>{
<a name="l00527"></a>00527         n -= ((n &gt;&gt; 1) &amp; 0x5555555555555555);
<a name="l00528"></a>00528         n = (n &amp; 0x3333333333333333) + ((n &gt;&gt; 2) &amp; 0x3333333333333333);
<a name="l00529"></a>00529         <span class="keywordflow">return</span> (((n + (n &gt;&gt; 4))&amp; 0x0f0f0f0f0f0f0f0f)* 0x0101010101010101) &gt;&gt; 56;
<a name="l00530"></a>00530     }
<a name="l00531"></a>00531 <span class="preprocessor">#endif</span>
<a name="l00532"></a>00532 <span class="preprocessor"></span>
<a name="l00533"></a>00533     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Iterator1, <span class="keyword">typename</span> Iterator2&gt;
<a name="l00534"></a><a class="code" href="structcvflann_1_1_hamming2.html#a482334eccf3e932333f30a7e7383639e">00534</a>     <a class="code" href="structcvflann_1_1_hamming2.html#a06581206d8fcf7b0282ea2813cb9f732">ResultType</a> <a class="code" href="structcvflann_1_1_hamming2.html#a482334eccf3e932333f30a7e7383639e">operator()</a>(Iterator1 <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, Iterator2 <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">size_t</span> <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>, <a class="code" href="structcvflann_1_1_hamming2.html#a06581206d8fcf7b0282ea2813cb9f732">ResultType</a> <span class="comment">/*worst_dist*/</span> = -1)<span class="keyword"> const</span>
<a name="l00535"></a>00535 <span class="keyword">    </span>{
<a name="l00536"></a>00536 <span class="preprocessor">#ifdef FLANN_PLATFORM_64_BIT</span>
<a name="l00537"></a>00537 <span class="preprocessor"></span>        <span class="keyword">const</span> <a class="code" href="dist_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>* pa = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><a class="code" href="dist_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>*<span class="keyword">&gt;</span>(<a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>);
<a name="l00538"></a>00538         <span class="keyword">const</span> <a class="code" href="dist_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>* pb = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><a class="code" href="dist_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>*<span class="keyword">&gt;</span>(<a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>);
<a name="l00539"></a>00539         <a class="code" href="structcvflann_1_1_hamming2.html#a06581206d8fcf7b0282ea2813cb9f732">ResultType</a> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a> = 0;
<a name="l00540"></a>00540         size /= (<span class="keyword">sizeof</span>(<a class="code" href="dist_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>)/<span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>));
<a name="l00541"></a>00541         <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>; ++i ) {
<a name="l00542"></a>00542             result += <a class="code" href="structcvflann_1_1_hamming2.html#af36653de73302655a86ff0cc4973f1d1">popcnt64</a>(*pa ^ *pb);
<a name="l00543"></a>00543             ++pa;
<a name="l00544"></a>00544             ++pb;
<a name="l00545"></a>00545         }
<a name="l00546"></a>00546 <span class="preprocessor">#else</span>
<a name="l00547"></a>00547 <span class="preprocessor"></span>        <span class="keyword">const</span> <a class="code" href="dist_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a>* pa = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><a class="code" href="dist_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a>*<span class="keyword">&gt;</span>(<a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>);
<a name="l00548"></a>00548         <span class="keyword">const</span> <a class="code" href="dist_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a>* pb = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><a class="code" href="dist_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a>*<span class="keyword">&gt;</span>(<a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>);
<a name="l00549"></a>00549         <a class="code" href="structcvflann_1_1_hamming2.html#a06581206d8fcf7b0282ea2813cb9f732">ResultType</a> result = 0;
<a name="l00550"></a>00550         size /= (<span class="keyword">sizeof</span>(<a class="code" href="dist_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a>)/<span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>));
<a name="l00551"></a>00551         <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>; ++i ) {
<a name="l00552"></a>00552             result += <a class="code" href="structcvflann_1_1_hamming2.html#a6c4830cc73eb8cfa0bcbe0c244456c44">popcnt32</a>(*pa ^ *pb);
<a name="l00553"></a>00553             ++pa;
<a name="l00554"></a>00554             ++pb;
<a name="l00555"></a>00555         }
<a name="l00556"></a>00556 <span class="preprocessor">#endif</span>
<a name="l00557"></a>00557 <span class="preprocessor"></span>        <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l00558"></a>00558     }
<a name="l00559"></a>00559 };
<a name="l00560"></a>00560 
<a name="l00561"></a>00561 
<a name="l00562"></a>00562 
<a name="l00564"></a>00564 
<a name="l00565"></a>00565 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00566"></a><a class="code" href="structcvflann_1_1_hist_intersection_distance.html">00566</a> <span class="keyword">struct </span><a class="code" href="structcvflann_1_1_hist_intersection_distance.html">HistIntersectionDistance</a>
<a name="l00567"></a>00567 {
<a name="l00568"></a><a class="code" href="structcvflann_1_1_hist_intersection_distance.html#a46f34e34cc458f0564d4deb8b91990c3">00568</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_true.html">True</a> <a class="code" href="structcvflann_1_1_hist_intersection_distance.html#a46f34e34cc458f0564d4deb8b91990c3">is_kdtree_distance</a>;
<a name="l00569"></a><a class="code" href="structcvflann_1_1_hist_intersection_distance.html#af92ded76070af8fd088b758012ad0289">00569</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_true.html">True</a> <a class="code" href="structcvflann_1_1_hist_intersection_distance.html#af92ded76070af8fd088b758012ad0289">is_vector_space_distance</a>;
<a name="l00570"></a>00570 
<a name="l00571"></a><a class="code" href="structcvflann_1_1_hist_intersection_distance.html#aa4ca3b614996eaa55a9208854e8f3c07">00571</a>     <span class="keyword">typedef</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="structcvflann_1_1_hist_intersection_distance.html#aa4ca3b614996eaa55a9208854e8f3c07">ElementType</a>;
<a name="l00572"></a><a class="code" href="structcvflann_1_1_hist_intersection_distance.html#a0d4cb03d29473e933994cb132ea384db">00572</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structcvflann_1_1_accumulator.html#a9ce42bd623dc4709621e5aadeed80051">Accumulator&lt;T&gt;::Type</a> <a class="code" href="structcvflann_1_1_hist_intersection_distance.html#a0d4cb03d29473e933994cb132ea384db">ResultType</a>;
<a name="l00573"></a>00573 
<a name="l00577"></a>00577     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Iterator1, <span class="keyword">typename</span> Iterator2&gt;
<a name="l00578"></a><a class="code" href="structcvflann_1_1_hist_intersection_distance.html#afe614d26454275b13b6a3e06d4dfc819">00578</a>     <a class="code" href="structcvflann_1_1_hist_intersection_distance.html#a0d4cb03d29473e933994cb132ea384db">ResultType</a> <a class="code" href="structcvflann_1_1_hist_intersection_distance.html#afe614d26454275b13b6a3e06d4dfc819">operator()</a>(Iterator1 <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, Iterator2 <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">size_t</span> <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>, <a class="code" href="structcvflann_1_1_hist_intersection_distance.html#a0d4cb03d29473e933994cb132ea384db">ResultType</a> worst_dist = -1)<span class="keyword"> const</span>
<a name="l00579"></a>00579 <span class="keyword">    </span>{
<a name="l00580"></a>00580         <a class="code" href="structcvflann_1_1_hist_intersection_distance.html#a0d4cb03d29473e933994cb132ea384db">ResultType</a> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a> = <a class="code" href="structcvflann_1_1_hist_intersection_distance.html#a0d4cb03d29473e933994cb132ea384db">ResultType</a>();
<a name="l00581"></a>00581         <a class="code" href="structcvflann_1_1_hist_intersection_distance.html#a0d4cb03d29473e933994cb132ea384db">ResultType</a> min0, min1, min2, min3;
<a name="l00582"></a>00582         Iterator1 last = a + <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>;
<a name="l00583"></a>00583         Iterator1 lastgroup = last - 3;
<a name="l00584"></a>00584 
<a name="l00585"></a>00585         <span class="comment">/* Process 4 items with each loop for efficiency. */</span>
<a name="l00586"></a>00586         <span class="keywordflow">while</span> (a &lt; lastgroup) {
<a name="l00587"></a>00587             min0 = (<a class="code" href="structcvflann_1_1_hist_intersection_distance.html#a0d4cb03d29473e933994cb132ea384db">ResultType</a>)(a[0] &lt; b[0] ? a[0] : b[0]);
<a name="l00588"></a>00588             min1 = (<a class="code" href="structcvflann_1_1_hist_intersection_distance.html#a0d4cb03d29473e933994cb132ea384db">ResultType</a>)(a[1] &lt; b[1] ? a[1] : b[1]);
<a name="l00589"></a>00589             min2 = (<a class="code" href="structcvflann_1_1_hist_intersection_distance.html#a0d4cb03d29473e933994cb132ea384db">ResultType</a>)(a[2] &lt; b[2] ? a[2] : b[2]);
<a name="l00590"></a>00590             min3 = (<a class="code" href="structcvflann_1_1_hist_intersection_distance.html#a0d4cb03d29473e933994cb132ea384db">ResultType</a>)(a[3] &lt; b[3] ? a[3] : b[3]);
<a name="l00591"></a>00591             result += min0 + min1 + min2 + min3;
<a name="l00592"></a>00592             a += 4;
<a name="l00593"></a>00593             b += 4;
<a name="l00594"></a>00594             <span class="keywordflow">if</span> ((worst_dist&gt;0)&amp;&amp;(result&gt;worst_dist)) {
<a name="l00595"></a>00595                 <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l00596"></a>00596             }
<a name="l00597"></a>00597         }
<a name="l00598"></a>00598         <span class="comment">/* Process last 0-3 pixels.  Not needed for standard vector lengths. */</span>
<a name="l00599"></a>00599         <span class="keywordflow">while</span> (a &lt; last) {
<a name="l00600"></a>00600             min0 = (<a class="code" href="structcvflann_1_1_hist_intersection_distance.html#a0d4cb03d29473e933994cb132ea384db">ResultType</a>)(*a &lt; *b ? *a : *b);
<a name="l00601"></a>00601             result += min0;
<a name="l00602"></a>00602             ++<a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>;
<a name="l00603"></a>00603             ++<a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>;
<a name="l00604"></a>00604         }
<a name="l00605"></a>00605         <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l00606"></a>00606     }
<a name="l00607"></a>00607 
<a name="l00611"></a>00611     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U, <span class="keyword">typename</span> V&gt;
<a name="l00612"></a><a class="code" href="structcvflann_1_1_hist_intersection_distance.html#aa18bb027898ac3518a3e6cc2afb07c24">00612</a>     <span class="keyword">inline</span> <a class="code" href="structcvflann_1_1_hist_intersection_distance.html#a0d4cb03d29473e933994cb132ea384db">ResultType</a> <a class="code" href="structcvflann_1_1_hist_intersection_distance.html#aa18bb027898ac3518a3e6cc2afb07c24">accum_dist</a>(<span class="keyword">const</span> <a class="code" href="core__c_8h.html#aa9c521f41af9a5191e5e4b6ffbae211a">U</a>&amp; <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, <span class="keyword">const</span> <a class="code" href="core__c_8h.html#ad8dd4fff0e3910932187b6de0543cae1">V</a>&amp; <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">int</span>)<span class="keyword"> const</span>
<a name="l00613"></a>00613 <span class="keyword">    </span>{
<a name="l00614"></a>00614         <span class="keywordflow">return</span> a&lt;b ? a : <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>;
<a name="l00615"></a>00615     }
<a name="l00616"></a>00616 };
<a name="l00617"></a>00617 
<a name="l00618"></a>00618 
<a name="l00619"></a>00619 
<a name="l00620"></a>00620 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00621"></a><a class="code" href="structcvflann_1_1_hellinger_distance.html">00621</a> <span class="keyword">struct </span><a class="code" href="structcvflann_1_1_hellinger_distance.html">HellingerDistance</a>
<a name="l00622"></a>00622 {
<a name="l00623"></a><a class="code" href="structcvflann_1_1_hellinger_distance.html#aeae75a5a68fe211e7ee909f3a90e93d3">00623</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_true.html">True</a> <a class="code" href="structcvflann_1_1_hellinger_distance.html#aeae75a5a68fe211e7ee909f3a90e93d3">is_kdtree_distance</a>;
<a name="l00624"></a><a class="code" href="structcvflann_1_1_hellinger_distance.html#ab5f54b4b04397ad6a581c55576bf16af">00624</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_true.html">True</a> <a class="code" href="structcvflann_1_1_hellinger_distance.html#ab5f54b4b04397ad6a581c55576bf16af">is_vector_space_distance</a>;
<a name="l00625"></a>00625 
<a name="l00626"></a><a class="code" href="structcvflann_1_1_hellinger_distance.html#a3b4b98376064e5051537fb2ec044f18c">00626</a>     <span class="keyword">typedef</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="structcvflann_1_1_hellinger_distance.html#a3b4b98376064e5051537fb2ec044f18c">ElementType</a>;
<a name="l00627"></a><a class="code" href="structcvflann_1_1_hellinger_distance.html#a5ea5bc129fed2c06da92c75586ef5833">00627</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structcvflann_1_1_accumulator.html#a9ce42bd623dc4709621e5aadeed80051">Accumulator&lt;T&gt;::Type</a> <a class="code" href="structcvflann_1_1_hellinger_distance.html#a5ea5bc129fed2c06da92c75586ef5833">ResultType</a>;
<a name="l00628"></a>00628 
<a name="l00632"></a>00632     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Iterator1, <span class="keyword">typename</span> Iterator2&gt;
<a name="l00633"></a><a class="code" href="structcvflann_1_1_hellinger_distance.html#ac7fce120a086c9b9f1224ecc923bbbd5">00633</a>     <a class="code" href="structcvflann_1_1_hellinger_distance.html#a5ea5bc129fed2c06da92c75586ef5833">ResultType</a> <a class="code" href="structcvflann_1_1_hellinger_distance.html#ac7fce120a086c9b9f1224ecc923bbbd5">operator()</a>(Iterator1 <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, Iterator2 <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">size_t</span> <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>, <a class="code" href="structcvflann_1_1_hellinger_distance.html#a5ea5bc129fed2c06da92c75586ef5833">ResultType</a> <span class="comment">/*worst_dist*/</span> = -1)<span class="keyword"> const</span>
<a name="l00634"></a>00634 <span class="keyword">    </span>{
<a name="l00635"></a>00635         <a class="code" href="structcvflann_1_1_hellinger_distance.html#a5ea5bc129fed2c06da92c75586ef5833">ResultType</a> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a> = <a class="code" href="structcvflann_1_1_hellinger_distance.html#a5ea5bc129fed2c06da92c75586ef5833">ResultType</a>();
<a name="l00636"></a>00636         <a class="code" href="structcvflann_1_1_hellinger_distance.html#a5ea5bc129fed2c06da92c75586ef5833">ResultType</a> diff0, diff1, diff2, diff3;
<a name="l00637"></a>00637         Iterator1 last = a + <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>;
<a name="l00638"></a>00638         Iterator1 lastgroup = last - 3;
<a name="l00639"></a>00639 
<a name="l00640"></a>00640         <span class="comment">/* Process 4 items with each loop for efficiency. */</span>
<a name="l00641"></a>00641         <span class="keywordflow">while</span> (a &lt; lastgroup) {
<a name="l00642"></a>00642             diff0 = <a class="code" href="namespacecv.html#a2ae54521731aa4bcf7bc5042a2db88bb" title="computes square root of each matrix element (dst = src**0.5)">sqrt</a>(static_cast&lt;ResultType&gt;(a[0])) - <a class="code" href="namespacecv.html#a2ae54521731aa4bcf7bc5042a2db88bb" title="computes square root of each matrix element (dst = src**0.5)">sqrt</a>(static_cast&lt;ResultType&gt;(b[0]));
<a name="l00643"></a>00643             diff1 = <a class="code" href="namespacecv.html#a2ae54521731aa4bcf7bc5042a2db88bb" title="computes square root of each matrix element (dst = src**0.5)">sqrt</a>(static_cast&lt;ResultType&gt;(a[1])) - <a class="code" href="namespacecv.html#a2ae54521731aa4bcf7bc5042a2db88bb" title="computes square root of each matrix element (dst = src**0.5)">sqrt</a>(static_cast&lt;ResultType&gt;(b[1]));
<a name="l00644"></a>00644             diff2 = <a class="code" href="namespacecv.html#a2ae54521731aa4bcf7bc5042a2db88bb" title="computes square root of each matrix element (dst = src**0.5)">sqrt</a>(static_cast&lt;ResultType&gt;(a[2])) - <a class="code" href="namespacecv.html#a2ae54521731aa4bcf7bc5042a2db88bb" title="computes square root of each matrix element (dst = src**0.5)">sqrt</a>(static_cast&lt;ResultType&gt;(b[2]));
<a name="l00645"></a>00645             diff3 = <a class="code" href="namespacecv.html#a2ae54521731aa4bcf7bc5042a2db88bb" title="computes square root of each matrix element (dst = src**0.5)">sqrt</a>(static_cast&lt;ResultType&gt;(a[3])) - <a class="code" href="namespacecv.html#a2ae54521731aa4bcf7bc5042a2db88bb" title="computes square root of each matrix element (dst = src**0.5)">sqrt</a>(static_cast&lt;ResultType&gt;(b[3]));
<a name="l00646"></a>00646             result += diff0 * diff0 + diff1 * diff1 + diff2 * diff2 + diff3 * diff3;
<a name="l00647"></a>00647             a += 4;
<a name="l00648"></a>00648             b += 4;
<a name="l00649"></a>00649         }
<a name="l00650"></a>00650         <span class="keywordflow">while</span> (a &lt; last) {
<a name="l00651"></a>00651             diff0 = <a class="code" href="namespacecv.html#a2ae54521731aa4bcf7bc5042a2db88bb" title="computes square root of each matrix element (dst = src**0.5)">sqrt</a>(static_cast&lt;ResultType&gt;(*a++)) - <a class="code" href="namespacecv.html#a2ae54521731aa4bcf7bc5042a2db88bb" title="computes square root of each matrix element (dst = src**0.5)">sqrt</a>(static_cast&lt;ResultType&gt;(*b++));
<a name="l00652"></a>00652             result += diff0 * diff0;
<a name="l00653"></a>00653         }
<a name="l00654"></a>00654         <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l00655"></a>00655     }
<a name="l00656"></a>00656 
<a name="l00660"></a>00660     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U, <span class="keyword">typename</span> V&gt;
<a name="l00661"></a><a class="code" href="structcvflann_1_1_hellinger_distance.html#a4f161f3330cb311dc2790d566fe9de28">00661</a>     <span class="keyword">inline</span> <a class="code" href="structcvflann_1_1_hellinger_distance.html#a5ea5bc129fed2c06da92c75586ef5833">ResultType</a> <a class="code" href="structcvflann_1_1_hellinger_distance.html#a4f161f3330cb311dc2790d566fe9de28">accum_dist</a>(<span class="keyword">const</span> <a class="code" href="core__c_8h.html#aa9c521f41af9a5191e5e4b6ffbae211a">U</a>&amp; <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, <span class="keyword">const</span> <a class="code" href="core__c_8h.html#ad8dd4fff0e3910932187b6de0543cae1">V</a>&amp; <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">int</span>)<span class="keyword"> const</span>
<a name="l00662"></a>00662 <span class="keyword">    </span>{
<a name="l00663"></a>00663         <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a2ae54521731aa4bcf7bc5042a2db88bb" title="computes square root of each matrix element (dst = src**0.5)">sqrt</a>(static_cast&lt;ResultType&gt;(a)) - <a class="code" href="namespacecv.html#a2ae54521731aa4bcf7bc5042a2db88bb" title="computes square root of each matrix element (dst = src**0.5)">sqrt</a>(static_cast&lt;ResultType&gt;(b));
<a name="l00664"></a>00664     }
<a name="l00665"></a>00665 };
<a name="l00666"></a>00666 
<a name="l00667"></a>00667 
<a name="l00668"></a>00668 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00669"></a><a class="code" href="structcvflann_1_1_chi_square_distance.html">00669</a> <span class="keyword">struct </span><a class="code" href="structcvflann_1_1_chi_square_distance.html">ChiSquareDistance</a>
<a name="l00670"></a>00670 {
<a name="l00671"></a><a class="code" href="structcvflann_1_1_chi_square_distance.html#a79abba675ec902d1e75f3e57d5af55ea">00671</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_true.html">True</a> <a class="code" href="structcvflann_1_1_chi_square_distance.html#a79abba675ec902d1e75f3e57d5af55ea">is_kdtree_distance</a>;
<a name="l00672"></a><a class="code" href="structcvflann_1_1_chi_square_distance.html#a408f961082255f1f8946efdc0de650ef">00672</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_true.html">True</a> <a class="code" href="structcvflann_1_1_chi_square_distance.html#a408f961082255f1f8946efdc0de650ef">is_vector_space_distance</a>;
<a name="l00673"></a>00673 
<a name="l00674"></a><a class="code" href="structcvflann_1_1_chi_square_distance.html#a20f0256af228f8a7d290ff508a87e95a">00674</a>     <span class="keyword">typedef</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="structcvflann_1_1_chi_square_distance.html#a20f0256af228f8a7d290ff508a87e95a">ElementType</a>;
<a name="l00675"></a><a class="code" href="structcvflann_1_1_chi_square_distance.html#a5a4ba72245b30ed720d856bbd3530478">00675</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structcvflann_1_1_accumulator.html#a9ce42bd623dc4709621e5aadeed80051">Accumulator&lt;T&gt;::Type</a> <a class="code" href="structcvflann_1_1_chi_square_distance.html#a5a4ba72245b30ed720d856bbd3530478">ResultType</a>;
<a name="l00676"></a>00676 
<a name="l00680"></a>00680     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Iterator1, <span class="keyword">typename</span> Iterator2&gt;
<a name="l00681"></a><a class="code" href="structcvflann_1_1_chi_square_distance.html#af189d0f9119f9416cc1089a872d9c2dd">00681</a>     <a class="code" href="structcvflann_1_1_chi_square_distance.html#a5a4ba72245b30ed720d856bbd3530478">ResultType</a> <a class="code" href="structcvflann_1_1_chi_square_distance.html#af189d0f9119f9416cc1089a872d9c2dd">operator()</a>(Iterator1 <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, Iterator2 <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">size_t</span> <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>, <a class="code" href="structcvflann_1_1_chi_square_distance.html#a5a4ba72245b30ed720d856bbd3530478">ResultType</a> worst_dist = -1)<span class="keyword"> const</span>
<a name="l00682"></a>00682 <span class="keyword">    </span>{
<a name="l00683"></a>00683         <a class="code" href="structcvflann_1_1_chi_square_distance.html#a5a4ba72245b30ed720d856bbd3530478">ResultType</a> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a> = <a class="code" href="structcvflann_1_1_chi_square_distance.html#a5a4ba72245b30ed720d856bbd3530478">ResultType</a>();
<a name="l00684"></a>00684         <a class="code" href="structcvflann_1_1_chi_square_distance.html#a5a4ba72245b30ed720d856bbd3530478">ResultType</a> <a class="code" href="namespacecv.html#aa012757b1a6536a1a3ef813a0aba1c1e">sum</a>, diff;
<a name="l00685"></a>00685         Iterator1 last = a + <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>;
<a name="l00686"></a>00686 
<a name="l00687"></a>00687         <span class="keywordflow">while</span> (a &lt; last) {
<a name="l00688"></a>00688             sum = (<a class="code" href="structcvflann_1_1_chi_square_distance.html#a5a4ba72245b30ed720d856bbd3530478">ResultType</a>)(*a + *b);
<a name="l00689"></a>00689             <span class="keywordflow">if</span> (sum&gt;0) {
<a name="l00690"></a>00690                 diff = (<a class="code" href="structcvflann_1_1_chi_square_distance.html#a5a4ba72245b30ed720d856bbd3530478">ResultType</a>)(*a - *b);
<a name="l00691"></a>00691                 result += diff*diff/<a class="code" href="namespacecv.html#aa012757b1a6536a1a3ef813a0aba1c1e">sum</a>;
<a name="l00692"></a>00692             }
<a name="l00693"></a>00693             ++<a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>;
<a name="l00694"></a>00694             ++<a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>;
<a name="l00695"></a>00695 
<a name="l00696"></a>00696             <span class="keywordflow">if</span> ((worst_dist&gt;0)&amp;&amp;(result&gt;worst_dist)) {
<a name="l00697"></a>00697                 <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l00698"></a>00698             }
<a name="l00699"></a>00699         }
<a name="l00700"></a>00700         <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l00701"></a>00701     }
<a name="l00702"></a>00702 
<a name="l00706"></a>00706     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U, <span class="keyword">typename</span> V&gt;
<a name="l00707"></a><a class="code" href="structcvflann_1_1_chi_square_distance.html#abc1b7ed780a8dad2b7d6a6984b466ce0">00707</a>     <span class="keyword">inline</span> <a class="code" href="structcvflann_1_1_chi_square_distance.html#a5a4ba72245b30ed720d856bbd3530478">ResultType</a> <a class="code" href="structcvflann_1_1_chi_square_distance.html#abc1b7ed780a8dad2b7d6a6984b466ce0">accum_dist</a>(<span class="keyword">const</span> <a class="code" href="core__c_8h.html#aa9c521f41af9a5191e5e4b6ffbae211a">U</a>&amp; <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, <span class="keyword">const</span> <a class="code" href="core__c_8h.html#ad8dd4fff0e3910932187b6de0543cae1">V</a>&amp; <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">int</span>)<span class="keyword"> const</span>
<a name="l00708"></a>00708 <span class="keyword">    </span>{
<a name="l00709"></a>00709         <a class="code" href="structcvflann_1_1_chi_square_distance.html#a5a4ba72245b30ed720d856bbd3530478">ResultType</a> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a> = <a class="code" href="structcvflann_1_1_chi_square_distance.html#a5a4ba72245b30ed720d856bbd3530478">ResultType</a>();
<a name="l00710"></a>00710         <a class="code" href="structcvflann_1_1_chi_square_distance.html#a5a4ba72245b30ed720d856bbd3530478">ResultType</a> <a class="code" href="namespacecv.html#aa012757b1a6536a1a3ef813a0aba1c1e">sum</a>, diff;
<a name="l00711"></a>00711 
<a name="l00712"></a>00712         sum = (<a class="code" href="structcvflann_1_1_chi_square_distance.html#a5a4ba72245b30ed720d856bbd3530478">ResultType</a>)(a+b);
<a name="l00713"></a>00713         <span class="keywordflow">if</span> (sum&gt;0) {
<a name="l00714"></a>00714             diff = (<a class="code" href="structcvflann_1_1_chi_square_distance.html#a5a4ba72245b30ed720d856bbd3530478">ResultType</a>)(a-b);
<a name="l00715"></a>00715             result = diff*diff/<a class="code" href="namespacecv.html#aa012757b1a6536a1a3ef813a0aba1c1e">sum</a>;
<a name="l00716"></a>00716         }
<a name="l00717"></a>00717         <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l00718"></a>00718     }
<a name="l00719"></a>00719 };
<a name="l00720"></a>00720 
<a name="l00721"></a>00721 
<a name="l00722"></a>00722 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00723"></a><a class="code" href="structcvflann_1_1_k_l___divergence.html">00723</a> <span class="keyword">struct </span><a class="code" href="structcvflann_1_1_k_l___divergence.html">KL_Divergence</a>
<a name="l00724"></a>00724 {
<a name="l00725"></a><a class="code" href="structcvflann_1_1_k_l___divergence.html#a76ae60a1f10787287d1cdf58bb1f2837">00725</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_true.html">True</a> <a class="code" href="structcvflann_1_1_k_l___divergence.html#a76ae60a1f10787287d1cdf58bb1f2837">is_kdtree_distance</a>;
<a name="l00726"></a><a class="code" href="structcvflann_1_1_k_l___divergence.html#a97aacbeceba731095e7b303fa9a2d60b">00726</a>     <span class="keyword">typedef</span> <a class="code" href="classcvflann_1_1_true.html">True</a> <a class="code" href="structcvflann_1_1_k_l___divergence.html#a97aacbeceba731095e7b303fa9a2d60b">is_vector_space_distance</a>;
<a name="l00727"></a>00727 
<a name="l00728"></a><a class="code" href="structcvflann_1_1_k_l___divergence.html#abd41c2b26ab04092a777edbc538f13b7">00728</a>     <span class="keyword">typedef</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="structcvflann_1_1_k_l___divergence.html#abd41c2b26ab04092a777edbc538f13b7">ElementType</a>;
<a name="l00729"></a><a class="code" href="structcvflann_1_1_k_l___divergence.html#adc6bd17c29d9bc0ecea2210dbc47b91a">00729</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structcvflann_1_1_accumulator.html#a9ce42bd623dc4709621e5aadeed80051">Accumulator&lt;T&gt;::Type</a> <a class="code" href="structcvflann_1_1_k_l___divergence.html#adc6bd17c29d9bc0ecea2210dbc47b91a">ResultType</a>;
<a name="l00730"></a>00730 
<a name="l00734"></a>00734     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Iterator1, <span class="keyword">typename</span> Iterator2&gt;
<a name="l00735"></a><a class="code" href="structcvflann_1_1_k_l___divergence.html#aa0dd99b5214df02d94f068f292415558">00735</a>     <a class="code" href="structcvflann_1_1_k_l___divergence.html#adc6bd17c29d9bc0ecea2210dbc47b91a">ResultType</a> <a class="code" href="structcvflann_1_1_k_l___divergence.html#aa0dd99b5214df02d94f068f292415558">operator()</a>(Iterator1 <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, Iterator2 <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">size_t</span> <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>, <a class="code" href="structcvflann_1_1_k_l___divergence.html#adc6bd17c29d9bc0ecea2210dbc47b91a">ResultType</a> worst_dist = -1)<span class="keyword"> const</span>
<a name="l00736"></a>00736 <span class="keyword">    </span>{
<a name="l00737"></a>00737         <a class="code" href="structcvflann_1_1_k_l___divergence.html#adc6bd17c29d9bc0ecea2210dbc47b91a">ResultType</a> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a> = <a class="code" href="structcvflann_1_1_k_l___divergence.html#adc6bd17c29d9bc0ecea2210dbc47b91a">ResultType</a>();
<a name="l00738"></a>00738         Iterator1 last = a + <a class="code" href="calib3d_8hpp.html#ae97003f8d5c64cdfb99f6f2606d121b6">size</a>;
<a name="l00739"></a>00739 
<a name="l00740"></a>00740         <span class="keywordflow">while</span> (a &lt; last) {
<a name="l00741"></a>00741             <span class="keywordflow">if</span> (* a != 0) {
<a name="l00742"></a>00742                 <a class="code" href="structcvflann_1_1_k_l___divergence.html#adc6bd17c29d9bc0ecea2210dbc47b91a">ResultType</a> ratio = (<a class="code" href="structcvflann_1_1_k_l___divergence.html#adc6bd17c29d9bc0ecea2210dbc47b91a">ResultType</a>)(*a / *b);
<a name="l00743"></a>00743                 <span class="keywordflow">if</span> (ratio&gt;0) {
<a name="l00744"></a>00744                     result += *a * <a class="code" href="namespacecv.html#ac819f3eb1922fc6dd0cee5b8cfbdb952" title="computes natural logarithm of absolute value of each matrix element: dst = log(abs(src))">log</a>(ratio);
<a name="l00745"></a>00745                 }
<a name="l00746"></a>00746             }
<a name="l00747"></a>00747             ++<a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>;
<a name="l00748"></a>00748             ++<a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>;
<a name="l00749"></a>00749 
<a name="l00750"></a>00750             <span class="keywordflow">if</span> ((worst_dist&gt;0)&amp;&amp;(result&gt;worst_dist)) {
<a name="l00751"></a>00751                 <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l00752"></a>00752             }
<a name="l00753"></a>00753         }
<a name="l00754"></a>00754         <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l00755"></a>00755     }
<a name="l00756"></a>00756 
<a name="l00760"></a>00760     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U, <span class="keyword">typename</span> V&gt;
<a name="l00761"></a><a class="code" href="structcvflann_1_1_k_l___divergence.html#a6e0ca97fdc7b60bceb0caefa2b21a214">00761</a>     <span class="keyword">inline</span> <a class="code" href="structcvflann_1_1_k_l___divergence.html#adc6bd17c29d9bc0ecea2210dbc47b91a">ResultType</a> <a class="code" href="structcvflann_1_1_k_l___divergence.html#a6e0ca97fdc7b60bceb0caefa2b21a214">accum_dist</a>(<span class="keyword">const</span> <a class="code" href="core__c_8h.html#aa9c521f41af9a5191e5e4b6ffbae211a">U</a>&amp; <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a>, <span class="keyword">const</span> <a class="code" href="core__c_8h.html#ad8dd4fff0e3910932187b6de0543cae1">V</a>&amp; <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, <span class="keywordtype">int</span>)<span class="keyword"> const</span>
<a name="l00762"></a>00762 <span class="keyword">    </span>{
<a name="l00763"></a>00763         <a class="code" href="structcvflann_1_1_k_l___divergence.html#adc6bd17c29d9bc0ecea2210dbc47b91a">ResultType</a> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a> = <a class="code" href="structcvflann_1_1_k_l___divergence.html#adc6bd17c29d9bc0ecea2210dbc47b91a">ResultType</a>();
<a name="l00764"></a>00764         <a class="code" href="structcvflann_1_1_k_l___divergence.html#adc6bd17c29d9bc0ecea2210dbc47b91a">ResultType</a> ratio = (<a class="code" href="structcvflann_1_1_k_l___divergence.html#adc6bd17c29d9bc0ecea2210dbc47b91a">ResultType</a>)(a / b);
<a name="l00765"></a>00765         <span class="keywordflow">if</span> (ratio&gt;0) {
<a name="l00766"></a>00766             result = a * <a class="code" href="namespacecv.html#ac819f3eb1922fc6dd0cee5b8cfbdb952" title="computes natural logarithm of absolute value of each matrix element: dst = log(abs(src))">log</a>(ratio);
<a name="l00767"></a>00767         }
<a name="l00768"></a>00768         <span class="keywordflow">return</span> <a class="code" href="core__c_8h.html#a14871c176a686a03035b5f2bbc72a63f">result</a>;
<a name="l00769"></a>00769     }
<a name="l00770"></a>00770 };
<a name="l00771"></a>00771 
<a name="l00772"></a>00772 
<a name="l00773"></a>00773 
<a name="l00774"></a>00774 <span class="comment">/*</span>
<a name="l00775"></a>00775 <span class="comment"> * This is a &quot;zero iterator&quot;. It basically behaves like a zero filled</span>
<a name="l00776"></a>00776 <span class="comment"> * array to all algorithms that use arrays as iterators (STL style).</span>
<a name="l00777"></a>00777 <span class="comment"> * It&#39;s useful when there&#39;s a need to compute the distance between feature</span>
<a name="l00778"></a>00778 <span class="comment"> * and origin it and allows for better compiler optimisation than using a</span>
<a name="l00779"></a>00779 <span class="comment"> * zero-filled array.</span>
<a name="l00780"></a>00780 <span class="comment"> */</span>
<a name="l00781"></a>00781 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00782"></a><a class="code" href="structcvflann_1_1_zero_iterator.html">00782</a> <span class="keyword">struct </span><a class="code" href="structcvflann_1_1_zero_iterator.html">ZeroIterator</a>
<a name="l00783"></a>00783 {
<a name="l00784"></a>00784 
<a name="l00785"></a><a class="code" href="structcvflann_1_1_zero_iterator.html#a7113f1adf6886a4633edc804070a35f2">00785</a>     <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="structcvflann_1_1_zero_iterator.html#a7113f1adf6886a4633edc804070a35f2">operator*</a>()
<a name="l00786"></a>00786     {
<a name="l00787"></a>00787         <span class="keywordflow">return</span> 0;
<a name="l00788"></a>00788     }
<a name="l00789"></a>00789 
<a name="l00790"></a><a class="code" href="structcvflann_1_1_zero_iterator.html#aea021b9f2244dda72201d27ea91636bd">00790</a>     <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="structcvflann_1_1_zero_iterator.html#aea021b9f2244dda72201d27ea91636bd">operator[]</a>(<span class="keywordtype">int</span>)
<a name="l00791"></a>00791     {
<a name="l00792"></a>00792         <span class="keywordflow">return</span> 0;
<a name="l00793"></a>00793     }
<a name="l00794"></a>00794 
<a name="l00795"></a><a class="code" href="structcvflann_1_1_zero_iterator.html#a91e8578dedf4fc81033112e1a466af1a">00795</a>     <span class="keyword">const</span> <a class="code" href="structcvflann_1_1_zero_iterator.html">ZeroIterator&lt;T&gt;</a>&amp; <a class="code" href="structcvflann_1_1_zero_iterator.html#a91e8578dedf4fc81033112e1a466af1a">operator ++</a>()
<a name="l00796"></a>00796     {
<a name="l00797"></a>00797         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00798"></a>00798     }
<a name="l00799"></a>00799 
<a name="l00800"></a><a class="code" href="structcvflann_1_1_zero_iterator.html#a7c647a9b155b2a08c9708af0f2a560b6">00800</a>     <a class="code" href="structcvflann_1_1_zero_iterator.html">ZeroIterator&lt;T&gt;</a> <a class="code" href="structcvflann_1_1_zero_iterator.html#a91e8578dedf4fc81033112e1a466af1a">operator ++</a>(<span class="keywordtype">int</span>)
<a name="l00801"></a>00801     {
<a name="l00802"></a>00802         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00803"></a>00803     }
<a name="l00804"></a>00804 
<a name="l00805"></a><a class="code" href="structcvflann_1_1_zero_iterator.html#a2316ee66a8114d553931ea6cba0f0da9">00805</a>     <a class="code" href="structcvflann_1_1_zero_iterator.html">ZeroIterator&lt;T&gt;</a>&amp; <a class="code" href="structcvflann_1_1_zero_iterator.html#a2316ee66a8114d553931ea6cba0f0da9">operator+=</a>(<span class="keywordtype">int</span>)
<a name="l00806"></a>00806     {
<a name="l00807"></a>00807         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00808"></a>00808     }
<a name="l00809"></a>00809 
<a name="l00810"></a>00810 };
<a name="l00811"></a>00811 
<a name="l00812"></a>00812 }
<a name="l00813"></a>00813 
<a name="l00814"></a>00814 <span class="preprocessor">#endif //OPENCV_FLANN_DIST_H_</span>
</pre></div></div><!-- contents -->
	<div class="footer">
		<p> </p>
	</div>
</div>	
</body>
</html>
