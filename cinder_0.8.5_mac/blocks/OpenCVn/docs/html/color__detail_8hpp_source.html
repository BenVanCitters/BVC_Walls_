<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>Cinder</title>
		<link rel="stylesheet" href="cinder_doxygen.css" type="text/css" media="screen" />
	</head>
<body>	
<div class="wrapper">
	<div id="header">
		<h1><a href="http://libcinder.org">Cinder</a></h1>
	</div>

<!-- Generated by Doxygen 1.8.0 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">include/opencv2/gpu/device/detail/color_detail.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="color__detail_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*M///////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00002"></a>00002 <span class="comment">//</span>
<a name="l00003"></a>00003 <span class="comment">//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.</span>
<a name="l00004"></a>00004 <span class="comment">//</span>
<a name="l00005"></a>00005 <span class="comment">//  By downloading, copying, installing or using the software you agree to this license.</span>
<a name="l00006"></a>00006 <span class="comment">//  If you do not agree to this license, do not download, install,</span>
<a name="l00007"></a>00007 <span class="comment">//  copy or use the software.</span>
<a name="l00008"></a>00008 <span class="comment">//</span>
<a name="l00009"></a>00009 <span class="comment">//</span>
<a name="l00010"></a>00010 <span class="comment">//                           License Agreement</span>
<a name="l00011"></a>00011 <span class="comment">//                For Open Source Computer Vision Library</span>
<a name="l00012"></a>00012 <span class="comment">//</span>
<a name="l00013"></a>00013 <span class="comment">// Copyright (C) 2000-2008, Intel Corporation, all rights reserved.</span>
<a name="l00014"></a>00014 <span class="comment">// Copyright (C) 2009, Willow Garage Inc., all rights reserved.</span>
<a name="l00015"></a>00015 <span class="comment">// Third party copyrights are property of their respective owners.</span>
<a name="l00016"></a>00016 <span class="comment">//</span>
<a name="l00017"></a>00017 <span class="comment">// Redistribution and use in source and binary forms, with or without modification,</span>
<a name="l00018"></a>00018 <span class="comment">// are permitted provided that the following conditions are met:</span>
<a name="l00019"></a>00019 <span class="comment">//</span>
<a name="l00020"></a>00020 <span class="comment">//   * Redistribution&#39;s of source code must retain the above copyright notice,</span>
<a name="l00021"></a>00021 <span class="comment">//     this list of conditions and the following disclaimer.</span>
<a name="l00022"></a>00022 <span class="comment">//</span>
<a name="l00023"></a>00023 <span class="comment">//   * Redistribution&#39;s in binary form must reproduce the above copyright notice,</span>
<a name="l00024"></a>00024 <span class="comment">//     this list of conditions and the following disclaimer in the documentation</span>
<a name="l00025"></a>00025 <span class="comment">//     and/or other materials provided with the distribution.</span>
<a name="l00026"></a>00026 <span class="comment">//</span>
<a name="l00027"></a>00027 <span class="comment">//   * The name of the copyright holders may not be used to endorse or promote products</span>
<a name="l00028"></a>00028 <span class="comment">//     derived from this software without specific prior written permission.</span>
<a name="l00029"></a>00029 <span class="comment">//</span>
<a name="l00030"></a>00030 <span class="comment">// This software is provided by the copyright holders and contributors &quot;as is&quot; and</span>
<a name="l00031"></a>00031 <span class="comment">// any express or bpied warranties, including, but not limited to, the bpied</span>
<a name="l00032"></a>00032 <span class="comment">// warranties of merchantability and fitness for a particular purpose are disclaimed.</span>
<a name="l00033"></a>00033 <span class="comment">// In no event shall the Intel Corporation or contributors be liable for any direct,</span>
<a name="l00034"></a>00034 <span class="comment">// indirect, incidental, special, exemplary, or consequential damages</span>
<a name="l00035"></a>00035 <span class="comment">// (including, but not limited to, procurement of substitute goods or services;</span>
<a name="l00036"></a>00036 <span class="comment">// loss of use, data, or profits; or business interruption) however caused</span>
<a name="l00037"></a>00037 <span class="comment">// and on any theory of liability, whether in contract, strict liability,</span>
<a name="l00038"></a>00038 <span class="comment">// or tort (including negligence or otherwise) arising in any way out of</span>
<a name="l00039"></a>00039 <span class="comment">// the use of this software, even if advised of the possibility of such damage.</span>
<a name="l00040"></a>00040 <span class="comment">//</span>
<a name="l00041"></a>00041 <span class="comment">//M*/</span>
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="preprocessor">#ifndef __OPENCV_GPU_COLOR_DETAIL_HPP__</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span><span class="preprocessor">#define __OPENCV_GPU_COLOR_DETAIL_HPP__</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;../common.hpp&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;../vec_traits.hpp&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;../saturate_cast.hpp&quot;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;../limits.hpp&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;../functional.hpp&quot;</span>
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 <span class="keyword">namespace </span>cv { <span class="keyword">namespace </span>gpu { <span class="keyword">namespace </span>device
<a name="l00053"></a>00053 {
<a name="l00054"></a>00054 <span class="preprocessor">    #ifndef CV_DESCALE</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span><span class="preprocessor">        #define CV_DESCALE(x, n) (((x) + (1 &lt;&lt; ((n)-1))) &gt;&gt; (n))</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span><span class="preprocessor">    #endif</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span>
<a name="l00058"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html">00058</a>     <span class="keyword">namespace </span>color_detail
<a name="l00059"></a>00059     {
<a name="l00060"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html">00060</a>         <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html">ColorChannel</a>
<a name="l00061"></a>00061         {
<a name="l00062"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html#a8cbd448b4932dfdd0192013c78112e19">00062</a>             <span class="keyword">typedef</span> <span class="keywordtype">float</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html#a8cbd448b4932dfdd0192013c78112e19">worktype_f</a>;
<a name="l00063"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html#aedd738fa8d5f922cb3dffcb3fe005b7d">00063</a>             <span class="keyword">static</span> __device__ __forceinline__ <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html#aedd738fa8d5f922cb3dffcb3fe005b7d">max</a>() { <span class="keywordflow">return</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html#aedd738fa8d5f922cb3dffcb3fe005b7d">numeric_limits&lt;T&gt;::max</a>(); }
<a name="l00064"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html#ad020f174d41d85e13cac35a75582b7ee">00064</a>             <span class="keyword">static</span> __device__ __forceinline__ <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html#ad020f174d41d85e13cac35a75582b7ee">half</a>() { <span class="keywordflow">return</span> (<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>)(<a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html#aedd738fa8d5f922cb3dffcb3fe005b7d">max</a>()/2 + 1); }
<a name="l00065"></a>00065         };
<a name="l00066"></a>00066 
<a name="l00067"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel_3_01float_01_4.html">00067</a>         <span class="keyword">template</span>&lt;&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html">ColorChannel</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a977e2629b1ece7a2a2d4b2cc8bc47089">float</a>&gt;
<a name="l00068"></a>00068         {
<a name="l00069"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel_3_01float_01_4.html#ab5166955a676285adf53eeb416c194fa">00069</a>             <span class="keyword">typedef</span> <span class="keywordtype">float</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel_3_01float_01_4.html#ab5166955a676285adf53eeb416c194fa">worktype_f</a>;
<a name="l00070"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel_3_01float_01_4.html#a143e14a7fc61ea5f2d7f49143cdd5d34">00070</a>             <span class="keyword">static</span> __device__ __forceinline__ <span class="keywordtype">float</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel_3_01float_01_4.html#a143e14a7fc61ea5f2d7f49143cdd5d34">max</a>() { <span class="keywordflow">return</span> 1.f; }
<a name="l00071"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel_3_01float_01_4.html#a5326d7bb9cabfee3753845da60757051">00071</a>             <span class="keyword">static</span> __device__ __forceinline__ <span class="keywordtype">float</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel_3_01float_01_4.html#a5326d7bb9cabfee3753845da60757051">half</a>() { <span class="keywordflow">return</span> 0.5f; }
<a name="l00072"></a>00072         };
<a name="l00073"></a>00073 
<a name="l00074"></a>00074         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">static</span> __device__ __forceinline__ <span class="keywordtype">void</span> setAlpha(<span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, 3&gt;::vec_type</a>&amp; vec, <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> val)
<a name="l00075"></a>00075         {
<a name="l00076"></a>00076         }
<a name="l00077"></a>00077 
<a name="l00078"></a>00078         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">static</span> __device__ __forceinline__ <span class="keywordtype">void</span> setAlpha(<span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, 4&gt;::vec_type</a>&amp; vec, <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> val)
<a name="l00079"></a>00079         {
<a name="l00080"></a>00080             vec.w = val;
<a name="l00081"></a>00081         }
<a name="l00082"></a>00082 
<a name="l00083"></a>00083         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">static</span> __device__ __forceinline__ <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> getAlpha(<span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, 3&gt;::vec_type</a>&amp; vec)
<a name="l00084"></a>00084         {
<a name="l00085"></a>00085             <span class="keywordflow">return</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html#aedd738fa8d5f922cb3dffcb3fe005b7d">ColorChannel&lt;T&gt;::max</a>();
<a name="l00086"></a>00086         }
<a name="l00087"></a>00087 
<a name="l00088"></a>00088         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">static</span> __device__ __forceinline__ <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> getAlpha(<span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, 4&gt;::vec_type</a>&amp; vec)
<a name="l00089"></a>00089         {
<a name="l00090"></a>00090             <span class="keywordflow">return</span> vec.w;
<a name="l00091"></a>00091         }
<a name="l00092"></a>00092 
<a name="l00093"></a>00093         <span class="keyword">enum</span>
<a name="l00094"></a>00094         {
<a name="l00095"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">00095</a>             <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>  = 14,
<a name="l00096"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1bc1de396e04ee0ae780e6abf3333b96">00096</a>             <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1bc1de396e04ee0ae780e6abf3333b96">xyz_shift</a>  = 12,
<a name="l00097"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570ad9cfd5ce6f8a65d50a1009d31ec5b27f">00097</a>             <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570ad9cfd5ce6f8a65d50a1009d31ec5b27f">R2Y</a>        = 4899,
<a name="l00098"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570aa29ed213682a1a97cc5fcc96decf0ad7">00098</a>             <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570aa29ed213682a1a97cc5fcc96decf0ad7">G2Y</a>        = 9617,
<a name="l00099"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a012d3fbd135db816dc4aa715157d30e9">00099</a>             <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a012d3fbd135db816dc4aa715157d30e9">B2Y</a>        = 1868,
<a name="l00100"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570aca9d98d005c3c383a0ee13ce5216d3a7">00100</a>             <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570aca9d98d005c3c383a0ee13ce5216d3a7">BLOCK_SIZE</a> = 256
<a name="l00101"></a>00101         };
<a name="l00102"></a>00102     }
<a name="l00103"></a>00103 
<a name="l00105"></a>00105 
<a name="l00106"></a>00106     <span class="keyword">namespace </span>color_detail
<a name="l00107"></a>00107     {
<a name="l00108"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b.html">00108</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keywordtype">int</span> scn, <span class="keywordtype">int</span> dcn, <span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b.html">RGB2RGB</a>
<a name="l00109"></a>00109             : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;T, scn&gt;::vec_type, typename TypeVec&lt;T, dcn&gt;::vec_type&gt;
<a name="l00110"></a>00110         {
<a name="l00111"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b.html#a8852b6063e82827f8793fa42b06c9a68">00111</a>             __device__ <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b.html#a8852b6063e82827f8793fa42b06c9a68">operator()</a>(<span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, scn&gt;::vec_type</a>&amp; <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>)<span class="keyword"> const</span>
<a name="l00112"></a>00112 <span class="keyword">            </span>{
<a name="l00113"></a>00113                 <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00114"></a>00114 
<a name="l00115"></a>00115                 dst.x = (&amp;src.x)[bidx];
<a name="l00116"></a>00116                 dst.y = src.y;
<a name="l00117"></a>00117                 dst.z = (&amp;src.x)[bidx^2];
<a name="l00118"></a>00118                 setAlpha(dst, getAlpha&lt;T&gt;(src));
<a name="l00119"></a>00119 
<a name="l00120"></a>00120                 <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00121"></a>00121             }
<a name="l00122"></a>00122 
<a name="l00123"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b.html#a10ddcc7381557b3c53219f5624d2477b">00123</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b.html#a10ddcc7381557b3c53219f5624d2477b">RGB2RGB</a>()
<a name="l00124"></a>00124                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l00125"></a>00125 
<a name="l00126"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b.html#a39a3bba9eafe2fdc2a3b67555b774f68">00126</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b.html#a10ddcc7381557b3c53219f5624d2477b">RGB2RGB</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b.html">RGB2RGB</a>&amp; other_)
<a name="l00127"></a>00127                 :<a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l00128"></a>00128         };
<a name="l00129"></a>00129 
<a name="l00130"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b_3_01uchar_00_014_00_014_00_012_01_4.html">00130</a>         <span class="keyword">template</span> &lt;&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b.html">RGB2RGB</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>, 4, 4, 2&gt; : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;uint, uint&gt;
<a name="l00131"></a>00131         {
<a name="l00132"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b_3_01uchar_00_014_00_014_00_012_01_4.html#a49a7d6d6498da1c470db814cc84fc23d">00132</a>             __device__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b.html#a8852b6063e82827f8793fa42b06c9a68">operator()</a>(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>)<span class="keyword"> const</span>
<a name="l00133"></a>00133 <span class="keyword">            </span>{
<a name="l00134"></a>00134                 <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a> = 0;
<a name="l00135"></a>00135 
<a name="l00136"></a>00136                 dst |= (0xffu &amp; (src &gt;&gt; 16));
<a name="l00137"></a>00137                 dst |= (0xffu &amp; (src &gt;&gt; 8)) &lt;&lt; 8;
<a name="l00138"></a>00138                 dst |= (0xffu &amp; (<a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>)) &lt;&lt; 16;
<a name="l00139"></a>00139                 dst |= (0xffu &amp; (src &gt;&gt; 24)) &lt;&lt; 24;
<a name="l00140"></a>00140 
<a name="l00141"></a>00141                 <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00142"></a>00142             }
<a name="l00143"></a>00143 
<a name="l00144"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b_3_01uchar_00_014_00_014_00_012_01_4.html#a26e85d0192dc1561b8911b7ddcc0785b">00144</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b_3_01uchar_00_014_00_014_00_012_01_4.html#a26e85d0192dc1561b8911b7ddcc0785b">RGB2RGB</a>():<a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l00145"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b_3_01uchar_00_014_00_014_00_012_01_4.html#aa792c6bc6f1145581b484584d8293f6e">00145</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b_3_01uchar_00_014_00_014_00_012_01_4.html#aa792c6bc6f1145581b484584d8293f6e">RGB2RGB</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b.html">RGB2RGB</a>&amp; other_):<a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l00146"></a>00146         };
<a name="l00147"></a>00147     }
<a name="l00148"></a>00148 
<a name="l00149"></a>00149 <span class="preprocessor">#define OPENCV_GPU_IMPLEMENT_RGB2RGB_TRAITS(name, scn, dcn, bidx) \</span>
<a name="l00150"></a>00150 <span class="preprocessor">    template &lt;typename T&gt; struct name ## _traits \</span>
<a name="l00151"></a>00151 <span class="preprocessor">    { \</span>
<a name="l00152"></a>00152 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::RGB2RGB&lt;T, scn, dcn, bidx&gt; functor_type; \</span>
<a name="l00153"></a>00153 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l00154"></a>00154 <span class="preprocessor">        { \</span>
<a name="l00155"></a>00155 <span class="preprocessor">            return functor_type(); \</span>
<a name="l00156"></a>00156 <span class="preprocessor">        } \</span>
<a name="l00157"></a>00157 <span class="preprocessor">    };</span>
<a name="l00158"></a>00158 <span class="preprocessor"></span>
<a name="l00160"></a>00160 
<a name="l00161"></a>00161     <span class="keyword">namespace </span>color_detail
<a name="l00162"></a>00162     {
<a name="l00163"></a>00163         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> green_bits, <span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">struct </span>RGB2RGB5x5Converter;
<a name="l00164"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b5x5_converter_3_016_00_01bidx_01_4.html">00164</a>         <span class="keyword">template</span>&lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">struct </span>RGB2RGB5x5Converter&lt;6, bidx&gt;
<a name="l00165"></a>00165         {
<a name="l00166"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b5x5_converter_3_016_00_01bidx_01_4.html#a299da32f39b1b2e87c646daee441efad">00166</a>             <span class="keyword">static</span> __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a> cvt(<span class="keyword">const</span> uchar3&amp; <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>)
<a name="l00167"></a>00167             {
<a name="l00168"></a>00168                 <span class="keywordflow">return</span> (<a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a>)(((&amp;src.x)[bidx] &gt;&gt; 3) | ((src.y &amp; ~3) &lt;&lt; 3) | (((&amp;src.x)[bidx^2] &amp; ~7) &lt;&lt; 8));
<a name="l00169"></a>00169             }
<a name="l00170"></a>00170 
<a name="l00171"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b5x5_converter_3_016_00_01bidx_01_4.html#a8aa91bf158f1009481e24323a223a488">00171</a>             <span class="keyword">static</span> __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a> cvt(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>)
<a name="l00172"></a>00172             {
<a name="l00173"></a>00173                 <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a> = 0xffu &amp; (src &gt;&gt; (bidx * 8));
<a name="l00174"></a>00174                 <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> g = 0xffu &amp; (src &gt;&gt; 8);
<a name="l00175"></a>00175                 <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="core__c_8h.html#a54709f3b06b33b66763f1613cc7fb571">r</a> = 0xffu &amp; (src &gt;&gt; ((bidx ^ 2) * 8));
<a name="l00176"></a>00176                 <span class="keywordflow">return</span> (<a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a>)((b &gt;&gt; 3) | ((g &amp; ~3) &lt;&lt; 3) | ((r &amp; ~7) &lt;&lt; 8));
<a name="l00177"></a>00177             }
<a name="l00178"></a>00178         };
<a name="l00179"></a>00179 
<a name="l00180"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b5x5_converter_3_015_00_01bidx_01_4.html">00180</a>         <span class="keyword">template</span>&lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">struct </span>RGB2RGB5x5Converter&lt;5, bidx&gt;
<a name="l00181"></a>00181         {
<a name="l00182"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b5x5_converter_3_015_00_01bidx_01_4.html#aeab1bdccffb1bdda534143b2701e633b">00182</a>             <span class="keyword">static</span> __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a> cvt(<span class="keyword">const</span> uchar3&amp; <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>)
<a name="l00183"></a>00183             {
<a name="l00184"></a>00184                 <span class="keywordflow">return</span> (<a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a>)(((&amp;src.x)[bidx] &gt;&gt; 3) | ((src.y &amp; ~7) &lt;&lt; 2) | (((&amp;src.x)[bidx^2] &amp; ~7) &lt;&lt; 7));
<a name="l00185"></a>00185             }
<a name="l00186"></a>00186 
<a name="l00187"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b5x5_converter_3_015_00_01bidx_01_4.html#a8fc9d64e1103883f8c170bf846c73880">00187</a>             <span class="keyword">static</span> __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a> cvt(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>)
<a name="l00188"></a>00188             {
<a name="l00189"></a>00189                 <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a> = 0xffu &amp; (src &gt;&gt; (bidx * 8));
<a name="l00190"></a>00190                 <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> g = 0xffu &amp; (src &gt;&gt; 8);
<a name="l00191"></a>00191                 <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="core__c_8h.html#a54709f3b06b33b66763f1613cc7fb571">r</a> = 0xffu &amp; (src &gt;&gt; ((bidx ^ 2) * 8));
<a name="l00192"></a>00192                 <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="legacy_8hpp.html#a1031d0e0a97a340abfe0a6ab9e831045">a</a> = 0xffu &amp; (src &gt;&gt; 24);
<a name="l00193"></a>00193                 <span class="keywordflow">return</span> (<a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a>)((b &gt;&gt; 3) | ((g &amp; ~7) &lt;&lt; 2) | ((r &amp; ~7) &lt;&lt; 7) | (a * 0x8000));
<a name="l00194"></a>00194             }
<a name="l00195"></a>00195         };
<a name="l00196"></a>00196 
<a name="l00197"></a>00197         <span class="keyword">template</span>&lt;<span class="keywordtype">int</span> scn, <span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> green_bits&gt; <span class="keyword">struct </span>RGB2RGB5x5;
<a name="l00198"></a>00198 
<a name="l00199"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b5x5_3_013_00_01bidx_00_01green__bits_01_4.html">00199</a>         <span class="keyword">template</span>&lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> green_bits&gt; <span class="keyword">struct </span>RGB2RGB5x5&lt;3, bidx,green_bits&gt; : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;uchar3, ushort&gt;
<a name="l00200"></a>00200         {
<a name="l00201"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b5x5_3_013_00_01bidx_00_01green__bits_01_4.html#a5a0f324e8e2c5ada2e72c8b8e0a8b6fb">00201</a>             __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a> operator()(<span class="keyword">const</span> uchar3&amp; <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>)<span class="keyword"> const</span>
<a name="l00202"></a>00202 <span class="keyword">            </span>{
<a name="l00203"></a>00203                 <span class="keywordflow">return</span> RGB2RGB5x5Converter&lt;green_bits, bidx&gt;::cvt(src);
<a name="l00204"></a>00204             }
<a name="l00205"></a>00205 
<a name="l00206"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b5x5_3_013_00_01bidx_00_01green__bits_01_4.html#a4324b784d5e420774183a41c86c77104">00206</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b5x5_3_013_00_01bidx_00_01green__bits_01_4.html#a4324b784d5e420774183a41c86c77104">RGB2RGB5x5</a>():<a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;uchar3, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a>&gt;(){}
<a name="l00207"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b5x5_3_013_00_01bidx_00_01green__bits_01_4.html#af2429425ccb50a566747038e5b49474b">00207</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b5x5_3_013_00_01bidx_00_01green__bits_01_4.html#af2429425ccb50a566747038e5b49474b">RGB2RGB5x5</a>(<span class="keyword">const</span> RGB2RGB5x5&amp; other_):<a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;uchar3, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a>&gt;(){}
<a name="l00208"></a>00208         };
<a name="l00209"></a>00209 
<a name="l00210"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b5x5_3_014_00_01bidx_00_01green__bits_01_4.html">00210</a>         <span class="keyword">template</span>&lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> green_bits&gt; <span class="keyword">struct </span>RGB2RGB5x5&lt;4, bidx,green_bits&gt; : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;uint, ushort&gt;
<a name="l00211"></a>00211         {
<a name="l00212"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b5x5_3_014_00_01bidx_00_01green__bits_01_4.html#a91dbc84ef82ee7fe05acf8e8c694d851">00212</a>             __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a> operator()(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>)<span class="keyword"> const</span>
<a name="l00213"></a>00213 <span class="keyword">            </span>{
<a name="l00214"></a>00214                 <span class="keywordflow">return</span> RGB2RGB5x5Converter&lt;green_bits, bidx&gt;::cvt(src);
<a name="l00215"></a>00215             }
<a name="l00216"></a>00216 
<a name="l00217"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b5x5_3_014_00_01bidx_00_01green__bits_01_4.html#a5a0f1c6ac633a7599dc6ce85f54e5db4">00217</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b5x5_3_014_00_01bidx_00_01green__bits_01_4.html#a5a0f1c6ac633a7599dc6ce85f54e5db4">RGB2RGB5x5</a>():<a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a>&gt;(){}
<a name="l00218"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b5x5_3_014_00_01bidx_00_01green__bits_01_4.html#a03a5e7707df12ff7141392b858346fa0">00218</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_r_g_b5x5_3_014_00_01bidx_00_01green__bits_01_4.html#a03a5e7707df12ff7141392b858346fa0">RGB2RGB5x5</a>(<span class="keyword">const</span> RGB2RGB5x5&amp; other_):<a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a>&gt;(){}
<a name="l00219"></a>00219         };
<a name="l00220"></a>00220     }
<a name="l00221"></a>00221 
<a name="l00222"></a>00222 <span class="preprocessor">#define OPENCV_GPU_IMPLEMENT_RGB2RGB5x5_TRAITS(name, scn, bidx, green_bits) \</span>
<a name="l00223"></a>00223 <span class="preprocessor">    struct name ## _traits \</span>
<a name="l00224"></a>00224 <span class="preprocessor">    { \</span>
<a name="l00225"></a>00225 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::RGB2RGB5x5&lt;scn, bidx, green_bits&gt; functor_type; \</span>
<a name="l00226"></a>00226 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l00227"></a>00227 <span class="preprocessor">        { \</span>
<a name="l00228"></a>00228 <span class="preprocessor">            return functor_type(); \</span>
<a name="l00229"></a>00229 <span class="preprocessor">        } \</span>
<a name="l00230"></a>00230 <span class="preprocessor">    };</span>
<a name="l00231"></a>00231 <span class="preprocessor"></span>
<a name="l00232"></a>00232     <span class="keyword">namespace </span>color_detail
<a name="l00233"></a>00233     {
<a name="l00234"></a>00234         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> green_bits, <span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">struct </span>RGB5x52RGBConverter;
<a name="l00235"></a>00235 
<a name="l00236"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_r_g_b_converter_3_015_00_01bidx_01_4.html">00236</a>         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">struct </span>RGB5x52RGBConverter&lt;5, bidx&gt;
<a name="l00237"></a>00237         {
<a name="l00238"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_r_g_b_converter_3_015_00_01bidx_01_4.html#a7150d8547a319b7c9b93a473bd9f8d3b">00238</a>             <span class="keyword">static</span> __device__ __forceinline__ <span class="keywordtype">void</span> cvt(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>, uchar3&amp; <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>)
<a name="l00239"></a>00239             {
<a name="l00240"></a>00240                 (&amp;dst.x)[bidx] = src &lt;&lt; 3;
<a name="l00241"></a>00241                 dst.y = (src &gt;&gt; 2) &amp; ~7;
<a name="l00242"></a>00242                 (&amp;dst.x)[bidx ^ 2] = (src &gt;&gt; 7) &amp; ~7;
<a name="l00243"></a>00243             }
<a name="l00244"></a>00244 
<a name="l00245"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_r_g_b_converter_3_015_00_01bidx_01_4.html#a64023d7c1ee4110f124c906d9ea10ce4">00245</a>             <span class="keyword">static</span> __device__ __forceinline__ <span class="keywordtype">void</span> cvt(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&amp; <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>)
<a name="l00246"></a>00246             {
<a name="l00247"></a>00247                 dst = 0;
<a name="l00248"></a>00248 
<a name="l00249"></a>00249                 dst |= (0xffu &amp; (src &lt;&lt; 3)) &lt;&lt; (bidx * 8);
<a name="l00250"></a>00250                 dst |= (0xffu &amp; ((src &gt;&gt; 2) &amp; ~7)) &lt;&lt; 8;
<a name="l00251"></a>00251                 dst |= (0xffu &amp; ((src &gt;&gt; 7) &amp; ~7)) &lt;&lt; ((bidx ^ 2) * 8);
<a name="l00252"></a>00252                 dst |= ((src &amp; 0x8000) * 0xffu) &lt;&lt; 24;
<a name="l00253"></a>00253             }
<a name="l00254"></a>00254         };
<a name="l00255"></a>00255 
<a name="l00256"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_r_g_b_converter_3_016_00_01bidx_01_4.html">00256</a>         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">struct </span>RGB5x52RGBConverter&lt;6, bidx&gt;
<a name="l00257"></a>00257         {
<a name="l00258"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_r_g_b_converter_3_016_00_01bidx_01_4.html#a08b7d4931798c195139c528d21a8e51c">00258</a>             <span class="keyword">static</span> __device__ __forceinline__ <span class="keywordtype">void</span> cvt(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>, uchar3&amp; <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>)
<a name="l00259"></a>00259             {
<a name="l00260"></a>00260                 (&amp;dst.x)[bidx] = src &lt;&lt; 3;
<a name="l00261"></a>00261                 dst.y = (src &gt;&gt; 3) &amp; ~3;
<a name="l00262"></a>00262                 (&amp;dst.x)[bidx ^ 2] = (src &gt;&gt; 8) &amp; ~7;
<a name="l00263"></a>00263             }
<a name="l00264"></a>00264 
<a name="l00265"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_r_g_b_converter_3_016_00_01bidx_01_4.html#a8a0d9734c8c458870ae18c455dbd0765">00265</a>             <span class="keyword">static</span> __device__ __forceinline__ <span class="keywordtype">void</span> cvt(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&amp; <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>)
<a name="l00266"></a>00266             {
<a name="l00267"></a>00267                 dst = 0xffu &lt;&lt; 24;
<a name="l00268"></a>00268 
<a name="l00269"></a>00269                 dst |= (0xffu &amp; (src &lt;&lt; 3)) &lt;&lt; (bidx * 8);
<a name="l00270"></a>00270                 dst |= (0xffu &amp;((src &gt;&gt; 3) &amp; ~3)) &lt;&lt; 8;
<a name="l00271"></a>00271                 dst |= (0xffu &amp; ((src &gt;&gt; 8) &amp; ~7)) &lt;&lt; ((bidx ^ 2) * 8);
<a name="l00272"></a>00272             }
<a name="l00273"></a>00273         };
<a name="l00274"></a>00274 
<a name="l00275"></a>00275         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> dcn, <span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> green_bits&gt; <span class="keyword">struct </span>RGB5x52RGB;
<a name="l00276"></a>00276 
<a name="l00277"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_r_g_b_3_013_00_01bidx_00_01green__bits_01_4.html">00277</a>         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> green_bits&gt; <span class="keyword">struct </span>RGB5x52RGB&lt;3, bidx, green_bits&gt; : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;ushort, uchar3&gt;
<a name="l00278"></a>00278         {
<a name="l00279"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_r_g_b_3_013_00_01bidx_00_01green__bits_01_4.html#a54aac6a5891de59c566f5a7b7990d117">00279</a>             __device__ __forceinline__ uchar3 operator()(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a> <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>)<span class="keyword"> const</span>
<a name="l00280"></a>00280 <span class="keyword">            </span>{
<a name="l00281"></a>00281                 uchar3 <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00282"></a>00282                 RGB5x52RGBConverter&lt;green_bits, bidx&gt;::cvt(src, dst);
<a name="l00283"></a>00283                 <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00284"></a>00284             }
<a name="l00285"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_r_g_b_3_013_00_01bidx_00_01green__bits_01_4.html#a9dd65171ba0a1681218a9af71cf3f139">00285</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_r_g_b_3_013_00_01bidx_00_01green__bits_01_4.html#a9dd65171ba0a1681218a9af71cf3f139">RGB5x52RGB</a>():<a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a>, uchar3&gt;(){}
<a name="l00286"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_r_g_b_3_013_00_01bidx_00_01green__bits_01_4.html#ab7cf2d3117fab6caa7162a2cb0cc60cb">00286</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_r_g_b_3_013_00_01bidx_00_01green__bits_01_4.html#ab7cf2d3117fab6caa7162a2cb0cc60cb">RGB5x52RGB</a>(<span class="keyword">const</span> RGB5x52RGB&amp; other_):<a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a>, uchar3&gt;(){}
<a name="l00287"></a>00287 
<a name="l00288"></a>00288         };
<a name="l00289"></a>00289 
<a name="l00290"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_r_g_b_3_014_00_01bidx_00_01green__bits_01_4.html">00290</a>         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> green_bits&gt; <span class="keyword">struct </span>RGB5x52RGB&lt;4, bidx, green_bits&gt; : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;ushort, uint&gt;
<a name="l00291"></a>00291         {
<a name="l00292"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_r_g_b_3_014_00_01bidx_00_01green__bits_01_4.html#a816a5c6d39315b4e2bb585f4b2b85407">00292</a>             __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> operator()(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a> <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>)<span class="keyword"> const</span>
<a name="l00293"></a>00293 <span class="keyword">            </span>{
<a name="l00294"></a>00294                 <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00295"></a>00295                 RGB5x52RGBConverter&lt;green_bits, bidx&gt;::cvt(src, dst);
<a name="l00296"></a>00296                 <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00297"></a>00297             }
<a name="l00298"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_r_g_b_3_014_00_01bidx_00_01green__bits_01_4.html#a343dd87d62dc29b6dabd53962d2c6195">00298</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_r_g_b_3_014_00_01bidx_00_01green__bits_01_4.html#a343dd87d62dc29b6dabd53962d2c6195">RGB5x52RGB</a>():<a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l00299"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_r_g_b_3_014_00_01bidx_00_01green__bits_01_4.html#aade22a9dd6b2f9e6f87093778530142b">00299</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_r_g_b_3_014_00_01bidx_00_01green__bits_01_4.html#aade22a9dd6b2f9e6f87093778530142b">RGB5x52RGB</a>(<span class="keyword">const</span> RGB5x52RGB&amp; other_):<a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l00300"></a>00300         };
<a name="l00301"></a>00301     }
<a name="l00302"></a>00302 
<a name="l00303"></a>00303 <span class="preprocessor">#define OPENCV_GPU_IMPLEMENT_RGB5x52RGB_TRAITS(name, dcn, bidx, green_bits) \</span>
<a name="l00304"></a>00304 <span class="preprocessor">    struct name ## _traits \</span>
<a name="l00305"></a>00305 <span class="preprocessor">    { \</span>
<a name="l00306"></a>00306 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::RGB5x52RGB&lt;dcn, bidx, green_bits&gt; functor_type; \</span>
<a name="l00307"></a>00307 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l00308"></a>00308 <span class="preprocessor">        { \</span>
<a name="l00309"></a>00309 <span class="preprocessor">            return functor_type(); \</span>
<a name="l00310"></a>00310 <span class="preprocessor">        } \</span>
<a name="l00311"></a>00311 <span class="preprocessor">    };</span>
<a name="l00312"></a>00312 <span class="preprocessor"></span>
<a name="l00314"></a>00314 
<a name="l00315"></a>00315     <span class="keyword">namespace </span>color_detail
<a name="l00316"></a>00316     {
<a name="l00317"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b.html">00317</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keywordtype">int</span> dcn&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b.html">Gray2RGB</a> : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;T, typename TypeVec&lt;T, dcn&gt;::vec_type&gt;
<a name="l00318"></a>00318         {
<a name="l00319"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b.html#a84da6cd648326fdd84350d27662cdfe6">00319</a>             __device__ __forceinline__ <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b.html#a84da6cd648326fdd84350d27662cdfe6">operator()</a>(<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>)<span class="keyword"> const</span>
<a name="l00320"></a>00320 <span class="keyword">            </span>{
<a name="l00321"></a>00321                 <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00322"></a>00322 
<a name="l00323"></a>00323                 dst.z = dst.y = dst.x = <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>;
<a name="l00324"></a>00324                 setAlpha(dst, <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html">ColorChannel&lt;T&gt;::max</a>());
<a name="l00325"></a>00325 
<a name="l00326"></a>00326                 <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00327"></a>00327             }
<a name="l00328"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b.html#a32d6d863f4f58dc4fb95689abe83268b">00328</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b.html#a32d6d863f4f58dc4fb95689abe83268b">Gray2RGB</a>():<a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l00329"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b.html#a2c5970d0a32bd01a525a203f75d490ea">00329</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b.html#a32d6d863f4f58dc4fb95689abe83268b">Gray2RGB</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b.html">Gray2RGB</a>&amp; other_)
<a name="l00330"></a>00330                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l00331"></a>00331         };
<a name="l00332"></a>00332 
<a name="l00333"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b_3_01uchar_00_014_01_4.html">00333</a>         <span class="keyword">template</span> &lt;&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b.html">Gray2RGB</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>, 4&gt; : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;uchar, uint&gt;
<a name="l00334"></a>00334         {
<a name="l00335"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b_3_01uchar_00_014_01_4.html#a164b0ef323b5b800bdba2489fa62543b">00335</a>             __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b.html#a84da6cd648326fdd84350d27662cdfe6">operator()</a>(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>)<span class="keyword"> const</span>
<a name="l00336"></a>00336 <span class="keyword">            </span>{
<a name="l00337"></a>00337                 <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a> = 0xffu &lt;&lt; 24;
<a name="l00338"></a>00338 
<a name="l00339"></a>00339                 dst |= <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>;
<a name="l00340"></a>00340                 dst |= src &lt;&lt; 8;
<a name="l00341"></a>00341                 dst |= src &lt;&lt; 16;
<a name="l00342"></a>00342 
<a name="l00343"></a>00343                 <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00344"></a>00344             }
<a name="l00345"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b_3_01uchar_00_014_01_4.html#a1c0bdfcb0815b230c9f1772405460a77">00345</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b_3_01uchar_00_014_01_4.html#a1c0bdfcb0815b230c9f1772405460a77">Gray2RGB</a>():<a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l00346"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b_3_01uchar_00_014_01_4.html#ab3feda40f67e20a5e2e002be18e4ff09">00346</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b_3_01uchar_00_014_01_4.html#ab3feda40f67e20a5e2e002be18e4ff09">Gray2RGB</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b.html">Gray2RGB</a>&amp; other_):<a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l00347"></a>00347         };
<a name="l00348"></a>00348     }
<a name="l00349"></a>00349 
<a name="l00350"></a>00350 <span class="preprocessor">#define OPENCV_GPU_IMPLEMENT_GRAY2RGB_TRAITS(name, dcn) \</span>
<a name="l00351"></a>00351 <span class="preprocessor">    template &lt;typename T&gt; struct name ## _traits \</span>
<a name="l00352"></a>00352 <span class="preprocessor">    { \</span>
<a name="l00353"></a>00353 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::Gray2RGB&lt;T, dcn&gt; functor_type; \</span>
<a name="l00354"></a>00354 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l00355"></a>00355 <span class="preprocessor">        { \</span>
<a name="l00356"></a>00356 <span class="preprocessor">            return functor_type(); \</span>
<a name="l00357"></a>00357 <span class="preprocessor">        } \</span>
<a name="l00358"></a>00358 <span class="preprocessor">    };</span>
<a name="l00359"></a>00359 <span class="preprocessor"></span>
<a name="l00360"></a>00360     <span class="keyword">namespace </span>color_detail
<a name="l00361"></a>00361     {
<a name="l00362"></a>00362         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> green_bits&gt; <span class="keyword">struct </span>Gray2RGB5x5Converter;
<a name="l00363"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b5x5_converter_3_016_01_4.html">00363</a>         <span class="keyword">template</span>&lt;&gt; <span class="keyword">struct </span>Gray2RGB5x5Converter&lt;6&gt;
<a name="l00364"></a>00364         {
<a name="l00365"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b5x5_converter_3_016_01_4.html#afcda7a3a520ea9121c3dee37d557f7e6">00365</a>             <span class="keyword">static</span> __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a> cvt(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> t)
<a name="l00366"></a>00366             {
<a name="l00367"></a>00367                 <span class="keywordflow">return</span> (<a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a>)((t &gt;&gt; 3) | ((t &amp; ~3) &lt;&lt; 3) | ((t &amp; ~7) &lt;&lt; 8));
<a name="l00368"></a>00368             }
<a name="l00369"></a>00369         };
<a name="l00370"></a>00370 
<a name="l00371"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b5x5_converter_3_015_01_4.html">00371</a>         <span class="keyword">template</span>&lt;&gt; <span class="keyword">struct </span>Gray2RGB5x5Converter&lt;5&gt;
<a name="l00372"></a>00372         {
<a name="l00373"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b5x5_converter_3_015_01_4.html#af8ed6280e0de6fecda0a96030cf0056b">00373</a>             <span class="keyword">static</span> __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a> cvt(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> t)
<a name="l00374"></a>00374             {
<a name="l00375"></a>00375                 t &gt;&gt;= 3;
<a name="l00376"></a>00376                 <span class="keywordflow">return</span> (<a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a>)(t | (t &lt;&lt; 5) | (t &lt;&lt; 10));
<a name="l00377"></a>00377             }
<a name="l00378"></a>00378         };
<a name="l00379"></a>00379 
<a name="l00380"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b5x5.html">00380</a>         <span class="keyword">template</span>&lt;<span class="keywordtype">int</span> green_bits&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b5x5.html">Gray2RGB5x5</a> : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;uchar, ushort&gt;
<a name="l00381"></a>00381         {
<a name="l00382"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b5x5.html#aa6da0bfe8d0d28bf4967493923cb4aee">00382</a>             __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b5x5.html#aa6da0bfe8d0d28bf4967493923cb4aee">operator()</a>(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>)<span class="keyword"> const</span>
<a name="l00383"></a>00383 <span class="keyword">            </span>{
<a name="l00384"></a>00384                 <span class="keywordflow">return</span> Gray2RGB5x5Converter&lt;green_bits&gt;::cvt(src);
<a name="l00385"></a>00385             }
<a name="l00386"></a>00386 
<a name="l00387"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b5x5.html#a1734851e8a15dacc194e36b779e7aec3">00387</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b5x5.html#a1734851e8a15dacc194e36b779e7aec3">Gray2RGB5x5</a>():<a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a>&gt;(){}
<a name="l00388"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b5x5.html#a3fc4bf83f0056b1945a06df9d231cc13">00388</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b5x5.html#a3fc4bf83f0056b1945a06df9d231cc13">Gray2RGB5x5</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_gray2_r_g_b5x5.html">Gray2RGB5x5</a>&amp; other_):<a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a>&gt;(){}
<a name="l00389"></a>00389         };
<a name="l00390"></a>00390     }
<a name="l00391"></a>00391 
<a name="l00392"></a>00392 <span class="preprocessor">#define OPENCV_GPU_IMPLEMENT_GRAY2RGB5x5_TRAITS(name, green_bits) \</span>
<a name="l00393"></a>00393 <span class="preprocessor">    struct name ## _traits \</span>
<a name="l00394"></a>00394 <span class="preprocessor">    { \</span>
<a name="l00395"></a>00395 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::Gray2RGB5x5&lt;green_bits&gt; functor_type; \</span>
<a name="l00396"></a>00396 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l00397"></a>00397 <span class="preprocessor">        { \</span>
<a name="l00398"></a>00398 <span class="preprocessor">            return functor_type(); \</span>
<a name="l00399"></a>00399 <span class="preprocessor">        } \</span>
<a name="l00400"></a>00400 <span class="preprocessor">    };</span>
<a name="l00401"></a>00401 <span class="preprocessor"></span>
<a name="l00403"></a>00403 
<a name="l00404"></a>00404     <span class="keyword">namespace </span>color_detail
<a name="l00405"></a>00405     {
<a name="l00406"></a>00406         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> green_bits&gt; <span class="keyword">struct </span>RGB5x52GrayConverter;
<a name="l00407"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_gray_converter_3_016_01_4.html">00407</a>         <span class="keyword">template</span> &lt;&gt; <span class="keyword">struct </span>RGB5x52GrayConverter&lt;6&gt;
<a name="l00408"></a>00408         {
<a name="l00409"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_gray_converter_3_016_01_4.html#a80cea2c28df16547cd857435fa14f09f">00409</a>             <span class="keyword">static</span> __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a> cvt(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> t)
<a name="l00410"></a>00410             {
<a name="l00411"></a>00411                 <span class="keywordflow">return</span> (<a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>)CV_DESCALE(((t &lt;&lt; 3) &amp; 0xf8) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a012d3fbd135db816dc4aa715157d30e9">B2Y</a> + ((t &gt;&gt; 3) &amp; 0xfc) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570aa29ed213682a1a97cc5fcc96decf0ad7">G2Y</a> + ((t &gt;&gt; 8) &amp; 0xf8) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570ad9cfd5ce6f8a65d50a1009d31ec5b27f">R2Y</a>, <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00412"></a>00412             }
<a name="l00413"></a>00413         };
<a name="l00414"></a>00414 
<a name="l00415"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_gray_converter_3_015_01_4.html">00415</a>         <span class="keyword">template</span> &lt;&gt; <span class="keyword">struct </span>RGB5x52GrayConverter&lt;5&gt;
<a name="l00416"></a>00416         {
<a name="l00417"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_gray_converter_3_015_01_4.html#a4e220bd6e95c39b94a80f290ec2e8279">00417</a>             <span class="keyword">static</span> __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a> cvt(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> t)
<a name="l00418"></a>00418             {
<a name="l00419"></a>00419                 <span class="keywordflow">return</span> (<a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>)CV_DESCALE(((t &lt;&lt; 3) &amp; 0xf8) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a012d3fbd135db816dc4aa715157d30e9">B2Y</a> + ((t &gt;&gt; 2) &amp; 0xf8) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570aa29ed213682a1a97cc5fcc96decf0ad7">G2Y</a> + ((t &gt;&gt; 7) &amp; 0xf8) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570ad9cfd5ce6f8a65d50a1009d31ec5b27f">R2Y</a>, <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00420"></a>00420             }
<a name="l00421"></a>00421         };
<a name="l00422"></a>00422 
<a name="l00423"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_gray.html">00423</a>         <span class="keyword">template</span>&lt;<span class="keywordtype">int</span> green_bits&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_gray.html">RGB5x52Gray</a> : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;ushort, uchar&gt;
<a name="l00424"></a>00424         {
<a name="l00425"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_gray.html#aca7fb6c9975133880622156efe178d9b">00425</a>             __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_gray.html#aca7fb6c9975133880622156efe178d9b">operator()</a>(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>)<span class="keyword"> const</span>
<a name="l00426"></a>00426 <span class="keyword">            </span>{
<a name="l00427"></a>00427                 <span class="keywordflow">return</span> RGB5x52GrayConverter&lt;green_bits&gt;::cvt(src);
<a name="l00428"></a>00428             }
<a name="l00429"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_gray.html#a5ecf9f89067cde4193e912bde4c3736a">00429</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_gray.html#a5ecf9f89067cde4193e912bde4c3736a">RGB5x52Gray</a>() : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>&gt;(){}
<a name="l00430"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_gray.html#ade39f7c0d35ab9c33e40e0ef6d43a040">00430</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_gray.html#ade39f7c0d35ab9c33e40e0ef6d43a040">RGB5x52Gray</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b5x52_gray.html">RGB5x52Gray</a>&amp; other_) : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a1f100b5244cd0eaf4c9121cd10beeb56">ushort</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>&gt;(){}
<a name="l00431"></a>00431         };
<a name="l00432"></a>00432     }
<a name="l00433"></a>00433 
<a name="l00434"></a>00434 <span class="preprocessor">#define OPENCV_GPU_IMPLEMENT_RGB5x52GRAY_TRAITS(name, green_bits) \</span>
<a name="l00435"></a>00435 <span class="preprocessor">    struct name ## _traits \</span>
<a name="l00436"></a>00436 <span class="preprocessor">    { \</span>
<a name="l00437"></a>00437 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::RGB5x52Gray&lt;green_bits&gt; functor_type; \</span>
<a name="l00438"></a>00438 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l00439"></a>00439 <span class="preprocessor">        { \</span>
<a name="l00440"></a>00440 <span class="preprocessor">            return functor_type(); \</span>
<a name="l00441"></a>00441 <span class="preprocessor">        } \</span>
<a name="l00442"></a>00442 <span class="preprocessor">    };</span>
<a name="l00443"></a>00443 <span class="preprocessor"></span>
<a name="l00444"></a>00444     <span class="keyword">namespace </span>color_detail
<a name="l00445"></a>00445     {
<a name="l00446"></a>00446         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keyword">typename</span> T&gt; <span class="keyword">static</span> __device__ __forceinline__ <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> RGB2GrayConvert(<span class="keyword">const</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>* <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>)
<a name="l00447"></a>00447         {
<a name="l00448"></a>00448             <span class="keywordflow">return</span> (<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>)CV_DESCALE((<span class="keywordtype">unsigned</span>)(src[bidx] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a012d3fbd135db816dc4aa715157d30e9">B2Y</a> + src[1] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570aa29ed213682a1a97cc5fcc96decf0ad7">G2Y</a> + src[bidx^2] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570ad9cfd5ce6f8a65d50a1009d31ec5b27f">R2Y</a>), <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00449"></a>00449         }
<a name="l00450"></a>00450 
<a name="l00451"></a>00451         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">static</span> __device__ __forceinline__ <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> RGB2GrayConvert(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> src)
<a name="l00452"></a>00452         {
<a name="l00453"></a>00453             <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a> = 0xffu &amp; (src &gt;&gt; (bidx * 8));
<a name="l00454"></a>00454             <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> g = 0xffu &amp; (src &gt;&gt; 8);
<a name="l00455"></a>00455             <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="core__c_8h.html#a54709f3b06b33b66763f1613cc7fb571">r</a> = 0xffu &amp; (src &gt;&gt; ((bidx ^ 2) * 8));
<a name="l00456"></a>00456             <span class="keywordflow">return</span> CV_DESCALE((<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>)(<a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a> * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a012d3fbd135db816dc4aa715157d30e9">B2Y</a> + g * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570aa29ed213682a1a97cc5fcc96decf0ad7">G2Y</a> + <a class="code" href="core__c_8h.html#a54709f3b06b33b66763f1613cc7fb571">r</a> * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570ad9cfd5ce6f8a65d50a1009d31ec5b27f">R2Y</a>), <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00457"></a>00457         }
<a name="l00458"></a>00458 
<a name="l00459"></a>00459         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">static</span> __device__ __forceinline__ <span class="keywordtype">float</span> RGB2GrayConvert(<span class="keyword">const</span> <span class="keywordtype">float</span>* src)
<a name="l00460"></a>00460         {
<a name="l00461"></a>00461             <span class="keywordflow">return</span> src[bidx] * 0.114f + src[1] * 0.587f + src[bidx^2] * 0.299f;
<a name="l00462"></a>00462         }
<a name="l00463"></a>00463 
<a name="l00464"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_gray.html">00464</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keywordtype">int</span> scn, <span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_gray.html">RGB2Gray</a> : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;T, scn&gt;::vec_type, T&gt;
<a name="l00465"></a>00465         {
<a name="l00466"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_gray.html#afac8b1cbc6144818868fd3f49ef24a6a">00466</a>             __device__ __forceinline__ <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_gray.html#afac8b1cbc6144818868fd3f49ef24a6a">operator()</a>(<span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, scn&gt;::vec_type</a>&amp; src)<span class="keyword"> const</span>
<a name="l00467"></a>00467 <span class="keyword">            </span>{
<a name="l00468"></a>00468                 <span class="keywordflow">return</span> RGB2GrayConvert&lt;bidx&gt;(&amp;src.x);
<a name="l00469"></a>00469             }
<a name="l00470"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_gray.html#a85803f23f44dc3fc91a2f4a79fb44a98">00470</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_gray.html#a85803f23f44dc3fc91a2f4a79fb44a98">RGB2Gray</a>() : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>&gt;(){}
<a name="l00471"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_gray.html#ace17a8f4c6cf0ebce1dba664ff00f248">00471</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_gray.html#a85803f23f44dc3fc91a2f4a79fb44a98">RGB2Gray</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_gray.html">RGB2Gray</a>&amp; other_)
<a name="l00472"></a>00472                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>&gt;(){}
<a name="l00473"></a>00473         };
<a name="l00474"></a>00474 
<a name="l00475"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_gray_3_01uchar_00_014_00_01bidx_01_4.html">00475</a>         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_gray.html">RGB2Gray</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>, 4, bidx&gt; : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;uint, uchar&gt;
<a name="l00476"></a>00476         {
<a name="l00477"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_gray_3_01uchar_00_014_00_01bidx_01_4.html#a84371240461f732e01d57c92bbb08082">00477</a>             __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_gray.html#afac8b1cbc6144818868fd3f49ef24a6a">operator()</a>(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> src)<span class="keyword"> const</span>
<a name="l00478"></a>00478 <span class="keyword">            </span>{
<a name="l00479"></a>00479                 <span class="keywordflow">return</span> RGB2GrayConvert&lt;bidx&gt;(<a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>);
<a name="l00480"></a>00480             }
<a name="l00481"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_gray_3_01uchar_00_014_00_01bidx_01_4.html#a813d8a28c512942ecea9e06059f522a7">00481</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_gray_3_01uchar_00_014_00_01bidx_01_4.html#a813d8a28c512942ecea9e06059f522a7">RGB2Gray</a>() : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>&gt;(){}
<a name="l00482"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_gray_3_01uchar_00_014_00_01bidx_01_4.html#a923ef7419a2104e4940d0572666ddefa">00482</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_gray_3_01uchar_00_014_00_01bidx_01_4.html#a923ef7419a2104e4940d0572666ddefa">RGB2Gray</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_gray.html">RGB2Gray</a>&amp; other_) : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>&gt;(){}
<a name="l00483"></a>00483         };
<a name="l00484"></a>00484     }
<a name="l00485"></a>00485 
<a name="l00486"></a>00486 <span class="preprocessor">#define OPENCV_GPU_IMPLEMENT_RGB2GRAY_TRAITS(name, scn, bidx) \</span>
<a name="l00487"></a>00487 <span class="preprocessor">    template &lt;typename T&gt; struct name ## _traits \</span>
<a name="l00488"></a>00488 <span class="preprocessor">    { \</span>
<a name="l00489"></a>00489 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::RGB2Gray&lt;T, scn, bidx&gt; functor_type; \</span>
<a name="l00490"></a>00490 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l00491"></a>00491 <span class="preprocessor">        { \</span>
<a name="l00492"></a>00492 <span class="preprocessor">            return functor_type(); \</span>
<a name="l00493"></a>00493 <span class="preprocessor">        } \</span>
<a name="l00494"></a>00494 <span class="preprocessor">    };</span>
<a name="l00495"></a>00495 <span class="preprocessor"></span>
<a name="l00497"></a>00497 
<a name="l00498"></a>00498     <span class="keyword">namespace </span>color_detail
<a name="l00499"></a>00499     {
<a name="l00500"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a7ba0f4d26dc8d4cdf0ea7045eea9a7f6">00500</a>         __constant__ <span class="keywordtype">float</span> <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a7ba0f4d26dc8d4cdf0ea7045eea9a7f6">c_RGB2YUVCoeffs_f</a>[5] = { 0.114f, 0.587f, 0.299f, 0.492f, 0.877f };
<a name="l00501"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a706522af96fd781d4288448f001d3c6a">00501</a>         __constant__ <span class="keywordtype">int</span>   <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a706522af96fd781d4288448f001d3c6a">c_RGB2YUVCoeffs_i</a>[5] = { <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a012d3fbd135db816dc4aa715157d30e9">B2Y</a>, <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570aa29ed213682a1a97cc5fcc96decf0ad7">G2Y</a>, <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570ad9cfd5ce6f8a65d50a1009d31ec5b27f">R2Y</a>, 8061, 14369 };
<a name="l00502"></a>00502 
<a name="l00503"></a>00503         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keyword">typename</span> T, <span class="keyword">typename</span> D&gt; <span class="keyword">static</span> __device__ <span class="keywordtype">void</span> RGB2YUVConvert(<span class="keyword">const</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>* src, D&amp; <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>)
<a name="l00504"></a>00504         {
<a name="l00505"></a>00505             <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="core__c_8h.html#a5763d62f5c6f37e64f38d25dddcc10fa">delta</a> = <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html#ad020f174d41d85e13cac35a75582b7ee">ColorChannel&lt;T&gt;::half</a>() * (1 &lt;&lt; <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00506"></a>00506 
<a name="l00507"></a>00507             <span class="keyword">const</span> <span class="keywordtype">int</span> Y = CV_DESCALE(src[0] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a706522af96fd781d4288448f001d3c6a">c_RGB2YUVCoeffs_i</a>[bidx^2] + src[1] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a706522af96fd781d4288448f001d3c6a">c_RGB2YUVCoeffs_i</a>[1] + src[2] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a706522af96fd781d4288448f001d3c6a">c_RGB2YUVCoeffs_i</a>[bidx], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00508"></a>00508             <span class="keyword">const</span> <span class="keywordtype">int</span> Cr = CV_DESCALE((src[bidx^2] - Y) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a706522af96fd781d4288448f001d3c6a">c_RGB2YUVCoeffs_i</a>[3] + delta, <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00509"></a>00509             <span class="keyword">const</span> <span class="keywordtype">int</span> Cb = CV_DESCALE((src[bidx] - Y) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a706522af96fd781d4288448f001d3c6a">c_RGB2YUVCoeffs_i</a>[4] + delta, <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00510"></a>00510 
<a name="l00511"></a>00511             dst.x = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>&gt;(Y);
<a name="l00512"></a>00512             dst.y = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>&gt;(Cr);
<a name="l00513"></a>00513             dst.z = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>&gt;(Cb);
<a name="l00514"></a>00514         }
<a name="l00515"></a>00515 
<a name="l00516"></a>00516         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keyword">typename</span> D&gt; <span class="keyword">static</span> __device__ __forceinline__ <span class="keywordtype">void</span> RGB2YUVConvert(<span class="keyword">const</span> <span class="keywordtype">float</span>* src, D&amp; dst)
<a name="l00517"></a>00517         {
<a name="l00518"></a>00518             dst.x = src[0] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a7ba0f4d26dc8d4cdf0ea7045eea9a7f6">c_RGB2YUVCoeffs_f</a>[bidx^2] + src[1] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a7ba0f4d26dc8d4cdf0ea7045eea9a7f6">c_RGB2YUVCoeffs_f</a>[1] + src[2] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a7ba0f4d26dc8d4cdf0ea7045eea9a7f6">c_RGB2YUVCoeffs_f</a>[bidx];
<a name="l00519"></a>00519             dst.y = (src[bidx^2] - dst.x) * c_RGB2YUVCoeffs_f[3] + <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel_3_01float_01_4.html#a5326d7bb9cabfee3753845da60757051">ColorChannel&lt;float&gt;::half</a>();
<a name="l00520"></a>00520             dst.z = (src[bidx] - dst.x) * c_RGB2YUVCoeffs_f[4] + <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel_3_01float_01_4.html#a5326d7bb9cabfee3753845da60757051">ColorChannel&lt;float&gt;::half</a>();
<a name="l00521"></a>00521         }
<a name="l00522"></a>00522 
<a name="l00523"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_u_v.html">00523</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keywordtype">int</span> scn, <span class="keywordtype">int</span> dcn, <span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_u_v.html">RGB2YUV</a>
<a name="l00524"></a>00524             : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;T, scn&gt;::vec_type, typename TypeVec&lt;T, dcn&gt;::vec_type&gt;
<a name="l00525"></a>00525         {
<a name="l00526"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_u_v.html#ab28a89a9b6ec4276acd64994aa184500">00526</a>             __device__ __forceinline__ <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_u_v.html#ab28a89a9b6ec4276acd64994aa184500">operator ()</a>(<span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, scn&gt;::vec_type</a>&amp; src)<span class="keyword"> const</span>
<a name="l00527"></a>00527 <span class="keyword">            </span>{
<a name="l00528"></a>00528                 <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00529"></a>00529                 RGB2YUVConvert&lt;bidx&gt;(&amp;src.x, <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>);
<a name="l00530"></a>00530                 <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00531"></a>00531             }
<a name="l00532"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_u_v.html#aa6f7965036d96a24260e496f93e79d22">00532</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_u_v.html#aa6f7965036d96a24260e496f93e79d22">RGB2YUV</a>()
<a name="l00533"></a>00533                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l00534"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_u_v.html#ad132b36ffc8ad3bb2b4aee9dbae6fbcf">00534</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_u_v.html#aa6f7965036d96a24260e496f93e79d22">RGB2YUV</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_u_v.html">RGB2YUV</a>&amp; other_)
<a name="l00535"></a>00535                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l00536"></a>00536         };
<a name="l00537"></a>00537     }
<a name="l00538"></a>00538 
<a name="l00539"></a>00539 <span class="preprocessor">#define OPENCV_GPU_IMPLEMENT_RGB2YUV_TRAITS(name, scn, dcn, bidx) \</span>
<a name="l00540"></a>00540 <span class="preprocessor">    template &lt;typename T&gt; struct name ## _traits \</span>
<a name="l00541"></a>00541 <span class="preprocessor">    { \</span>
<a name="l00542"></a>00542 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::RGB2YUV&lt;T, scn, dcn, bidx&gt; functor_type; \</span>
<a name="l00543"></a>00543 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l00544"></a>00544 <span class="preprocessor">        { \</span>
<a name="l00545"></a>00545 <span class="preprocessor">            return functor_type(); \</span>
<a name="l00546"></a>00546 <span class="preprocessor">        } \</span>
<a name="l00547"></a>00547 <span class="preprocessor">    };</span>
<a name="l00548"></a>00548 <span class="preprocessor"></span>
<a name="l00549"></a>00549     <span class="keyword">namespace </span>color_detail
<a name="l00550"></a>00550     {
<a name="l00551"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aaf1f69ee36d3549b97afb7bbd3cd4346">00551</a>         __constant__ <span class="keywordtype">float</span> <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aaf1f69ee36d3549b97afb7bbd3cd4346">c_YUV2RGBCoeffs_f</a>[5] = { 2.032f, -0.395f, -0.581f, 1.140f };
<a name="l00552"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a6fc1bc14a4a8c737b6aeca6da9bf8497">00552</a>         __constant__ <span class="keywordtype">int</span>   <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a6fc1bc14a4a8c737b6aeca6da9bf8497">c_YUV2RGBCoeffs_i</a>[5] = { 33292, -6472, -9519, 18678 };
<a name="l00553"></a>00553 
<a name="l00554"></a>00554         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keyword">typename</span> T, <span class="keyword">typename</span> D&gt; <span class="keyword">static</span> __device__ <span class="keywordtype">void</span> YUV2RGBConvert(<span class="keyword">const</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>&amp; src, D* dst)
<a name="l00555"></a>00555         {
<a name="l00556"></a>00556             <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a> = src.<a class="code" href="struct_cv_point2_d32f.html#a8d77880e3d92682aec3cbb36eae9cc40">x</a> + CV_DESCALE((src.z - ColorChannel&lt;D&gt;::half()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a6fc1bc14a4a8c737b6aeca6da9bf8497">c_YUV2RGBCoeffs_i</a>[3], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00557"></a>00557 
<a name="l00558"></a>00558             <span class="keyword">const</span> <span class="keywordtype">int</span> g = src.x + CV_DESCALE((src.z - ColorChannel&lt;D&gt;::half()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a6fc1bc14a4a8c737b6aeca6da9bf8497">c_YUV2RGBCoeffs_i</a>[2]
<a name="l00559"></a>00559                                              + (src.y - ColorChannel&lt;D&gt;::half()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a6fc1bc14a4a8c737b6aeca6da9bf8497">c_YUV2RGBCoeffs_i</a>[1], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00560"></a>00560 
<a name="l00561"></a>00561             <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="core__c_8h.html#a54709f3b06b33b66763f1613cc7fb571">r</a> = src.<a class="code" href="struct_cv_rect.html#a4ce08c7287717fe50c94f7690a62dcc3">x</a> + CV_DESCALE((src.y - ColorChannel&lt;D&gt;::half()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a6fc1bc14a4a8c737b6aeca6da9bf8497">c_YUV2RGBCoeffs_i</a>[0], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00562"></a>00562 
<a name="l00563"></a>00563             dst[bidx] = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;D&gt;(<a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>);
<a name="l00564"></a>00564             dst[1] = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;D&gt;(g);
<a name="l00565"></a>00565             dst[bidx^2] = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;D&gt;(<a class="code" href="core__c_8h.html#a54709f3b06b33b66763f1613cc7fb571">r</a>);
<a name="l00566"></a>00566         }
<a name="l00567"></a>00567 
<a name="l00568"></a>00568         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">static</span> __device__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> YUV2RGBConvert(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> src)
<a name="l00569"></a>00569         {
<a name="l00570"></a>00570             <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="highgui__c_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> = 0xff &amp; (<a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>);
<a name="l00571"></a>00571             <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="highgui__c_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a> = 0xff &amp; (src &gt;&gt; 8);
<a name="l00572"></a>00572             <span class="keyword">const</span> <span class="keywordtype">int</span> z = 0xff &amp; (src &gt;&gt; 16);
<a name="l00573"></a>00573 
<a name="l00574"></a>00574             <span class="keyword">const</span> <span class="keywordtype">int</span> b = x + CV_DESCALE((z - ColorChannel&lt;uchar&gt;::half()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a6fc1bc14a4a8c737b6aeca6da9bf8497">c_YUV2RGBCoeffs_i</a>[3], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00575"></a>00575 
<a name="l00576"></a>00576             <span class="keyword">const</span> <span class="keywordtype">int</span> g = x + CV_DESCALE((z - ColorChannel&lt;uchar&gt;::half()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a6fc1bc14a4a8c737b6aeca6da9bf8497">c_YUV2RGBCoeffs_i</a>[2]
<a name="l00577"></a>00577                                          + (y - ColorChannel&lt;uchar&gt;::half()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a6fc1bc14a4a8c737b6aeca6da9bf8497">c_YUV2RGBCoeffs_i</a>[1], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00578"></a>00578 
<a name="l00579"></a>00579             <span class="keyword">const</span> <span class="keywordtype">int</span> r = x + CV_DESCALE((y - ColorChannel&lt;uchar&gt;::half()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a6fc1bc14a4a8c737b6aeca6da9bf8497">c_YUV2RGBCoeffs_i</a>[0], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00580"></a>00580 
<a name="l00581"></a>00581             <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> dst = 0xffu &lt;&lt; 24;
<a name="l00582"></a>00582 
<a name="l00583"></a>00583             dst |= <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(<a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>) &lt;&lt; (bidx * 8);
<a name="l00584"></a>00584             dst |= <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(g) &lt;&lt; 8;
<a name="l00585"></a>00585             dst |= <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(<a class="code" href="core__c_8h.html#a54709f3b06b33b66763f1613cc7fb571">r</a>) &lt;&lt; ((bidx ^ 2) * 8);
<a name="l00586"></a>00586 
<a name="l00587"></a>00587             <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00588"></a>00588         }
<a name="l00589"></a>00589 
<a name="l00590"></a>00590         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keyword">typename</span> T&gt; <span class="keyword">static</span> __device__ __forceinline__ <span class="keywordtype">void</span> YUV2RGBConvert(<span class="keyword">const</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>&amp; src, <span class="keywordtype">float</span>* dst)
<a name="l00591"></a>00591         {
<a name="l00592"></a>00592             dst[bidx] = src.x + (src.z - <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html#ad020f174d41d85e13cac35a75582b7ee">ColorChannel&lt;float&gt;::half</a>()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aaf1f69ee36d3549b97afb7bbd3cd4346">c_YUV2RGBCoeffs_f</a>[3];
<a name="l00593"></a>00593 
<a name="l00594"></a>00594             dst[1] = src.x + (src.z - <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html#ad020f174d41d85e13cac35a75582b7ee">ColorChannel&lt;float&gt;::half</a>()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aaf1f69ee36d3549b97afb7bbd3cd4346">c_YUV2RGBCoeffs_f</a>[2]
<a name="l00595"></a>00595                      + (src.y - <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel_3_01float_01_4.html#a5326d7bb9cabfee3753845da60757051">ColorChannel&lt;float&gt;::half</a>()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aaf1f69ee36d3549b97afb7bbd3cd4346">c_YUV2RGBCoeffs_f</a>[1];
<a name="l00596"></a>00596 
<a name="l00597"></a>00597             dst[bidx^2] = src.x + (src.y - <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html#ad020f174d41d85e13cac35a75582b7ee">ColorChannel&lt;float&gt;::half</a>()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aaf1f69ee36d3549b97afb7bbd3cd4346">c_YUV2RGBCoeffs_f</a>[0];
<a name="l00598"></a>00598         }
<a name="l00599"></a>00599 
<a name="l00600"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_u_v2_r_g_b.html">00600</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keywordtype">int</span> scn, <span class="keywordtype">int</span> dcn, <span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_u_v2_r_g_b.html">YUV2RGB</a>
<a name="l00601"></a>00601             : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;T, scn&gt;::vec_type, typename TypeVec&lt;T, dcn&gt;::vec_type&gt;
<a name="l00602"></a>00602         {
<a name="l00603"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_u_v2_r_g_b.html#ad22a27196459350a5e89d9871b9b21a3">00603</a>             __device__ __forceinline__ <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_u_v2_r_g_b.html#ad22a27196459350a5e89d9871b9b21a3">operator ()</a>(<span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, scn&gt;::vec_type</a>&amp; src)<span class="keyword"> const</span>
<a name="l00604"></a>00604 <span class="keyword">            </span>{
<a name="l00605"></a>00605                 <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00606"></a>00606 
<a name="l00607"></a>00607                 YUV2RGBConvert&lt;bidx&gt;(<a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>, &amp;dst.x);
<a name="l00608"></a>00608                 setAlpha(dst, <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html">ColorChannel&lt;T&gt;::max</a>());
<a name="l00609"></a>00609 
<a name="l00610"></a>00610                 <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00611"></a>00611             }
<a name="l00612"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_u_v2_r_g_b.html#adb00a939a1fd99ea0ad1f9e467851d71">00612</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_u_v2_r_g_b.html#adb00a939a1fd99ea0ad1f9e467851d71">YUV2RGB</a>()
<a name="l00613"></a>00613                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l00614"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_u_v2_r_g_b.html#a1b88cc90a76e1298414e5697fab05e0e">00614</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_u_v2_r_g_b.html#adb00a939a1fd99ea0ad1f9e467851d71">YUV2RGB</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_u_v2_r_g_b.html">YUV2RGB</a>&amp; other_)
<a name="l00615"></a>00615                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l00616"></a>00616         };
<a name="l00617"></a>00617 
<a name="l00618"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_u_v2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_01_4.html">00618</a>         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_u_v2_r_g_b.html">YUV2RGB</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>, 4, 4, bidx&gt; : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;uint, uint&gt;
<a name="l00619"></a>00619         {
<a name="l00620"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_u_v2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_01_4.html#aa287ede2553898adeb8d51b14e8a6994">00620</a>             __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_u_v2_r_g_b.html#ad22a27196459350a5e89d9871b9b21a3">operator ()</a>(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> src)<span class="keyword"> const</span>
<a name="l00621"></a>00621 <span class="keyword">            </span>{
<a name="l00622"></a>00622                 <span class="keywordflow">return</span> YUV2RGBConvert&lt;bidx&gt;(<a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>);
<a name="l00623"></a>00623             }
<a name="l00624"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_u_v2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_01_4.html#a875f5fade205c4ea85aaeea40ae1c36d">00624</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_u_v2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_01_4.html#a875f5fade205c4ea85aaeea40ae1c36d">YUV2RGB</a>() : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l00625"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_u_v2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_01_4.html#afcd42c517c194907d2c9a3ed935ceaf3">00625</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_u_v2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_01_4.html#afcd42c517c194907d2c9a3ed935ceaf3">YUV2RGB</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_u_v2_r_g_b.html">YUV2RGB</a>&amp; other_) : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l00626"></a>00626         };
<a name="l00627"></a>00627     }
<a name="l00628"></a>00628 
<a name="l00629"></a>00629 <span class="preprocessor">#define OPENCV_GPU_IMPLEMENT_YUV2RGB_TRAITS(name, scn, dcn, bidx) \</span>
<a name="l00630"></a>00630 <span class="preprocessor">    template &lt;typename T&gt; struct name ## _traits \</span>
<a name="l00631"></a>00631 <span class="preprocessor">    { \</span>
<a name="l00632"></a>00632 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::YUV2RGB&lt;T, scn, dcn, bidx&gt; functor_type; \</span>
<a name="l00633"></a>00633 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l00634"></a>00634 <span class="preprocessor">        { \</span>
<a name="l00635"></a>00635 <span class="preprocessor">            return functor_type(); \</span>
<a name="l00636"></a>00636 <span class="preprocessor">        } \</span>
<a name="l00637"></a>00637 <span class="preprocessor">    };</span>
<a name="l00638"></a>00638 <span class="preprocessor"></span>
<a name="l00640"></a>00640 
<a name="l00641"></a>00641     <span class="keyword">namespace </span>color_detail
<a name="l00642"></a>00642     {
<a name="l00643"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#adaa4dd39f9935092666b86359548bd36">00643</a>         __constant__ <span class="keywordtype">float</span> <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#adaa4dd39f9935092666b86359548bd36">c_RGB2YCrCbCoeffs_f</a>[5] = {0.299f, 0.587f, 0.114f, 0.713f, 0.564f};
<a name="l00644"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a1b845e7ebd625deef2552cc523b95496">00644</a>         __constant__ <span class="keywordtype">int</span>   <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a1b845e7ebd625deef2552cc523b95496">c_RGB2YCrCbCoeffs_i</a>[5] = {<a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570ad9cfd5ce6f8a65d50a1009d31ec5b27f">R2Y</a>, <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570aa29ed213682a1a97cc5fcc96decf0ad7">G2Y</a>, <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a012d3fbd135db816dc4aa715157d30e9">B2Y</a>, 11682, 9241};
<a name="l00645"></a>00645 
<a name="l00646"></a>00646         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keyword">typename</span> T, <span class="keyword">typename</span> D&gt; <span class="keyword">static</span> __device__ <span class="keywordtype">void</span> RGB2YCrCbConvert(<span class="keyword">const</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>* src, D&amp; dst)
<a name="l00647"></a>00647         {
<a name="l00648"></a>00648             <span class="keyword">const</span> <span class="keywordtype">int</span> delta = <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html#ad020f174d41d85e13cac35a75582b7ee">ColorChannel&lt;T&gt;::half</a>() * (1 &lt;&lt; <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00649"></a>00649 
<a name="l00650"></a>00650             <span class="keyword">const</span> <span class="keywordtype">int</span> Y = CV_DESCALE(src[0] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a1b845e7ebd625deef2552cc523b95496">c_RGB2YCrCbCoeffs_i</a>[bidx^2] + src[1] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a1b845e7ebd625deef2552cc523b95496">c_RGB2YCrCbCoeffs_i</a>[1] + src[2] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a1b845e7ebd625deef2552cc523b95496">c_RGB2YCrCbCoeffs_i</a>[bidx], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00651"></a>00651             <span class="keyword">const</span> <span class="keywordtype">int</span> Cr = CV_DESCALE((src[bidx^2] - Y) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a1b845e7ebd625deef2552cc523b95496">c_RGB2YCrCbCoeffs_i</a>[3] + delta, <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00652"></a>00652             <span class="keyword">const</span> <span class="keywordtype">int</span> Cb = CV_DESCALE((src[bidx] - Y) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a1b845e7ebd625deef2552cc523b95496">c_RGB2YCrCbCoeffs_i</a>[4] + delta, <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00653"></a>00653 
<a name="l00654"></a>00654             dst.x = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>&gt;(Y);
<a name="l00655"></a>00655             dst.y = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>&gt;(Cr);
<a name="l00656"></a>00656             dst.z = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>&gt;(Cb);
<a name="l00657"></a>00657         }
<a name="l00658"></a>00658 
<a name="l00659"></a>00659         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">static</span> __device__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> RGB2YCrCbConvert(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> src)
<a name="l00660"></a>00660         {
<a name="l00661"></a>00661             <span class="keyword">const</span> <span class="keywordtype">int</span> delta = <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html#ad020f174d41d85e13cac35a75582b7ee">ColorChannel&lt;uchar&gt;::half</a>() * (1 &lt;&lt; <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00662"></a>00662 
<a name="l00663"></a>00663             <span class="keyword">const</span> <span class="keywordtype">int</span> Y = CV_DESCALE((0xffu &amp; src) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a1b845e7ebd625deef2552cc523b95496">c_RGB2YCrCbCoeffs_i</a>[bidx^2] + (0xffu &amp; (src &gt;&gt; 8)) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a1b845e7ebd625deef2552cc523b95496">c_RGB2YCrCbCoeffs_i</a>[1] + (0xffu &amp; (src &gt;&gt; 16)) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a1b845e7ebd625deef2552cc523b95496">c_RGB2YCrCbCoeffs_i</a>[bidx], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00664"></a>00664             <span class="keyword">const</span> <span class="keywordtype">int</span> Cr = CV_DESCALE(((0xffu &amp; (src &gt;&gt; ((bidx ^ 2) * 8))) - Y) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a1b845e7ebd625deef2552cc523b95496">c_RGB2YCrCbCoeffs_i</a>[3] + delta, <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00665"></a>00665             <span class="keyword">const</span> <span class="keywordtype">int</span> Cb = CV_DESCALE(((0xffu &amp; (src &gt;&gt; (bidx * 8))) - Y) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a1b845e7ebd625deef2552cc523b95496">c_RGB2YCrCbCoeffs_i</a>[4] + delta, <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00666"></a>00666 
<a name="l00667"></a>00667             <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> dst = 0;
<a name="l00668"></a>00668 
<a name="l00669"></a>00669             dst |= <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(Y);
<a name="l00670"></a>00670             dst |= <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(Cr) &lt;&lt; 8;
<a name="l00671"></a>00671             dst |= <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(Cb) &lt;&lt; 16;
<a name="l00672"></a>00672 
<a name="l00673"></a>00673             <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00674"></a>00674         }
<a name="l00675"></a>00675 
<a name="l00676"></a>00676         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keyword">typename</span> D&gt; <span class="keyword">static</span> __device__ __forceinline__ <span class="keywordtype">void</span> RGB2YCrCbConvert(<span class="keyword">const</span> <span class="keywordtype">float</span>* src, D&amp; dst)
<a name="l00677"></a>00677         {
<a name="l00678"></a>00678             dst.x = src[0] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#adaa4dd39f9935092666b86359548bd36">c_RGB2YCrCbCoeffs_f</a>[bidx^2] + src[1] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#adaa4dd39f9935092666b86359548bd36">c_RGB2YCrCbCoeffs_f</a>[1] + src[2] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#adaa4dd39f9935092666b86359548bd36">c_RGB2YCrCbCoeffs_f</a>[bidx];
<a name="l00679"></a>00679             dst.y = (src[bidx^2] - dst.x) * c_RGB2YCrCbCoeffs_f[3] + <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel_3_01float_01_4.html#a5326d7bb9cabfee3753845da60757051">ColorChannel&lt;float&gt;::half</a>();
<a name="l00680"></a>00680             dst.z = (src[bidx] - dst.x) * c_RGB2YCrCbCoeffs_f[4] + <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel_3_01float_01_4.html#a5326d7bb9cabfee3753845da60757051">ColorChannel&lt;float&gt;::half</a>();
<a name="l00681"></a>00681         }
<a name="l00682"></a>00682 
<a name="l00683"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_cr_cb.html">00683</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keywordtype">int</span> scn, <span class="keywordtype">int</span> dcn, <span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_cr_cb.html">RGB2YCrCb</a>
<a name="l00684"></a>00684             : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;T, scn&gt;::vec_type, typename TypeVec&lt;T, dcn&gt;::vec_type&gt;
<a name="l00685"></a>00685         {
<a name="l00686"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_cr_cb.html#adc1ae15df94c7c4f7942783e2b2a0249">00686</a>             __device__ __forceinline__ <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_cr_cb.html#adc1ae15df94c7c4f7942783e2b2a0249">operator ()</a>(<span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, scn&gt;::vec_type</a>&amp; src)<span class="keyword"> const</span>
<a name="l00687"></a>00687 <span class="keyword">            </span>{
<a name="l00688"></a>00688                 <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00689"></a>00689                 RGB2YCrCbConvert&lt;bidx&gt;(&amp;src.x, <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>);
<a name="l00690"></a>00690                 <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00691"></a>00691             }
<a name="l00692"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_cr_cb.html#ad3479e7cfdab627aacfae50a4b2e699f">00692</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_cr_cb.html#ad3479e7cfdab627aacfae50a4b2e699f">RGB2YCrCb</a>()
<a name="l00693"></a>00693                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l00694"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_cr_cb.html#a5e36183326c7ff8d417a694617a3fb5b">00694</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_cr_cb.html#ad3479e7cfdab627aacfae50a4b2e699f">RGB2YCrCb</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_cr_cb.html">RGB2YCrCb</a>&amp; other_)
<a name="l00695"></a>00695                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l00696"></a>00696         };
<a name="l00697"></a>00697 
<a name="l00698"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_cr_cb_3_01uchar_00_014_00_014_00_01bidx_01_4.html">00698</a>         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_cr_cb.html">RGB2YCrCb</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>, 4, 4, bidx&gt; : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;uint, uint&gt;
<a name="l00699"></a>00699         {
<a name="l00700"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_cr_cb_3_01uchar_00_014_00_014_00_01bidx_01_4.html#a4690fbd63b83e638e1979431b4b2f672">00700</a>             __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_cr_cb.html#adc1ae15df94c7c4f7942783e2b2a0249">operator ()</a>(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> src)<span class="keyword"> const</span>
<a name="l00701"></a>00701 <span class="keyword">            </span>{
<a name="l00702"></a>00702                 <span class="keywordflow">return</span> RGB2YCrCbConvert&lt;bidx&gt;(<a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>);
<a name="l00703"></a>00703             }
<a name="l00704"></a>00704 
<a name="l00705"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_cr_cb_3_01uchar_00_014_00_014_00_01bidx_01_4.html#a4ddbaaa9efcae078521627508b3b5253">00705</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_cr_cb_3_01uchar_00_014_00_014_00_01bidx_01_4.html#a4ddbaaa9efcae078521627508b3b5253">RGB2YCrCb</a>() : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l00706"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_cr_cb_3_01uchar_00_014_00_014_00_01bidx_01_4.html#a50337f7071a92aa06aefe2b3aec9fef7">00706</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_cr_cb_3_01uchar_00_014_00_014_00_01bidx_01_4.html#a50337f7071a92aa06aefe2b3aec9fef7">RGB2YCrCb</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_y_cr_cb.html">RGB2YCrCb</a>&amp; other_) : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l00707"></a>00707         };
<a name="l00708"></a>00708     }
<a name="l00709"></a>00709 
<a name="l00710"></a>00710 <span class="preprocessor">#define OPENCV_GPU_IMPLEMENT_RGB2YCrCb_TRAITS(name, scn, dcn, bidx) \</span>
<a name="l00711"></a>00711 <span class="preprocessor">    template &lt;typename T&gt; struct name ## _traits \</span>
<a name="l00712"></a>00712 <span class="preprocessor">    { \</span>
<a name="l00713"></a>00713 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::RGB2YCrCb&lt;T, scn, dcn, bidx&gt; functor_type; \</span>
<a name="l00714"></a>00714 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l00715"></a>00715 <span class="preprocessor">        { \</span>
<a name="l00716"></a>00716 <span class="preprocessor">            return functor_type(); \</span>
<a name="l00717"></a>00717 <span class="preprocessor">        } \</span>
<a name="l00718"></a>00718 <span class="preprocessor">    };</span>
<a name="l00719"></a>00719 <span class="preprocessor"></span>
<a name="l00720"></a>00720     <span class="keyword">namespace </span>color_detail
<a name="l00721"></a>00721     {
<a name="l00722"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae6f46dc891123b2b127c4af9fe8867d4">00722</a>         __constant__ <span class="keywordtype">float</span> <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae6f46dc891123b2b127c4af9fe8867d4">c_YCrCb2RGBCoeffs_f</a>[5] = {1.403f, -0.714f, -0.344f, 1.773f};
<a name="l00723"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a618b643b2dcf720985d8b4e1b67e8790">00723</a>         __constant__ <span class="keywordtype">int</span>   <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a618b643b2dcf720985d8b4e1b67e8790">c_YCrCb2RGBCoeffs_i</a>[5] = {22987, -11698, -5636, 29049};
<a name="l00724"></a>00724 
<a name="l00725"></a>00725         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keyword">typename</span> T, <span class="keyword">typename</span> D&gt; <span class="keyword">static</span> __device__ <span class="keywordtype">void</span> YCrCb2RGBConvert(<span class="keyword">const</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>&amp; src, D* dst)
<a name="l00726"></a>00726         {
<a name="l00727"></a>00727             <span class="keyword">const</span> <span class="keywordtype">int</span> b = src.x + CV_DESCALE((src.z - ColorChannel&lt;D&gt;::half()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a618b643b2dcf720985d8b4e1b67e8790">c_YCrCb2RGBCoeffs_i</a>[3], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00728"></a>00728             <span class="keyword">const</span> <span class="keywordtype">int</span> g = src.x + CV_DESCALE((src.z - ColorChannel&lt;D&gt;::half()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a618b643b2dcf720985d8b4e1b67e8790">c_YCrCb2RGBCoeffs_i</a>[2] + (src.y - ColorChannel&lt;D&gt;::half()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a618b643b2dcf720985d8b4e1b67e8790">c_YCrCb2RGBCoeffs_i</a>[1], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00729"></a>00729             <span class="keyword">const</span> <span class="keywordtype">int</span> r = src.x + CV_DESCALE((src.y - ColorChannel&lt;D&gt;::half()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a618b643b2dcf720985d8b4e1b67e8790">c_YCrCb2RGBCoeffs_i</a>[0], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00730"></a>00730 
<a name="l00731"></a>00731             dst[bidx] = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;D&gt;(<a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>);
<a name="l00732"></a>00732             dst[1] = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;D&gt;(g);
<a name="l00733"></a>00733             dst[bidx^2] = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;D&gt;(<a class="code" href="core__c_8h.html#a54709f3b06b33b66763f1613cc7fb571">r</a>);
<a name="l00734"></a>00734         }
<a name="l00735"></a>00735 
<a name="l00736"></a>00736         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">static</span> __device__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> YCrCb2RGBConvert(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> src)
<a name="l00737"></a>00737         {
<a name="l00738"></a>00738             <span class="keyword">const</span> <span class="keywordtype">int</span> x = 0xff &amp; (<a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>);
<a name="l00739"></a>00739             <span class="keyword">const</span> <span class="keywordtype">int</span> y = 0xff &amp; (src &gt;&gt; 8);
<a name="l00740"></a>00740             <span class="keyword">const</span> <span class="keywordtype">int</span> z = 0xff &amp; (src &gt;&gt; 16);
<a name="l00741"></a>00741 
<a name="l00742"></a>00742             <span class="keyword">const</span> <span class="keywordtype">int</span> b = x + CV_DESCALE((z - ColorChannel&lt;uchar&gt;::half()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a618b643b2dcf720985d8b4e1b67e8790">c_YCrCb2RGBCoeffs_i</a>[3], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00743"></a>00743             <span class="keyword">const</span> <span class="keywordtype">int</span> g = x + CV_DESCALE((z - ColorChannel&lt;uchar&gt;::half()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a618b643b2dcf720985d8b4e1b67e8790">c_YCrCb2RGBCoeffs_i</a>[2] + (y - ColorChannel&lt;uchar&gt;::half()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a618b643b2dcf720985d8b4e1b67e8790">c_YCrCb2RGBCoeffs_i</a>[1], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00744"></a>00744             <span class="keyword">const</span> <span class="keywordtype">int</span> r = x + CV_DESCALE((y - ColorChannel&lt;uchar&gt;::half()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a618b643b2dcf720985d8b4e1b67e8790">c_YCrCb2RGBCoeffs_i</a>[0], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1a7cb0ff2d3a2a1b53c5d5c13532ed0b">yuv_shift</a>);
<a name="l00745"></a>00745 
<a name="l00746"></a>00746             <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> dst = 0xffu &lt;&lt; 24;
<a name="l00747"></a>00747 
<a name="l00748"></a>00748             dst |= <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(<a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>) &lt;&lt; (bidx * 8);
<a name="l00749"></a>00749             dst |= <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(g) &lt;&lt; 8;
<a name="l00750"></a>00750             dst |= <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(<a class="code" href="core__c_8h.html#a54709f3b06b33b66763f1613cc7fb571">r</a>) &lt;&lt; ((bidx ^ 2) * 8);
<a name="l00751"></a>00751 
<a name="l00752"></a>00752             <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00753"></a>00753         }
<a name="l00754"></a>00754 
<a name="l00755"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ab80a65f0957796a662eecdad97af8bee">00755</a>         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keyword">typename</span> T&gt; __device__ __forceinline__ <span class="keywordtype">void</span> YCrCb2RGBConvert(<span class="keyword">const</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>&amp; src, <span class="keywordtype">float</span>* dst)
<a name="l00756"></a>00756         {
<a name="l00757"></a>00757             dst[bidx] = src.x + (src.z - <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html#ad020f174d41d85e13cac35a75582b7ee">ColorChannel&lt;float&gt;::half</a>()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae6f46dc891123b2b127c4af9fe8867d4">c_YCrCb2RGBCoeffs_f</a>[3];
<a name="l00758"></a>00758             dst[1] = src.x + (src.z - <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html#ad020f174d41d85e13cac35a75582b7ee">ColorChannel&lt;float&gt;::half</a>()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae6f46dc891123b2b127c4af9fe8867d4">c_YCrCb2RGBCoeffs_f</a>[2] + (src.y - <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html">ColorChannel&lt;float&gt;::half</a>()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae6f46dc891123b2b127c4af9fe8867d4">c_YCrCb2RGBCoeffs_f</a>[1];
<a name="l00759"></a>00759             dst[bidx^2] = src.x + (src.y - <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html#ad020f174d41d85e13cac35a75582b7ee">ColorChannel&lt;float&gt;::half</a>()) * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae6f46dc891123b2b127c4af9fe8867d4">c_YCrCb2RGBCoeffs_f</a>[0];
<a name="l00760"></a>00760         }
<a name="l00761"></a>00761 
<a name="l00762"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_cr_cb2_r_g_b.html">00762</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keywordtype">int</span> scn, <span class="keywordtype">int</span> dcn, <span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_cr_cb2_r_g_b.html">YCrCb2RGB</a>
<a name="l00763"></a>00763             : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;T, scn&gt;::vec_type, typename TypeVec&lt;T, dcn&gt;::vec_type&gt;
<a name="l00764"></a>00764         {
<a name="l00765"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_cr_cb2_r_g_b.html#afe9bb24abddd5d65f95dd4a6ae173c3f">00765</a>             __device__ __forceinline__ <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_cr_cb2_r_g_b.html#afe9bb24abddd5d65f95dd4a6ae173c3f">operator ()</a>(<span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, scn&gt;::vec_type</a>&amp; src)<span class="keyword"> const</span>
<a name="l00766"></a>00766 <span class="keyword">            </span>{
<a name="l00767"></a>00767                 <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00768"></a>00768 
<a name="l00769"></a>00769                 YCrCb2RGBConvert&lt;bidx&gt;(<a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>, &amp;dst.x);
<a name="l00770"></a>00770                 setAlpha(dst, <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html">ColorChannel&lt;T&gt;::max</a>());
<a name="l00771"></a>00771 
<a name="l00772"></a>00772                 <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00773"></a>00773             }
<a name="l00774"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_cr_cb2_r_g_b.html#ab700870544ef251da9cf64fcbcc5d4f6">00774</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_cr_cb2_r_g_b.html#ab700870544ef251da9cf64fcbcc5d4f6">YCrCb2RGB</a>()
<a name="l00775"></a>00775                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l00776"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_cr_cb2_r_g_b.html#a668c97e7eafec85e0cb5976de9be37a7">00776</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_cr_cb2_r_g_b.html#ab700870544ef251da9cf64fcbcc5d4f6">YCrCb2RGB</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_cr_cb2_r_g_b.html">YCrCb2RGB</a>&amp; other_)
<a name="l00777"></a>00777                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l00778"></a>00778         };
<a name="l00779"></a>00779 
<a name="l00780"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_cr_cb2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_01_4.html">00780</a>         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_cr_cb2_r_g_b.html">YCrCb2RGB</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>, 4, 4, bidx&gt; : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;uint, uint&gt;
<a name="l00781"></a>00781         {
<a name="l00782"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_cr_cb2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_01_4.html#a9a951b27f32f4693bba4437e6056a3b0">00782</a>             __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_cr_cb2_r_g_b.html#afe9bb24abddd5d65f95dd4a6ae173c3f">operator ()</a>(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> src)<span class="keyword"> const</span>
<a name="l00783"></a>00783 <span class="keyword">            </span>{
<a name="l00784"></a>00784                 <span class="keywordflow">return</span> YCrCb2RGBConvert&lt;bidx&gt;(<a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>);
<a name="l00785"></a>00785             }
<a name="l00786"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_cr_cb2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_01_4.html#adeb4db97c937e5be37366f6f6dd7d8f8">00786</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_cr_cb2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_01_4.html#adeb4db97c937e5be37366f6f6dd7d8f8">YCrCb2RGB</a>() : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l00787"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_cr_cb2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_01_4.html#a255620fa3b2f9de61aae294c71f03561">00787</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_cr_cb2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_01_4.html#a255620fa3b2f9de61aae294c71f03561">YCrCb2RGB</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_y_cr_cb2_r_g_b.html">YCrCb2RGB</a>&amp; other_) : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l00788"></a>00788         };
<a name="l00789"></a>00789     }
<a name="l00790"></a>00790 
<a name="l00791"></a>00791 <span class="preprocessor">#define OPENCV_GPU_IMPLEMENT_YCrCb2RGB_TRAITS(name, scn, dcn, bidx) \</span>
<a name="l00792"></a>00792 <span class="preprocessor">    template &lt;typename T&gt; struct name ## _traits \</span>
<a name="l00793"></a>00793 <span class="preprocessor">    { \</span>
<a name="l00794"></a>00794 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::YCrCb2RGB&lt;T, scn, dcn, bidx&gt; functor_type; \</span>
<a name="l00795"></a>00795 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l00796"></a>00796 <span class="preprocessor">        { \</span>
<a name="l00797"></a>00797 <span class="preprocessor">            return functor_type(); \</span>
<a name="l00798"></a>00798 <span class="preprocessor">        } \</span>
<a name="l00799"></a>00799 <span class="preprocessor">    };</span>
<a name="l00800"></a>00800 <span class="preprocessor"></span>
<a name="l00802"></a>00802 
<a name="l00803"></a>00803     <span class="keyword">namespace </span>color_detail
<a name="l00804"></a>00804     {
<a name="l00805"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#adb6f9f66aa831e69e6cd0fe39edaa77c">00805</a>         __constant__ <span class="keywordtype">float</span> <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#adb6f9f66aa831e69e6cd0fe39edaa77c">c_RGB2XYZ_D65f</a>[9] = { 0.412453f, 0.357580f, 0.180423f, 0.212671f, 0.715160f, 0.072169f, 0.019334f, 0.119193f, 0.950227f };
<a name="l00806"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aba86e885f91ae8aefc51ee703cd1361f">00806</a>         __constant__ <span class="keywordtype">int</span>   <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aba86e885f91ae8aefc51ee703cd1361f">c_RGB2XYZ_D65i</a>[9] = { 1689, 1465, 739, 871, 2929, 296, 79, 488, 3892 };
<a name="l00807"></a>00807 
<a name="l00808"></a>00808         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keyword">typename</span> T, <span class="keyword">typename</span> D&gt; <span class="keyword">static</span> __device__ __forceinline__ <span class="keywordtype">void</span> RGB2XYZConvert(<span class="keyword">const</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>* src, D&amp; dst)
<a name="l00809"></a>00809         {
<a name="l00810"></a>00810             dst.x = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>&gt;(CV_DESCALE(src[bidx^2] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aba86e885f91ae8aefc51ee703cd1361f">c_RGB2XYZ_D65i</a>[0] + src[1] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aba86e885f91ae8aefc51ee703cd1361f">c_RGB2XYZ_D65i</a>[1] + src[bidx] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aba86e885f91ae8aefc51ee703cd1361f">c_RGB2XYZ_D65i</a>[2], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1bc1de396e04ee0ae780e6abf3333b96">xyz_shift</a>));
<a name="l00811"></a>00811             dst.y = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>&gt;(CV_DESCALE(src[bidx^2] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aba86e885f91ae8aefc51ee703cd1361f">c_RGB2XYZ_D65i</a>[3] + src[1] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aba86e885f91ae8aefc51ee703cd1361f">c_RGB2XYZ_D65i</a>[4] + src[bidx] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aba86e885f91ae8aefc51ee703cd1361f">c_RGB2XYZ_D65i</a>[5], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1bc1de396e04ee0ae780e6abf3333b96">xyz_shift</a>));
<a name="l00812"></a>00812             dst.z = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>&gt;(CV_DESCALE(src[bidx^2] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aba86e885f91ae8aefc51ee703cd1361f">c_RGB2XYZ_D65i</a>[6] + src[1] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aba86e885f91ae8aefc51ee703cd1361f">c_RGB2XYZ_D65i</a>[7] + src[bidx] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aba86e885f91ae8aefc51ee703cd1361f">c_RGB2XYZ_D65i</a>[8], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1bc1de396e04ee0ae780e6abf3333b96">xyz_shift</a>));
<a name="l00813"></a>00813         }
<a name="l00814"></a>00814 
<a name="l00815"></a>00815         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">static</span> __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> RGB2XYZConvert(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> src)
<a name="l00816"></a>00816         {
<a name="l00817"></a>00817             <span class="keyword">const</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> b = 0xffu &amp; (src &gt;&gt; (bidx * 8));
<a name="l00818"></a>00818             <span class="keyword">const</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> g = 0xffu &amp; (src &gt;&gt; 8);
<a name="l00819"></a>00819             <span class="keyword">const</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> r = 0xffu &amp; (src &gt;&gt; ((bidx ^ 2) * 8));
<a name="l00820"></a>00820 
<a name="l00821"></a>00821             <span class="keyword">const</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> x = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(CV_DESCALE(r * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aba86e885f91ae8aefc51ee703cd1361f">c_RGB2XYZ_D65i</a>[0] + g * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aba86e885f91ae8aefc51ee703cd1361f">c_RGB2XYZ_D65i</a>[1] + b * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aba86e885f91ae8aefc51ee703cd1361f">c_RGB2XYZ_D65i</a>[2], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1bc1de396e04ee0ae780e6abf3333b96">xyz_shift</a>));
<a name="l00822"></a>00822             <span class="keyword">const</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> y = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(CV_DESCALE(r * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aba86e885f91ae8aefc51ee703cd1361f">c_RGB2XYZ_D65i</a>[3] + g * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aba86e885f91ae8aefc51ee703cd1361f">c_RGB2XYZ_D65i</a>[4] + b * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aba86e885f91ae8aefc51ee703cd1361f">c_RGB2XYZ_D65i</a>[5], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1bc1de396e04ee0ae780e6abf3333b96">xyz_shift</a>));
<a name="l00823"></a>00823             <span class="keyword">const</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> z = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(CV_DESCALE(r * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aba86e885f91ae8aefc51ee703cd1361f">c_RGB2XYZ_D65i</a>[6] + g * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aba86e885f91ae8aefc51ee703cd1361f">c_RGB2XYZ_D65i</a>[7] + b * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#aba86e885f91ae8aefc51ee703cd1361f">c_RGB2XYZ_D65i</a>[8], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1bc1de396e04ee0ae780e6abf3333b96">xyz_shift</a>));
<a name="l00824"></a>00824 
<a name="l00825"></a>00825             <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> dst = 0;
<a name="l00826"></a>00826 
<a name="l00827"></a>00827             dst |= <a class="code" href="highgui__c_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>;
<a name="l00828"></a>00828             dst |= y &lt;&lt; 8;
<a name="l00829"></a>00829             dst |= z &lt;&lt; 16;
<a name="l00830"></a>00830 
<a name="l00831"></a>00831             <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00832"></a>00832         }
<a name="l00833"></a>00833 
<a name="l00834"></a>00834         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keyword">typename</span> D&gt; <span class="keyword">static</span> __device__ __forceinline__ <span class="keywordtype">void</span> RGB2XYZConvert(<span class="keyword">const</span> <span class="keywordtype">float</span>* src, D&amp; dst)
<a name="l00835"></a>00835         {
<a name="l00836"></a>00836             dst.x = src[bidx^2] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#adb6f9f66aa831e69e6cd0fe39edaa77c">c_RGB2XYZ_D65f</a>[0] + src[1] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#adb6f9f66aa831e69e6cd0fe39edaa77c">c_RGB2XYZ_D65f</a>[1] + src[bidx] * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#adb6f9f66aa831e69e6cd0fe39edaa77c">c_RGB2XYZ_D65f</a>[2];
<a name="l00837"></a>00837             dst.y = src[bidx^2] * c_RGB2XYZ_D65f[3] + src[1] * c_RGB2XYZ_D65f[4] + src[bidx] * c_RGB2XYZ_D65f[5];
<a name="l00838"></a>00838             dst.z = src[bidx^2] * c_RGB2XYZ_D65f[6] + src[1] * c_RGB2XYZ_D65f[7] + src[bidx] * c_RGB2XYZ_D65f[8];
<a name="l00839"></a>00839         }
<a name="l00840"></a>00840 
<a name="l00841"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_x_y_z.html">00841</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keywordtype">int</span> scn, <span class="keywordtype">int</span> dcn, <span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_x_y_z.html">RGB2XYZ</a>
<a name="l00842"></a>00842             : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;T, scn&gt;::vec_type, typename TypeVec&lt;T, dcn&gt;::vec_type&gt;
<a name="l00843"></a>00843         {
<a name="l00844"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_x_y_z.html#a48cae3965a169587f3a38e9b2df18e99">00844</a>             __device__ __forceinline__ <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_x_y_z.html#a48cae3965a169587f3a38e9b2df18e99">operator()</a>(<span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, scn&gt;::vec_type</a>&amp; src)<span class="keyword"> const</span>
<a name="l00845"></a>00845 <span class="keyword">            </span>{
<a name="l00846"></a>00846                 <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00847"></a>00847 
<a name="l00848"></a>00848                 RGB2XYZConvert&lt;bidx&gt;(&amp;src.x, <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>);
<a name="l00849"></a>00849 
<a name="l00850"></a>00850                 <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00851"></a>00851             }
<a name="l00852"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_x_y_z.html#a7f543b26251a07cfeda1ba8f7c226f8b">00852</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_x_y_z.html#a7f543b26251a07cfeda1ba8f7c226f8b">RGB2XYZ</a>()
<a name="l00853"></a>00853                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l00854"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_x_y_z.html#ab314bc1aa2f41d18927efe636e5a9e72">00854</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_x_y_z.html#a7f543b26251a07cfeda1ba8f7c226f8b">RGB2XYZ</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_x_y_z.html">RGB2XYZ</a>&amp; other_)
<a name="l00855"></a>00855                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l00856"></a>00856         };
<a name="l00857"></a>00857 
<a name="l00858"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_x_y_z_3_01uchar_00_014_00_014_00_01bidx_01_4.html">00858</a>         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_x_y_z.html">RGB2XYZ</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>, 4, 4, bidx&gt; : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;uint, uint&gt;
<a name="l00859"></a>00859         {
<a name="l00860"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_x_y_z_3_01uchar_00_014_00_014_00_01bidx_01_4.html#a2a6132fd0d942590399a4fb083231e57">00860</a>             __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_x_y_z.html#a48cae3965a169587f3a38e9b2df18e99">operator()</a>(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> src)<span class="keyword"> const</span>
<a name="l00861"></a>00861 <span class="keyword">            </span>{
<a name="l00862"></a>00862                 <span class="keywordflow">return</span> RGB2XYZConvert&lt;bidx&gt;(<a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>);
<a name="l00863"></a>00863             }
<a name="l00864"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_x_y_z_3_01uchar_00_014_00_014_00_01bidx_01_4.html#a5c772a654b2df2e196bb34c8ee870bcd">00864</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_x_y_z_3_01uchar_00_014_00_014_00_01bidx_01_4.html#a5c772a654b2df2e196bb34c8ee870bcd">RGB2XYZ</a>() : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l00865"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_x_y_z_3_01uchar_00_014_00_014_00_01bidx_01_4.html#af7621efeed606856ecb09bc2a9f3e60d">00865</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_x_y_z_3_01uchar_00_014_00_014_00_01bidx_01_4.html#af7621efeed606856ecb09bc2a9f3e60d">RGB2XYZ</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_x_y_z.html">RGB2XYZ</a>&amp; other_) : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l00866"></a>00866         };
<a name="l00867"></a>00867     }
<a name="l00868"></a>00868 
<a name="l00869"></a>00869 <span class="preprocessor">#define OPENCV_GPU_IMPLEMENT_RGB2XYZ_TRAITS(name, scn, dcn, bidx) \</span>
<a name="l00870"></a>00870 <span class="preprocessor">    template &lt;typename T&gt; struct name ## _traits \</span>
<a name="l00871"></a>00871 <span class="preprocessor">    { \</span>
<a name="l00872"></a>00872 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::RGB2XYZ&lt;T, scn, dcn, bidx&gt; functor_type; \</span>
<a name="l00873"></a>00873 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l00874"></a>00874 <span class="preprocessor">        { \</span>
<a name="l00875"></a>00875 <span class="preprocessor">            return functor_type(); \</span>
<a name="l00876"></a>00876 <span class="preprocessor">        } \</span>
<a name="l00877"></a>00877 <span class="preprocessor">    };</span>
<a name="l00878"></a>00878 <span class="preprocessor"></span>
<a name="l00879"></a>00879     <span class="keyword">namespace </span>color_detail
<a name="l00880"></a>00880     {
<a name="l00881"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a067fa5d09da16d205180ae47bedaa98b">00881</a>         __constant__ <span class="keywordtype">float</span> <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a067fa5d09da16d205180ae47bedaa98b">c_XYZ2sRGB_D65f</a>[9] = { 3.240479f, -1.53715f, -0.498535f, -0.969256f, 1.875991f, 0.041556f, 0.055648f, -0.204043f, 1.057311f };
<a name="l00882"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae0db03981151682f94eadca3780cf813">00882</a>         __constant__ <span class="keywordtype">int</span>   <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae0db03981151682f94eadca3780cf813">c_XYZ2sRGB_D65i</a>[9] = { 13273, -6296, -2042, -3970, 7684, 170, 228, -836, 4331 };
<a name="l00883"></a>00883 
<a name="l00884"></a>00884         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keyword">typename</span> T, <span class="keyword">typename</span> D&gt; <span class="keyword">static</span> __device__ __forceinline__ <span class="keywordtype">void</span> XYZ2RGBConvert(<span class="keyword">const</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>&amp; src, D* dst)
<a name="l00885"></a>00885         {
<a name="l00886"></a>00886             dst[bidx^2] = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;D&gt;(CV_DESCALE(src.x * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae0db03981151682f94eadca3780cf813">c_XYZ2sRGB_D65i</a>[0] + src.y * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae0db03981151682f94eadca3780cf813">c_XYZ2sRGB_D65i</a>[1] + src.z * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae0db03981151682f94eadca3780cf813">c_XYZ2sRGB_D65i</a>[2], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1bc1de396e04ee0ae780e6abf3333b96">xyz_shift</a>));
<a name="l00887"></a>00887             dst[1]      = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;D&gt;(CV_DESCALE(src.x * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae0db03981151682f94eadca3780cf813">c_XYZ2sRGB_D65i</a>[3] + src.y * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae0db03981151682f94eadca3780cf813">c_XYZ2sRGB_D65i</a>[4] + src.z * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae0db03981151682f94eadca3780cf813">c_XYZ2sRGB_D65i</a>[5], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1bc1de396e04ee0ae780e6abf3333b96">xyz_shift</a>));
<a name="l00888"></a>00888             dst[bidx]   = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;D&gt;(CV_DESCALE(src.x * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae0db03981151682f94eadca3780cf813">c_XYZ2sRGB_D65i</a>[6] + src.y * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae0db03981151682f94eadca3780cf813">c_XYZ2sRGB_D65i</a>[7] + src.z * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae0db03981151682f94eadca3780cf813">c_XYZ2sRGB_D65i</a>[8], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1bc1de396e04ee0ae780e6abf3333b96">xyz_shift</a>));
<a name="l00889"></a>00889         }
<a name="l00890"></a>00890 
<a name="l00891"></a>00891         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">static</span> __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> XYZ2RGBConvert(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> src)
<a name="l00892"></a>00892         {
<a name="l00893"></a>00893             <span class="keyword">const</span> <span class="keywordtype">int</span> x = 0xff &amp; <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>;
<a name="l00894"></a>00894             <span class="keyword">const</span> <span class="keywordtype">int</span> y = 0xff &amp; (src &gt;&gt; 8);
<a name="l00895"></a>00895             <span class="keyword">const</span> <span class="keywordtype">int</span> z = 0xff &amp; (src &gt;&gt; 16);
<a name="l00896"></a>00896 
<a name="l00897"></a>00897             <span class="keyword">const</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> r = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(CV_DESCALE(x * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae0db03981151682f94eadca3780cf813">c_XYZ2sRGB_D65i</a>[0] + y * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae0db03981151682f94eadca3780cf813">c_XYZ2sRGB_D65i</a>[1] + z * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae0db03981151682f94eadca3780cf813">c_XYZ2sRGB_D65i</a>[2], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1bc1de396e04ee0ae780e6abf3333b96">xyz_shift</a>));
<a name="l00898"></a>00898             <span class="keyword">const</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> g = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(CV_DESCALE(x * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae0db03981151682f94eadca3780cf813">c_XYZ2sRGB_D65i</a>[3] + y * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae0db03981151682f94eadca3780cf813">c_XYZ2sRGB_D65i</a>[4] + z * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae0db03981151682f94eadca3780cf813">c_XYZ2sRGB_D65i</a>[5], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1bc1de396e04ee0ae780e6abf3333b96">xyz_shift</a>));
<a name="l00899"></a>00899             <span class="keyword">const</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> b = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(CV_DESCALE(x * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae0db03981151682f94eadca3780cf813">c_XYZ2sRGB_D65i</a>[6] + y * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae0db03981151682f94eadca3780cf813">c_XYZ2sRGB_D65i</a>[7] + z * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#ae0db03981151682f94eadca3780cf813">c_XYZ2sRGB_D65i</a>[8], <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a0dbfee8c927806ae8a7b17e8386b6570a1bc1de396e04ee0ae780e6abf3333b96">xyz_shift</a>));
<a name="l00900"></a>00900 
<a name="l00901"></a>00901             <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> dst = 0xffu &lt;&lt; 24;
<a name="l00902"></a>00902 
<a name="l00903"></a>00903             dst |= b &lt;&lt; (bidx * 8);
<a name="l00904"></a>00904             dst |= g &lt;&lt; 8;
<a name="l00905"></a>00905             dst |= r &lt;&lt; ((bidx ^ 2) * 8);
<a name="l00906"></a>00906 
<a name="l00907"></a>00907             <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00908"></a>00908         }
<a name="l00909"></a>00909 
<a name="l00910"></a>00910         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keyword">typename</span> T&gt; <span class="keyword">static</span> __device__ __forceinline__ <span class="keywordtype">void</span> XYZ2RGBConvert(<span class="keyword">const</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>&amp; src, <span class="keywordtype">float</span>* dst)
<a name="l00911"></a>00911         {
<a name="l00912"></a>00912             dst[bidx^2] = src.x * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a067fa5d09da16d205180ae47bedaa98b">c_XYZ2sRGB_D65f</a>[0] + src.y * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a067fa5d09da16d205180ae47bedaa98b">c_XYZ2sRGB_D65f</a>[1] + src.z * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a067fa5d09da16d205180ae47bedaa98b">c_XYZ2sRGB_D65f</a>[2];
<a name="l00913"></a>00913             dst[1]      = src.x * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a067fa5d09da16d205180ae47bedaa98b">c_XYZ2sRGB_D65f</a>[3] + src.y * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a067fa5d09da16d205180ae47bedaa98b">c_XYZ2sRGB_D65f</a>[4] + src.z * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a067fa5d09da16d205180ae47bedaa98b">c_XYZ2sRGB_D65f</a>[5];
<a name="l00914"></a>00914             dst[bidx]   = src.x * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a067fa5d09da16d205180ae47bedaa98b">c_XYZ2sRGB_D65f</a>[6] + src.y * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a067fa5d09da16d205180ae47bedaa98b">c_XYZ2sRGB_D65f</a>[7] + src.z * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a067fa5d09da16d205180ae47bedaa98b">c_XYZ2sRGB_D65f</a>[8];
<a name="l00915"></a>00915         }
<a name="l00916"></a>00916 
<a name="l00917"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_x_y_z2_r_g_b.html">00917</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keywordtype">int</span> scn, <span class="keywordtype">int</span> dcn, <span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_x_y_z2_r_g_b.html">XYZ2RGB</a>
<a name="l00918"></a>00918             : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;T, scn&gt;::vec_type, typename TypeVec&lt;T, dcn&gt;::vec_type&gt;
<a name="l00919"></a>00919         {
<a name="l00920"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_x_y_z2_r_g_b.html#a1c504213d7399b4431800108b49ab79c">00920</a>             __device__ __forceinline__ <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_x_y_z2_r_g_b.html#a1c504213d7399b4431800108b49ab79c">operator()</a>(<span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, scn&gt;::vec_type</a>&amp; src)<span class="keyword"> const</span>
<a name="l00921"></a>00921 <span class="keyword">            </span>{
<a name="l00922"></a>00922                 <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00923"></a>00923 
<a name="l00924"></a>00924                 XYZ2RGBConvert&lt;bidx&gt;(<a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>, &amp;dst.x);
<a name="l00925"></a>00925                 setAlpha(dst, <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html">ColorChannel&lt;T&gt;::max</a>());
<a name="l00926"></a>00926 
<a name="l00927"></a>00927                 <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l00928"></a>00928             }
<a name="l00929"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_x_y_z2_r_g_b.html#a5d6feb501c90510d959e5c8736f68cce">00929</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_x_y_z2_r_g_b.html#a5d6feb501c90510d959e5c8736f68cce">XYZ2RGB</a>()
<a name="l00930"></a>00930                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l00931"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_x_y_z2_r_g_b.html#a4926ff5cc578d56d48a2519c632d6fe1">00931</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_x_y_z2_r_g_b.html#a5d6feb501c90510d959e5c8736f68cce">XYZ2RGB</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_x_y_z2_r_g_b.html">XYZ2RGB</a>&amp; other_)
<a name="l00932"></a>00932                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l00933"></a>00933         };
<a name="l00934"></a>00934 
<a name="l00935"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_x_y_z2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_01_4.html">00935</a>         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_x_y_z2_r_g_b.html">XYZ2RGB</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>, 4, 4, bidx&gt; : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;uint, uint&gt;
<a name="l00936"></a>00936         {
<a name="l00937"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_x_y_z2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_01_4.html#a57a6275d45cc29210717ff3e33c39fc7">00937</a>             __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_x_y_z2_r_g_b.html#a1c504213d7399b4431800108b49ab79c">operator()</a>(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> src)<span class="keyword"> const</span>
<a name="l00938"></a>00938 <span class="keyword">            </span>{
<a name="l00939"></a>00939                 <span class="keywordflow">return</span> XYZ2RGBConvert&lt;bidx&gt;(<a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>);
<a name="l00940"></a>00940             }
<a name="l00941"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_x_y_z2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_01_4.html#aaa0cba69a034b1decce27058a7d7afcf">00941</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_x_y_z2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_01_4.html#aaa0cba69a034b1decce27058a7d7afcf">XYZ2RGB</a>() : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l00942"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_x_y_z2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_01_4.html#aa1a8c2259cf2701f125df26bf48365e1">00942</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_x_y_z2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_01_4.html#aa1a8c2259cf2701f125df26bf48365e1">XYZ2RGB</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_x_y_z2_r_g_b.html">XYZ2RGB</a>&amp; other_) : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l00943"></a>00943         };
<a name="l00944"></a>00944     }
<a name="l00945"></a>00945 
<a name="l00946"></a>00946 <span class="preprocessor">#define OPENCV_GPU_IMPLEMENT_XYZ2RGB_TRAITS(name, scn, dcn, bidx) \</span>
<a name="l00947"></a>00947 <span class="preprocessor">    template &lt;typename T&gt; struct name ## _traits \</span>
<a name="l00948"></a>00948 <span class="preprocessor">    { \</span>
<a name="l00949"></a>00949 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::XYZ2RGB&lt;T, scn, dcn, bidx&gt; functor_type; \</span>
<a name="l00950"></a>00950 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l00951"></a>00951 <span class="preprocessor">        { \</span>
<a name="l00952"></a>00952 <span class="preprocessor">            return functor_type(); \</span>
<a name="l00953"></a>00953 <span class="preprocessor">        } \</span>
<a name="l00954"></a>00954 <span class="preprocessor">    };</span>
<a name="l00955"></a>00955 <span class="preprocessor"></span>
<a name="l00957"></a>00957 
<a name="l00958"></a>00958     <span class="keyword">namespace </span>color_detail
<a name="l00959"></a>00959     {
<a name="l00960"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a4b72f07cdf038e68528bcf73c1eb53f9">00960</a>         __constant__ <span class="keywordtype">int</span> <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a4b72f07cdf038e68528bcf73c1eb53f9">c_HsvDivTable</a>   [256] = {0, 1044480, 522240, 348160, 261120, 208896, 174080, 149211, 130560, 116053, 104448, 94953, 87040, 80345, 74606, 69632, 65280, 61440, 58027, 54973, 52224, 49737, 47476, 45412, 43520, 41779, 40172, 38684, 37303, 36017, 34816, 33693, 32640, 31651, 30720, 29842, 29013, 28229, 27486, 26782, 26112, 25475, 24869, 24290, 23738, 23211, 22706, 22223, 21760, 21316, 20890, 20480, 20086, 19707, 19342, 18991, 18651, 18324, 18008, 17703, 17408, 17123, 16846, 16579, 16320, 16069, 15825, 15589, 15360, 15137, 14921, 14711, 14507, 14308, 14115, 13926, 13743, 13565, 13391, 13221, 13056, 12895, 12738, 12584, 12434, 12288, 12145, 12006, 11869, 11736, 11605, 11478, 11353, 11231, 11111, 10995, 10880, 10768, 10658, 10550, 10445, 10341, 10240, 10141, 10043, 9947, 9854, 9761, 9671, 9582, 9495, 9410, 9326, 9243, 9162, 9082, 9004, 8927, 8852, 8777, 8704, 8632, 8561, 8492, 8423, 8356, 8290, 8224, 8160, 8097, 8034, 7973, 7913, 7853, 7795, 7737, 7680, 7624, 7569, 7514, 7461, 7408, 7355, 7304, 7253, 7203, 7154, 7105, 7057, 7010, 6963, 6917, 6872, 6827, 6782, 6739, 6695, 6653, 6611, 6569, 6528, 6487, 6447, 6408, 6369, 6330, 6292, 6254, 6217, 6180, 6144, 6108, 6073, 6037, 6003, 5968, 5935, 5901, 5868, 5835, 5803, 5771, 5739, 5708, 5677, 5646, 5615, 5585, 5556, 5526, 5497, 5468, 5440, 5412, 5384, 5356, 5329, 5302, 5275, 5249, 5222, 5196, 5171, 5145, 5120, 5095, 5070, 5046, 5022, 4998, 4974, 4950, 4927, 4904, 4881, 4858, 4836, 4813, 4791, 4769, 4748, 4726, 4705, 4684, 4663, 4642, 4622, 4601, 4581, 4561, 4541, 4522, 4502, 4483, 4464, 4445, 4426, 4407, 4389, 4370, 4352, 4334, 4316, 4298, 4281, 4263, 4246, 4229, 4212, 4195, 4178, 4161, 4145, 4128, 4112, 4096};
<a name="l00961"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#abd5c2e4a272bbff844c98d0fccdcb3fa">00961</a>         __constant__ <span class="keywordtype">int</span> <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#abd5c2e4a272bbff844c98d0fccdcb3fa">c_HsvDivTable180</a>[256] = {0, 122880, 61440, 40960, 30720, 24576, 20480, 17554, 15360, 13653, 12288, 11171, 10240, 9452, 8777, 8192, 7680, 7228, 6827, 6467, 6144, 5851, 5585, 5343, 5120, 4915, 4726, 4551, 4389, 4237, 4096, 3964, 3840, 3724, 3614, 3511, 3413, 3321, 3234, 3151, 3072, 2997, 2926, 2858, 2793, 2731, 2671, 2614, 2560, 2508, 2458, 2409, 2363, 2318, 2276, 2234, 2194, 2156, 2119, 2083, 2048, 2014, 1982, 1950, 1920, 1890, 1862, 1834, 1807, 1781, 1755, 1731, 1707, 1683, 1661, 1638, 1617, 1596, 1575, 1555, 1536, 1517, 1499, 1480, 1463, 1446, 1429, 1412, 1396, 1381, 1365, 1350, 1336, 1321, 1307, 1293, 1280, 1267, 1254, 1241, 1229, 1217, 1205, 1193, 1182, 1170, 1159, 1148, 1138, 1127, 1117, 1107, 1097, 1087, 1078, 1069, 1059, 1050, 1041, 1033, 1024, 1016, 1007, 999, 991, 983, 975, 968, 960, 953, 945, 938, 931, 924, 917, 910, 904, 897, 890, 884, 878, 871, 865, 859, 853, 847, 842, 836, 830, 825, 819, 814, 808, 803, 798, 793, 788, 783, 778, 773, 768, 763, 759, 754, 749, 745, 740, 736, 731, 727, 723, 719, 714, 710, 706, 702, 698, 694, 690, 686, 683, 679, 675, 671, 668, 664, 661, 657, 654, 650, 647, 643, 640, 637, 633, 630, 627, 624, 621, 617, 614, 611, 608, 605, 602, 599, 597, 594, 591, 588, 585, 582, 580, 577, 574, 572, 569, 566, 564, 561, 559, 556, 554, 551, 549, 546, 544, 541, 539, 537, 534, 532, 530, 527, 525, 523, 521, 518, 516, 514, 512, 510, 508, 506, 504, 502, 500, 497, 495, 493, 492, 490, 488, 486, 484, 482};
<a name="l00962"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a06dee60b5257a350004f240de431795f">00962</a>         __constant__ <span class="keywordtype">int</span> <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a06dee60b5257a350004f240de431795f">c_HsvDivTable256</a>[256] = {0, 174763, 87381, 58254, 43691, 34953, 29127, 24966, 21845, 19418, 17476, 15888, 14564, 13443, 12483, 11651, 10923, 10280, 9709, 9198, 8738, 8322, 7944, 7598, 7282, 6991, 6722, 6473, 6242, 6026, 5825, 5638, 5461, 5296, 5140, 4993, 4855, 4723, 4599, 4481, 4369, 4263, 4161, 4064, 3972, 3884, 3799, 3718, 3641, 3567, 3495, 3427, 3361, 3297, 3236, 3178, 3121, 3066, 3013, 2962, 2913, 2865, 2819, 2774, 2731, 2689, 2648, 2608, 2570, 2533, 2497, 2461, 2427, 2394, 2362, 2330, 2300, 2270, 2241, 2212, 2185, 2158, 2131, 2106, 2081, 2056, 2032, 2009, 1986, 1964, 1942, 1920, 1900, 1879, 1859, 1840, 1820, 1802, 1783, 1765, 1748, 1730, 1713, 1697, 1680, 1664, 1649, 1633, 1618, 1603, 1589, 1574, 1560, 1547, 1533, 1520, 1507, 1494, 1481, 1469, 1456, 1444, 1432, 1421, 1409, 1398, 1387, 1376, 1365, 1355, 1344, 1334, 1324, 1314, 1304, 1295, 1285, 1276, 1266, 1257, 1248, 1239, 1231, 1222, 1214, 1205, 1197, 1189, 1181, 1173, 1165, 1157, 1150, 1142, 1135, 1128, 1120, 1113, 1106, 1099, 1092, 1085, 1079, 1072, 1066, 1059, 1053, 1046, 1040, 1034, 1028, 1022, 1016, 1010, 1004, 999, 993, 987, 982, 976, 971, 966, 960, 955, 950, 945, 940, 935, 930, 925, 920, 915, 910, 906, 901, 896, 892, 887, 883, 878, 874, 869, 865, 861, 857, 853, 848, 844, 840, 836, 832, 828, 824, 820, 817, 813, 809, 805, 802, 798, 794, 791, 787, 784, 780, 777, 773, 770, 767, 763, 760, 757, 753, 750, 747, 744, 741, 737, 734, 731, 728, 725, 722, 719, 716, 713, 710, 708, 705, 702, 699, 696, 694, 691, 688, 685};
<a name="l00963"></a>00963 
<a name="l00964"></a>00964         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> hr, <span class="keyword">typename</span> D&gt; <span class="keyword">static</span> __device__ <span class="keywordtype">void</span> RGB2HSVConvert(<span class="keyword">const</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>* src, D&amp; dst)
<a name="l00965"></a>00965         {
<a name="l00966"></a>00966             <span class="keyword">const</span> <span class="keywordtype">int</span> hsv_shift = 12;
<a name="l00967"></a>00967             <span class="keyword">const</span> <span class="keywordtype">int</span>* hdiv_table = hr == 180 ? <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#abd5c2e4a272bbff844c98d0fccdcb3fa">c_HsvDivTable180</a> : <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a06dee60b5257a350004f240de431795f">c_HsvDivTable256</a>;
<a name="l00968"></a>00968 
<a name="l00969"></a>00969             <span class="keywordtype">int</span> b = src[bidx], g = src[1], r = src[bidx^2];
<a name="l00970"></a>00970             <span class="keywordtype">int</span> h, s, v = <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>;
<a name="l00971"></a>00971             <span class="keywordtype">int</span> vmin = <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, diff;
<a name="l00972"></a>00972             <span class="keywordtype">int</span> vr, vg;
<a name="l00973"></a>00973 
<a name="l00974"></a>00974             v = <a class="code" href="namespacecv_1_1gpu.html#a706c9def6816de566be2671b75ec5309" title="computes per-element maximum of two arrays (dst = max(src1, src2))">::max</a>(v, g);
<a name="l00975"></a>00975             v = <a class="code" href="namespacecv_1_1gpu.html#a706c9def6816de566be2671b75ec5309" title="computes per-element maximum of two arrays (dst = max(src1, src2))">::max</a>(v, r);
<a name="l00976"></a>00976             vmin = <a class="code" href="namespacecv_1_1gpu.html#a8d100341ab11a730a3c90b75d5890a8c" title="computes per-element minimum of two arrays (dst = min(src1, src2))">::min</a>(vmin, g);
<a name="l00977"></a>00977             vmin = <a class="code" href="namespacecv_1_1gpu.html#a8d100341ab11a730a3c90b75d5890a8c" title="computes per-element minimum of two arrays (dst = min(src1, src2))">::min</a>(vmin, r);
<a name="l00978"></a>00978 
<a name="l00979"></a>00979             diff = v - vmin;
<a name="l00980"></a>00980             vr = (v == <a class="code" href="core__c_8h.html#a54709f3b06b33b66763f1613cc7fb571">r</a>) * -1;
<a name="l00981"></a>00981             vg = (v == g) * -1;
<a name="l00982"></a>00982 
<a name="l00983"></a>00983             s = (diff * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a4b72f07cdf038e68528bcf73c1eb53f9">c_HsvDivTable</a>[v] + (1 &lt;&lt; (hsv_shift-1))) &gt;&gt; hsv_shift;
<a name="l00984"></a>00984             h = (vr &amp; (g - <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>)) + (~vr &amp; ((vg &amp; (b - r + 2 * diff)) + ((~vg) &amp; (r - g + 4 * diff))));
<a name="l00985"></a>00985             h = (h * hdiv_table[diff] + (1 &lt;&lt; (hsv_shift-1))) &gt;&gt; hsv_shift;
<a name="l00986"></a>00986             h += (h &lt; 0) * hr;
<a name="l00987"></a>00987 
<a name="l00988"></a>00988             dst.x = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>&gt;(h);
<a name="l00989"></a>00989             dst.y = (<a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>)s;
<a name="l00990"></a>00990             dst.z = (<a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>)v;
<a name="l00991"></a>00991         }
<a name="l00992"></a>00992 
<a name="l00993"></a>00993         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> hr&gt; <span class="keyword">static</span> __device__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> RGB2HSVConvert(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> src)
<a name="l00994"></a>00994         {
<a name="l00995"></a>00995             <span class="keyword">const</span> <span class="keywordtype">int</span> hsv_shift = 12;
<a name="l00996"></a>00996             <span class="keyword">const</span> <span class="keywordtype">int</span>* hdiv_table = hr == 180 ? <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#abd5c2e4a272bbff844c98d0fccdcb3fa">c_HsvDivTable180</a> : <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a06dee60b5257a350004f240de431795f">c_HsvDivTable256</a>;
<a name="l00997"></a>00997 
<a name="l00998"></a>00998             <span class="keyword">const</span> <span class="keywordtype">int</span> b = 0xff &amp; (src &gt;&gt; (bidx * 8));
<a name="l00999"></a>00999             <span class="keyword">const</span> <span class="keywordtype">int</span> g = 0xff &amp; (src &gt;&gt; 8);
<a name="l01000"></a>01000             <span class="keyword">const</span> <span class="keywordtype">int</span> r = 0xff &amp; (src &gt;&gt; ((bidx ^ 2) * 8));
<a name="l01001"></a>01001 
<a name="l01002"></a>01002             <span class="keywordtype">int</span> h, s, v = <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>;
<a name="l01003"></a>01003             <span class="keywordtype">int</span> vmin = <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>, diff;
<a name="l01004"></a>01004             <span class="keywordtype">int</span> vr, vg;
<a name="l01005"></a>01005 
<a name="l01006"></a>01006             v = <a class="code" href="namespacecv_1_1gpu.html#a706c9def6816de566be2671b75ec5309" title="computes per-element maximum of two arrays (dst = max(src1, src2))">::max</a>(v, g);
<a name="l01007"></a>01007             v = <a class="code" href="namespacecv_1_1gpu.html#a706c9def6816de566be2671b75ec5309" title="computes per-element maximum of two arrays (dst = max(src1, src2))">::max</a>(v, r);
<a name="l01008"></a>01008             vmin = <a class="code" href="namespacecv_1_1gpu.html#a8d100341ab11a730a3c90b75d5890a8c" title="computes per-element minimum of two arrays (dst = min(src1, src2))">::min</a>(vmin, g);
<a name="l01009"></a>01009             vmin = <a class="code" href="namespacecv_1_1gpu.html#a8d100341ab11a730a3c90b75d5890a8c" title="computes per-element minimum of two arrays (dst = min(src1, src2))">::min</a>(vmin, r);
<a name="l01010"></a>01010 
<a name="l01011"></a>01011             diff = v - vmin;
<a name="l01012"></a>01012             vr = (v == <a class="code" href="core__c_8h.html#a54709f3b06b33b66763f1613cc7fb571">r</a>) * -1;
<a name="l01013"></a>01013             vg = (v == g) * -1;
<a name="l01014"></a>01014 
<a name="l01015"></a>01015             s = (diff * <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a4b72f07cdf038e68528bcf73c1eb53f9">c_HsvDivTable</a>[v] + (1 &lt;&lt; (hsv_shift-1))) &gt;&gt; hsv_shift;
<a name="l01016"></a>01016             h = (vr &amp; (g - <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>)) + (~vr &amp; ((vg &amp; (b - r + 2 * diff)) + ((~vg) &amp; (r - g + 4 * diff))));
<a name="l01017"></a>01017             h = (h * hdiv_table[diff] + (1 &lt;&lt; (hsv_shift-1))) &gt;&gt; hsv_shift;
<a name="l01018"></a>01018             h += (h &lt; 0) * hr;
<a name="l01019"></a>01019 
<a name="l01020"></a>01020             <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> dst = 0;
<a name="l01021"></a>01021 
<a name="l01022"></a>01022             dst |= <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(h);
<a name="l01023"></a>01023             dst |= (0xffu &amp; s) &lt;&lt; 8;
<a name="l01024"></a>01024             dst |= (0xffu &amp; v) &lt;&lt; 16;
<a name="l01025"></a>01025 
<a name="l01026"></a>01026             <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l01027"></a>01027         }
<a name="l01028"></a>01028 
<a name="l01029"></a>01029         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> hr, <span class="keyword">typename</span> D&gt; <span class="keyword">static</span> __device__ <span class="keywordtype">void</span> RGB2HSVConvert(<span class="keyword">const</span> <span class="keywordtype">float</span>* src, D&amp; dst)
<a name="l01030"></a>01030         {
<a name="l01031"></a>01031             <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="core__c_8h.html#ad232f4a0c75619f6771b77f139c428c1">hscale</a> = hr * (1.f / 360.f);
<a name="l01032"></a>01032 
<a name="l01033"></a>01033             <span class="keywordtype">float</span> b = src[bidx], g = src[1], r = src[bidx^2];
<a name="l01034"></a>01034             <span class="keywordtype">float</span> h, s, v;
<a name="l01035"></a>01035 
<a name="l01036"></a>01036             <span class="keywordtype">float</span> vmin, diff;
<a name="l01037"></a>01037 
<a name="l01038"></a>01038             v = vmin = <a class="code" href="core__c_8h.html#a54709f3b06b33b66763f1613cc7fb571">r</a>;
<a name="l01039"></a>01039             v = fmax(v, g);
<a name="l01040"></a>01040             v = fmax(v, b);
<a name="l01041"></a>01041             vmin = fmin(vmin, g);
<a name="l01042"></a>01042             vmin = fmin(vmin, b);
<a name="l01043"></a>01043 
<a name="l01044"></a>01044             diff = v - vmin;
<a name="l01045"></a>01045             s = diff / (<a class="code" href="namespacecv_1_1gpu_1_1device.html#a977e2629b1ece7a2a2d4b2cc8bc47089">float</a>)(::fabs(v) + <a class="code" href="structcv_1_1gpu_1_1device_1_1numeric__limits_3_01float_01_4.html#ac6e693e459828d215803ba593a076d26">numeric_limits&lt;float&gt;::epsilon</a>());
<a name="l01046"></a>01046             diff = (<a class="code" href="namespacecv_1_1gpu_1_1device.html#a977e2629b1ece7a2a2d4b2cc8bc47089">float</a>)(60. / (diff + <a class="code" href="structcv_1_1gpu_1_1device_1_1numeric__limits_3_01float_01_4.html#ac6e693e459828d215803ba593a076d26">numeric_limits&lt;float&gt;::epsilon</a>()));
<a name="l01047"></a>01047 
<a name="l01048"></a>01048             h  = (v == <a class="code" href="core__c_8h.html#a54709f3b06b33b66763f1613cc7fb571">r</a>) * (g - b) * diff;
<a name="l01049"></a>01049             h += (v != r &amp;&amp; v == g) * ((b - r) * diff + 120.f);
<a name="l01050"></a>01050             h += (v != r &amp;&amp; v != g) * ((r - g) * diff + 240.f);
<a name="l01051"></a>01051             h += (h &lt; 0) * 360.f;
<a name="l01052"></a>01052 
<a name="l01053"></a>01053             dst.x = h * <a class="code" href="core__c_8h.html#ad232f4a0c75619f6771b77f139c428c1">hscale</a>;
<a name="l01054"></a>01054             dst.y = s;
<a name="l01055"></a>01055             dst.z = v;
<a name="l01056"></a>01056         }
<a name="l01057"></a>01057 
<a name="l01058"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_s_v.html">01058</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keywordtype">int</span> scn, <span class="keywordtype">int</span> dcn, <span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> hr&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_s_v.html">RGB2HSV</a>
<a name="l01059"></a>01059             : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;T, scn&gt;::vec_type, typename TypeVec&lt;T, dcn&gt;::vec_type&gt;
<a name="l01060"></a>01060         {
<a name="l01061"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_s_v.html#a51fa9b0ee1e0de31bade9b6a42034452">01061</a>             __device__ __forceinline__ <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_s_v.html#a51fa9b0ee1e0de31bade9b6a42034452">operator()</a>(<span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, scn&gt;::vec_type</a>&amp; src)<span class="keyword"> const</span>
<a name="l01062"></a>01062 <span class="keyword">            </span>{
<a name="l01063"></a>01063                 <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l01064"></a>01064 
<a name="l01065"></a>01065                 RGB2HSVConvert&lt;bidx, hr&gt;(&amp;src.x, <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>);
<a name="l01066"></a>01066 
<a name="l01067"></a>01067                 <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l01068"></a>01068             }
<a name="l01069"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_s_v.html#a7e6683b829fe71de0e0eef912c961cee">01069</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_s_v.html#a7e6683b829fe71de0e0eef912c961cee">RGB2HSV</a>()
<a name="l01070"></a>01070                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l01071"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_s_v.html#a79cd8a20ff8fa296b9bf90294e9e1ad8">01071</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_s_v.html#a7e6683b829fe71de0e0eef912c961cee">RGB2HSV</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_s_v.html">RGB2HSV</a>&amp; other_)
<a name="l01072"></a>01072                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l01073"></a>01073         };
<a name="l01074"></a>01074 
<a name="l01075"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_s_v_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html">01075</a>         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> hr&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_s_v.html">RGB2HSV</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>, 4, 4, bidx, hr&gt; : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;uint, uint&gt;
<a name="l01076"></a>01076         {
<a name="l01077"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_s_v_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html#a5aa9d70a500338bb1d000a18ae914404">01077</a>             __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_s_v.html#a51fa9b0ee1e0de31bade9b6a42034452">operator()</a>(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> src)<span class="keyword"> const</span>
<a name="l01078"></a>01078 <span class="keyword">            </span>{
<a name="l01079"></a>01079                 <span class="keywordflow">return</span> RGB2HSVConvert&lt;bidx, hr&gt;(<a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>);
<a name="l01080"></a>01080             }
<a name="l01081"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_s_v_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html#ae574eb6c05ca411ff02924e0b7f451f1">01081</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_s_v_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html#ae574eb6c05ca411ff02924e0b7f451f1">RGB2HSV</a>():<a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l01082"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_s_v_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html#a6b52796f53ee2b157adf0e52058438dd">01082</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_s_v_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html#a6b52796f53ee2b157adf0e52058438dd">RGB2HSV</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_s_v.html">RGB2HSV</a>&amp; other_):<a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l01083"></a>01083         };
<a name="l01084"></a>01084     }
<a name="l01085"></a>01085 
<a name="l01086"></a>01086 <span class="preprocessor">#define OPENCV_GPU_IMPLEMENT_RGB2HSV_TRAITS(name, scn, dcn, bidx) \</span>
<a name="l01087"></a>01087 <span class="preprocessor">    template &lt;typename T&gt; struct name ## _traits \</span>
<a name="l01088"></a>01088 <span class="preprocessor">    { \</span>
<a name="l01089"></a>01089 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::RGB2HSV&lt;T, scn, dcn, bidx, 180&gt; functor_type; \</span>
<a name="l01090"></a>01090 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l01091"></a>01091 <span class="preprocessor">        { \</span>
<a name="l01092"></a>01092 <span class="preprocessor">            return functor_type(); \</span>
<a name="l01093"></a>01093 <span class="preprocessor">        } \</span>
<a name="l01094"></a>01094 <span class="preprocessor">    }; \</span>
<a name="l01095"></a>01095 <span class="preprocessor">    template &lt;typename T&gt; struct name ## _full_traits \</span>
<a name="l01096"></a>01096 <span class="preprocessor">    { \</span>
<a name="l01097"></a>01097 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::RGB2HSV&lt;T, scn, dcn, bidx, 256&gt; functor_type; \</span>
<a name="l01098"></a>01098 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l01099"></a>01099 <span class="preprocessor">        { \</span>
<a name="l01100"></a>01100 <span class="preprocessor">            return functor_type(); \</span>
<a name="l01101"></a>01101 <span class="preprocessor">        } \</span>
<a name="l01102"></a>01102 <span class="preprocessor">    }; \</span>
<a name="l01103"></a>01103 <span class="preprocessor">    template &lt;&gt; struct name ## _traits&lt;float&gt; \</span>
<a name="l01104"></a>01104 <span class="preprocessor">    { \</span>
<a name="l01105"></a>01105 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::RGB2HSV&lt;float, scn, dcn, bidx, 360&gt; functor_type; \</span>
<a name="l01106"></a>01106 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l01107"></a>01107 <span class="preprocessor">        { \</span>
<a name="l01108"></a>01108 <span class="preprocessor">            return functor_type(); \</span>
<a name="l01109"></a>01109 <span class="preprocessor">        } \</span>
<a name="l01110"></a>01110 <span class="preprocessor">    }; \</span>
<a name="l01111"></a>01111 <span class="preprocessor">    template &lt;&gt; struct name ## _full_traits&lt;float&gt; \</span>
<a name="l01112"></a>01112 <span class="preprocessor">    { \</span>
<a name="l01113"></a>01113 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::RGB2HSV&lt;float, scn, dcn, bidx, 360&gt; functor_type; \</span>
<a name="l01114"></a>01114 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l01115"></a>01115 <span class="preprocessor">        { \</span>
<a name="l01116"></a>01116 <span class="preprocessor">            return functor_type(); \</span>
<a name="l01117"></a>01117 <span class="preprocessor">        } \</span>
<a name="l01118"></a>01118 <span class="preprocessor">    };</span>
<a name="l01119"></a>01119 <span class="preprocessor"></span>
<a name="l01120"></a>01120     <span class="keyword">namespace </span>color_detail
<a name="l01121"></a>01121     {
<a name="l01122"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a861e8aa3b3c482b9a62dce1125486af7">01122</a>         __constant__ <span class="keywordtype">int</span> <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a861e8aa3b3c482b9a62dce1125486af7">c_HsvSectorData</a>[6][3] = { {1,3,0}, {1,0,2}, {3,0,1}, {0,2,1}, {0,1,3}, {2,1,0} };
<a name="l01123"></a>01123 
<a name="l01124"></a>01124         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> hr, <span class="keyword">typename</span> T&gt; <span class="keyword">static</span> __device__ <span class="keywordtype">void</span> HSV2RGBConvert(<span class="keyword">const</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>&amp; src, <span class="keywordtype">float</span>* dst)
<a name="l01125"></a>01125         {
<a name="l01126"></a>01126             <span class="keyword">const</span> <span class="keywordtype">float</span> hscale = 6.f / hr;
<a name="l01127"></a>01127 
<a name="l01128"></a>01128             <span class="keywordtype">float</span> h = src.x, s = src.y, v = src.z;
<a name="l01129"></a>01129             <span class="keywordtype">float</span> b = v, g = v, r = v;
<a name="l01130"></a>01130 
<a name="l01131"></a>01131             <span class="keywordflow">if</span> (s != 0)
<a name="l01132"></a>01132             {
<a name="l01133"></a>01133                 h *= <a class="code" href="core__c_8h.html#ad232f4a0c75619f6771b77f139c428c1">hscale</a>;
<a name="l01134"></a>01134 
<a name="l01135"></a>01135                 <span class="keywordflow">if</span>( h &lt; 0 )
<a name="l01136"></a>01136                     <span class="keywordflow">do</span> h += 6; <span class="keywordflow">while</span>( h &lt; 0 );
<a name="l01137"></a>01137                 <span class="keywordflow">else</span> <span class="keywordflow">if</span>( h &gt;= 6 )
<a name="l01138"></a>01138                     <span class="keywordflow">do</span> h -= 6; <span class="keywordflow">while</span>( h &gt;= 6 );
<a name="l01139"></a>01139 
<a name="l01140"></a>01140                 <span class="keywordtype">int</span> sector = __float2int_rd(h);
<a name="l01141"></a>01141                 h -= sector;
<a name="l01142"></a>01142 
<a name="l01143"></a>01143                 <span class="keywordflow">if</span> ( (<span class="keywordtype">unsigned</span>)sector &gt;= 6u )
<a name="l01144"></a>01144                 {
<a name="l01145"></a>01145                     sector = 0;
<a name="l01146"></a>01146                     h = 0.f;
<a name="l01147"></a>01147                 }
<a name="l01148"></a>01148 
<a name="l01149"></a>01149                 <span class="keywordtype">float</span> tab[4];
<a name="l01150"></a>01150                 tab[0] = v;
<a name="l01151"></a>01151                 tab[1] = v * (1.f - s);
<a name="l01152"></a>01152                 tab[2] = v * (1.f - s * h);
<a name="l01153"></a>01153                 tab[3] = v * (1.f - s * (1.f - h));
<a name="l01154"></a>01154 
<a name="l01155"></a>01155                 b = tab[<a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#a861e8aa3b3c482b9a62dce1125486af7">c_HsvSectorData</a>[sector][0]];
<a name="l01156"></a>01156                 g = tab[c_HsvSectorData[sector][1]];
<a name="l01157"></a>01157                 r = tab[c_HsvSectorData[sector][2]];
<a name="l01158"></a>01158             }
<a name="l01159"></a>01159 
<a name="l01160"></a>01160             dst[bidx] = <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>;
<a name="l01161"></a>01161             dst[1] = g;
<a name="l01162"></a>01162             dst[bidx^2] = <a class="code" href="core__c_8h.html#a54709f3b06b33b66763f1613cc7fb571">r</a>;
<a name="l01163"></a>01163         }
<a name="l01164"></a>01164 
<a name="l01165"></a>01165         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> HR, <span class="keyword">typename</span> T&gt; <span class="keyword">static</span> __device__ <span class="keywordtype">void</span> HSV2RGBConvert(<span class="keyword">const</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>&amp; src, <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* dst)
<a name="l01166"></a>01166         {
<a name="l01167"></a>01167             float3 buf;
<a name="l01168"></a>01168 
<a name="l01169"></a>01169             buf.x = src.x;
<a name="l01170"></a>01170             buf.y = src.y * (1.f / 255.f);
<a name="l01171"></a>01171             buf.z = src.z * (1.f / 255.f);
<a name="l01172"></a>01172 
<a name="l01173"></a>01173             HSV2RGBConvert&lt;bidx, HR&gt;(buf, &amp;buf.x);
<a name="l01174"></a>01174 
<a name="l01175"></a>01175             dst[0] = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(buf.x * 255.f);
<a name="l01176"></a>01176             dst[1] = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(buf.y * 255.f);
<a name="l01177"></a>01177             dst[2] = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(buf.z * 255.f);
<a name="l01178"></a>01178         }
<a name="l01179"></a>01179 
<a name="l01180"></a>01180         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> hr&gt; <span class="keyword">static</span> __device__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> HSV2RGBConvert(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> src)
<a name="l01181"></a>01181         {
<a name="l01182"></a>01182             float3 buf;
<a name="l01183"></a>01183 
<a name="l01184"></a>01184             buf.x = src &amp; 0xff;
<a name="l01185"></a>01185             buf.y = ((src &gt;&gt; 8) &amp; 0xff) * (1.f/255.f);
<a name="l01186"></a>01186             buf.z = ((src &gt;&gt; 16) &amp; 0xff) * (1.f/255.f);
<a name="l01187"></a>01187 
<a name="l01188"></a>01188             HSV2RGBConvert&lt;bidx, hr&gt;(buf, &amp;buf.x);
<a name="l01189"></a>01189 
<a name="l01190"></a>01190             <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> dst = 0xffu &lt;&lt; 24;
<a name="l01191"></a>01191 
<a name="l01192"></a>01192             dst |= <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(buf.x * 255.f);
<a name="l01193"></a>01193             dst |= <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(buf.y * 255.f) &lt;&lt; 8;
<a name="l01194"></a>01194             dst |= <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(buf.z * 255.f) &lt;&lt; 16;
<a name="l01195"></a>01195 
<a name="l01196"></a>01196             <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l01197"></a>01197         }
<a name="l01198"></a>01198 
<a name="l01199"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_s_v2_r_g_b.html">01199</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keywordtype">int</span> scn, <span class="keywordtype">int</span> dcn, <span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> hr&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_s_v2_r_g_b.html">HSV2RGB</a>
<a name="l01200"></a>01200             : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;T, scn&gt;::vec_type, typename TypeVec&lt;T, dcn&gt;::vec_type&gt;
<a name="l01201"></a>01201         {
<a name="l01202"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_s_v2_r_g_b.html#a32b393fc4ec2202daae65bad2d0d703f">01202</a>             __device__ __forceinline__ <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_s_v2_r_g_b.html#a32b393fc4ec2202daae65bad2d0d703f">operator()</a>(<span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, scn&gt;::vec_type</a>&amp; src)<span class="keyword"> const</span>
<a name="l01203"></a>01203 <span class="keyword">            </span>{
<a name="l01204"></a>01204                 <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l01205"></a>01205 
<a name="l01206"></a>01206                 HSV2RGBConvert&lt;bidx, hr&gt;(<a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>, &amp;dst.x);
<a name="l01207"></a>01207                 setAlpha(dst, <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html">ColorChannel&lt;T&gt;::max</a>());
<a name="l01208"></a>01208 
<a name="l01209"></a>01209                 <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l01210"></a>01210             }
<a name="l01211"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_s_v2_r_g_b.html#a5a3cb7c7b78dd44197780498d704ec45">01211</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_s_v2_r_g_b.html#a5a3cb7c7b78dd44197780498d704ec45">HSV2RGB</a>()
<a name="l01212"></a>01212                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l01213"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_s_v2_r_g_b.html#aa6d4c47479d3467269747ee60bd92c74">01213</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_s_v2_r_g_b.html#a5a3cb7c7b78dd44197780498d704ec45">HSV2RGB</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_s_v2_r_g_b.html">HSV2RGB</a>&amp; other_)
<a name="l01214"></a>01214                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l01215"></a>01215         };
<a name="l01216"></a>01216 
<a name="l01217"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_s_v2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html">01217</a>         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> hr&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_s_v2_r_g_b.html">HSV2RGB</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>, 4, 4, bidx, hr&gt; : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;uint, uint&gt;
<a name="l01218"></a>01218         {
<a name="l01219"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_s_v2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html#a970a4ea0b3e6f31f591fe87df0d11b18">01219</a>             __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_s_v2_r_g_b.html#a32b393fc4ec2202daae65bad2d0d703f">operator()</a>(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> src)<span class="keyword"> const</span>
<a name="l01220"></a>01220 <span class="keyword">            </span>{
<a name="l01221"></a>01221                 <span class="keywordflow">return</span> HSV2RGBConvert&lt;bidx, hr&gt;(<a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>);
<a name="l01222"></a>01222             }
<a name="l01223"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_s_v2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html#a85a6a8b41a868b29e7509ff47dcc71ec">01223</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_s_v2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html#a85a6a8b41a868b29e7509ff47dcc71ec">HSV2RGB</a>():<a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l01224"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_s_v2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html#aabf3071be7c54c212918cb2d4495ffe0">01224</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_s_v2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html#aabf3071be7c54c212918cb2d4495ffe0">HSV2RGB</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_s_v2_r_g_b.html">HSV2RGB</a>&amp; other_):<a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l01225"></a>01225         };
<a name="l01226"></a>01226     }
<a name="l01227"></a>01227 
<a name="l01228"></a>01228 <span class="preprocessor">#define OPENCV_GPU_IMPLEMENT_HSV2RGB_TRAITS(name, scn, dcn, bidx) \</span>
<a name="l01229"></a>01229 <span class="preprocessor">    template &lt;typename T&gt; struct name ## _traits \</span>
<a name="l01230"></a>01230 <span class="preprocessor">    { \</span>
<a name="l01231"></a>01231 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::HSV2RGB&lt;T, scn, dcn, bidx, 180&gt; functor_type; \</span>
<a name="l01232"></a>01232 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l01233"></a>01233 <span class="preprocessor">        { \</span>
<a name="l01234"></a>01234 <span class="preprocessor">            return functor_type(); \</span>
<a name="l01235"></a>01235 <span class="preprocessor">        } \</span>
<a name="l01236"></a>01236 <span class="preprocessor">    }; \</span>
<a name="l01237"></a>01237 <span class="preprocessor">    template &lt;typename T&gt; struct name ## _full_traits \</span>
<a name="l01238"></a>01238 <span class="preprocessor">    { \</span>
<a name="l01239"></a>01239 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::HSV2RGB&lt;T, scn, dcn, bidx, 255&gt; functor_type; \</span>
<a name="l01240"></a>01240 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l01241"></a>01241 <span class="preprocessor">        { \</span>
<a name="l01242"></a>01242 <span class="preprocessor">            return functor_type(); \</span>
<a name="l01243"></a>01243 <span class="preprocessor">        } \</span>
<a name="l01244"></a>01244 <span class="preprocessor">    }; \</span>
<a name="l01245"></a>01245 <span class="preprocessor">    template &lt;&gt; struct name ## _traits&lt;float&gt; \</span>
<a name="l01246"></a>01246 <span class="preprocessor">    { \</span>
<a name="l01247"></a>01247 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::HSV2RGB&lt;float, scn, dcn, bidx, 360&gt; functor_type; \</span>
<a name="l01248"></a>01248 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l01249"></a>01249 <span class="preprocessor">        { \</span>
<a name="l01250"></a>01250 <span class="preprocessor">            return functor_type(); \</span>
<a name="l01251"></a>01251 <span class="preprocessor">        } \</span>
<a name="l01252"></a>01252 <span class="preprocessor">    }; \</span>
<a name="l01253"></a>01253 <span class="preprocessor">    template &lt;&gt; struct name ## _full_traits&lt;float&gt; \</span>
<a name="l01254"></a>01254 <span class="preprocessor">    { \</span>
<a name="l01255"></a>01255 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::HSV2RGB&lt;float, scn, dcn, bidx, 360&gt; functor_type; \</span>
<a name="l01256"></a>01256 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l01257"></a>01257 <span class="preprocessor">        { \</span>
<a name="l01258"></a>01258 <span class="preprocessor">            return functor_type(); \</span>
<a name="l01259"></a>01259 <span class="preprocessor">        } \</span>
<a name="l01260"></a>01260 <span class="preprocessor">    };</span>
<a name="l01261"></a>01261 <span class="preprocessor"></span>
<a name="l01263"></a>01263 
<a name="l01264"></a>01264     <span class="keyword">namespace </span>color_detail
<a name="l01265"></a>01265     {
<a name="l01266"></a>01266         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> hr, <span class="keyword">typename</span> D&gt; <span class="keyword">static</span> __device__ <span class="keywordtype">void</span> RGB2HLSConvert(<span class="keyword">const</span> <span class="keywordtype">float</span>* src, D&amp; dst)
<a name="l01267"></a>01267         {
<a name="l01268"></a>01268             <span class="keyword">const</span> <span class="keywordtype">float</span> hscale = hr * (1.f / 360.f);
<a name="l01269"></a>01269 
<a name="l01270"></a>01270             <span class="keywordtype">float</span> b = src[bidx], g = src[1], r = src[bidx^2];
<a name="l01271"></a>01271             <span class="keywordtype">float</span> h = 0.f, s = 0.f, l;
<a name="l01272"></a>01272             <span class="keywordtype">float</span> vmin, vmax, diff;
<a name="l01273"></a>01273 
<a name="l01274"></a>01274             vmax = vmin = <a class="code" href="core__c_8h.html#a54709f3b06b33b66763f1613cc7fb571">r</a>;
<a name="l01275"></a>01275             vmax = fmax(vmax, g);
<a name="l01276"></a>01276             vmax = fmax(vmax, b);
<a name="l01277"></a>01277             vmin = fmin(vmin, g);
<a name="l01278"></a>01278             vmin = fmin(vmin, b);
<a name="l01279"></a>01279 
<a name="l01280"></a>01280             diff = vmax - vmin;
<a name="l01281"></a>01281             l = (vmax + vmin) * 0.5f;
<a name="l01282"></a>01282 
<a name="l01283"></a>01283             <span class="keywordflow">if</span> (diff &gt; <a class="code" href="structcv_1_1gpu_1_1device_1_1numeric__limits_3_01float_01_4.html#ac6e693e459828d215803ba593a076d26">numeric_limits&lt;float&gt;::epsilon</a>())
<a name="l01284"></a>01284             {
<a name="l01285"></a>01285                 s = (l &lt; 0.5f) * diff / (vmax + vmin);
<a name="l01286"></a>01286                 s += (l &gt;= 0.5f) * diff / (2.0f - vmax - vmin);
<a name="l01287"></a>01287 
<a name="l01288"></a>01288                 diff = 60.f / diff;
<a name="l01289"></a>01289 
<a name="l01290"></a>01290                 h  = (vmax == <a class="code" href="core__c_8h.html#a54709f3b06b33b66763f1613cc7fb571">r</a>) * (g - b) * diff;
<a name="l01291"></a>01291                 h += (vmax != r &amp;&amp; vmax == g) * ((b - r) * diff + 120.f);
<a name="l01292"></a>01292                 h += (vmax != r &amp;&amp; vmax != g) * ((r - g) * diff + 240.f);
<a name="l01293"></a>01293                 h += (h &lt; 0.f) * 360.f;
<a name="l01294"></a>01294             }
<a name="l01295"></a>01295 
<a name="l01296"></a>01296             dst.x = h * <a class="code" href="core__c_8h.html#ad232f4a0c75619f6771b77f139c428c1">hscale</a>;
<a name="l01297"></a>01297             dst.y = l;
<a name="l01298"></a>01298             dst.z = s;
<a name="l01299"></a>01299         }
<a name="l01300"></a>01300 
<a name="l01301"></a>01301         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> hr, <span class="keyword">typename</span> D&gt; <span class="keyword">static</span> __device__ <span class="keywordtype">void</span> RGB2HLSConvert(<span class="keyword">const</span> <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* src, D&amp; dst)
<a name="l01302"></a>01302         {
<a name="l01303"></a>01303             float3 buf;
<a name="l01304"></a>01304 
<a name="l01305"></a>01305             buf.x = src[0] * (1.f / 255.f);
<a name="l01306"></a>01306             buf.y = src[1] * (1.f / 255.f);
<a name="l01307"></a>01307             buf.z = src[2] * (1.f / 255.f);
<a name="l01308"></a>01308 
<a name="l01309"></a>01309             RGB2HLSConvert&lt;bidx, hr&gt;(&amp;buf.x, buf);
<a name="l01310"></a>01310 
<a name="l01311"></a>01311             dst.x = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(buf.x);
<a name="l01312"></a>01312             dst.y = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(buf.y*255.f);
<a name="l01313"></a>01313             dst.z = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(buf.z*255.f);
<a name="l01314"></a>01314         }
<a name="l01315"></a>01315 
<a name="l01316"></a>01316         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> hr&gt; <span class="keyword">static</span> __device__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> RGB2HLSConvert(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> src)
<a name="l01317"></a>01317         {
<a name="l01318"></a>01318             float3 buf;
<a name="l01319"></a>01319 
<a name="l01320"></a>01320             buf.x = (0xff &amp; <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>) * (1.f / 255.f);
<a name="l01321"></a>01321             buf.y = (0xff &amp; (src &gt;&gt; 8)) * (1.f / 255.f);
<a name="l01322"></a>01322             buf.z = (0xff &amp; (src &gt;&gt; 16)) * (1.f / 255.f);
<a name="l01323"></a>01323 
<a name="l01324"></a>01324             RGB2HLSConvert&lt;bidx, hr&gt;(&amp;buf.x, buf);
<a name="l01325"></a>01325 
<a name="l01326"></a>01326             <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> dst = 0xffu &lt;&lt; 24;
<a name="l01327"></a>01327 
<a name="l01328"></a>01328             dst |= <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(buf.x);
<a name="l01329"></a>01329             dst |= <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(buf.y * 255.f) &lt;&lt; 8;
<a name="l01330"></a>01330             dst |= <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(buf.z * 255.f) &lt;&lt; 16;
<a name="l01331"></a>01331 
<a name="l01332"></a>01332             <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l01333"></a>01333         }
<a name="l01334"></a>01334 
<a name="l01335"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_l_s.html">01335</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keywordtype">int</span> scn, <span class="keywordtype">int</span> dcn, <span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> hr&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_l_s.html">RGB2HLS</a>
<a name="l01336"></a>01336             : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;T, scn&gt;::vec_type, typename TypeVec&lt;T, dcn&gt;::vec_type&gt;
<a name="l01337"></a>01337         {
<a name="l01338"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_l_s.html#a79585428fb169c4534340ec75394a97c">01338</a>             __device__ __forceinline__ <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_l_s.html#a79585428fb169c4534340ec75394a97c">operator()</a>(<span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, scn&gt;::vec_type</a>&amp; src)<span class="keyword"> const</span>
<a name="l01339"></a>01339 <span class="keyword">            </span>{
<a name="l01340"></a>01340                 <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l01341"></a>01341 
<a name="l01342"></a>01342                 RGB2HLSConvert&lt;bidx, hr&gt;(&amp;src.x, <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>);
<a name="l01343"></a>01343 
<a name="l01344"></a>01344                 <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l01345"></a>01345             }
<a name="l01346"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_l_s.html#acffa15dcdaf68a44c46c410cbf9e2f56">01346</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_l_s.html#acffa15dcdaf68a44c46c410cbf9e2f56">RGB2HLS</a>()
<a name="l01347"></a>01347                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l01348"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_l_s.html#ac8c26aaa44476be605ddfe96d85c63bb">01348</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_l_s.html#acffa15dcdaf68a44c46c410cbf9e2f56">RGB2HLS</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_l_s.html">RGB2HLS</a>&amp; other_)
<a name="l01349"></a>01349                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l01350"></a>01350         };
<a name="l01351"></a>01351 
<a name="l01352"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_l_s_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html">01352</a>         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> hr&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_l_s.html">RGB2HLS</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>, 4, 4, bidx, hr&gt; : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;uint, uint&gt;
<a name="l01353"></a>01353         {
<a name="l01354"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_l_s_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html#a722d51f3e17f3e60cf9d123053cd513b">01354</a>             __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_l_s.html#a79585428fb169c4534340ec75394a97c">operator()</a>(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> src)<span class="keyword"> const</span>
<a name="l01355"></a>01355 <span class="keyword">            </span>{
<a name="l01356"></a>01356                 <span class="keywordflow">return</span> RGB2HLSConvert&lt;bidx, hr&gt;(<a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>);
<a name="l01357"></a>01357             }
<a name="l01358"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_l_s_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html#ad8f58c7c8ffdb4a8ff88341e7fa2d166">01358</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_l_s_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html#ad8f58c7c8ffdb4a8ff88341e7fa2d166">RGB2HLS</a>() : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l01359"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_l_s_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html#a087c3eb5ff5a064ea606a2d0cd69e287">01359</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_l_s_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html#a087c3eb5ff5a064ea606a2d0cd69e287">RGB2HLS</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_r_g_b2_h_l_s.html">RGB2HLS</a>&amp; other_) : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l01360"></a>01360         };
<a name="l01361"></a>01361     }
<a name="l01362"></a>01362 
<a name="l01363"></a>01363 <span class="preprocessor">#define OPENCV_GPU_IMPLEMENT_RGB2HLS_TRAITS(name, scn, dcn, bidx) \</span>
<a name="l01364"></a>01364 <span class="preprocessor">    template &lt;typename T&gt; struct name ## _traits \</span>
<a name="l01365"></a>01365 <span class="preprocessor">    { \</span>
<a name="l01366"></a>01366 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::RGB2HLS&lt;T, scn, dcn, bidx, 180&gt; functor_type; \</span>
<a name="l01367"></a>01367 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l01368"></a>01368 <span class="preprocessor">        { \</span>
<a name="l01369"></a>01369 <span class="preprocessor">            return functor_type(); \</span>
<a name="l01370"></a>01370 <span class="preprocessor">        } \</span>
<a name="l01371"></a>01371 <span class="preprocessor">    }; \</span>
<a name="l01372"></a>01372 <span class="preprocessor">    template &lt;typename T&gt; struct name ## _full_traits \</span>
<a name="l01373"></a>01373 <span class="preprocessor">    { \</span>
<a name="l01374"></a>01374 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::RGB2HLS&lt;T, scn, dcn, bidx, 256&gt; functor_type; \</span>
<a name="l01375"></a>01375 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l01376"></a>01376 <span class="preprocessor">        { \</span>
<a name="l01377"></a>01377 <span class="preprocessor">            return functor_type(); \</span>
<a name="l01378"></a>01378 <span class="preprocessor">        } \</span>
<a name="l01379"></a>01379 <span class="preprocessor">    }; \</span>
<a name="l01380"></a>01380 <span class="preprocessor">    template &lt;&gt; struct name ## _traits&lt;float&gt; \</span>
<a name="l01381"></a>01381 <span class="preprocessor">    { \</span>
<a name="l01382"></a>01382 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::RGB2HLS&lt;float, scn, dcn, bidx, 360&gt; functor_type; \</span>
<a name="l01383"></a>01383 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l01384"></a>01384 <span class="preprocessor">        { \</span>
<a name="l01385"></a>01385 <span class="preprocessor">            return functor_type(); \</span>
<a name="l01386"></a>01386 <span class="preprocessor">        } \</span>
<a name="l01387"></a>01387 <span class="preprocessor">    }; \</span>
<a name="l01388"></a>01388 <span class="preprocessor">    template &lt;&gt; struct name ## _full_traits&lt;float&gt; \</span>
<a name="l01389"></a>01389 <span class="preprocessor">    { \</span>
<a name="l01390"></a>01390 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::RGB2HLS&lt;float, scn, dcn, bidx, 360&gt; functor_type; \</span>
<a name="l01391"></a>01391 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l01392"></a>01392 <span class="preprocessor">        { \</span>
<a name="l01393"></a>01393 <span class="preprocessor">            return functor_type(); \</span>
<a name="l01394"></a>01394 <span class="preprocessor">        } \</span>
<a name="l01395"></a>01395 <span class="preprocessor">    };</span>
<a name="l01396"></a>01396 <span class="preprocessor"></span>
<a name="l01397"></a>01397     <span class="keyword">namespace </span>color_detail
<a name="l01398"></a>01398     {
<a name="l01399"></a><a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#afec4abf631a0b58ee4cb02fe320af62e">01399</a>         __constant__ <span class="keywordtype">int</span> <a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#afec4abf631a0b58ee4cb02fe320af62e">c_HlsSectorData</a>[6][3] = { {1,3,0}, {1,0,2}, {3,0,1}, {0,2,1}, {0,1,3}, {2,1,0} };
<a name="l01400"></a>01400 
<a name="l01401"></a>01401         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> hr, <span class="keyword">typename</span> T&gt; <span class="keyword">static</span> __device__ <span class="keywordtype">void</span> HLS2RGBConvert(<span class="keyword">const</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>&amp; src, <span class="keywordtype">float</span>* dst)
<a name="l01402"></a>01402         {
<a name="l01403"></a>01403             <span class="keyword">const</span> <span class="keywordtype">float</span> hscale = 6.0f / hr;
<a name="l01404"></a>01404 
<a name="l01405"></a>01405             <span class="keywordtype">float</span> h = src.x, l = src.y, s = src.z;
<a name="l01406"></a>01406             <span class="keywordtype">float</span> b = l, g = l, r = l;
<a name="l01407"></a>01407 
<a name="l01408"></a>01408             <span class="keywordflow">if</span> (s != 0)
<a name="l01409"></a>01409             {
<a name="l01410"></a>01410                 <span class="keywordtype">float</span> <a class="code" href="legacy_8hpp.html#aaed7591dd18d92f8033f952b64ae30f5">p2</a>  = (l &lt;= 0.5f) * l * (1 + s);
<a name="l01411"></a>01411                       p2 += (l &gt; 0.5f) * (l + s - l * s);
<a name="l01412"></a>01412                 <span class="keywordtype">float</span> p1 = 2 * l - <a class="code" href="legacy_8hpp.html#aaed7591dd18d92f8033f952b64ae30f5">p2</a>;
<a name="l01413"></a>01413 
<a name="l01414"></a>01414                 h *= <a class="code" href="core__c_8h.html#ad232f4a0c75619f6771b77f139c428c1">hscale</a>;
<a name="l01415"></a>01415 
<a name="l01416"></a>01416                 <span class="keywordflow">if</span>( h &lt; 0 )
<a name="l01417"></a>01417                     <span class="keywordflow">do</span> h += 6; <span class="keywordflow">while</span>( h &lt; 0 );
<a name="l01418"></a>01418                 <span class="keywordflow">else</span> <span class="keywordflow">if</span>( h &gt;= 6 )
<a name="l01419"></a>01419                     <span class="keywordflow">do</span> h -= 6; <span class="keywordflow">while</span>( h &gt;= 6 );
<a name="l01420"></a>01420 
<a name="l01421"></a>01421                 <span class="keywordtype">int</span> sector;
<a name="l01422"></a>01422                 sector = __float2int_rd(h);
<a name="l01423"></a>01423 
<a name="l01424"></a>01424                 h -= sector;
<a name="l01425"></a>01425 
<a name="l01426"></a>01426                 <span class="keywordtype">float</span> tab[4];
<a name="l01427"></a>01427                 tab[0] = <a class="code" href="legacy_8hpp.html#aaed7591dd18d92f8033f952b64ae30f5">p2</a>;
<a name="l01428"></a>01428                 tab[1] = p1;
<a name="l01429"></a>01429                 tab[2] = p1 + (p2 - p1) * (1 - h);
<a name="l01430"></a>01430                 tab[3] = p1 + (p2 - p1) * h;
<a name="l01431"></a>01431 
<a name="l01432"></a>01432                 b = tab[<a class="code" href="namespacecv_1_1gpu_1_1device_1_1color__detail.html#afec4abf631a0b58ee4cb02fe320af62e">c_HlsSectorData</a>[sector][0]];
<a name="l01433"></a>01433                 g = tab[c_HlsSectorData[sector][1]];
<a name="l01434"></a>01434                 r = tab[c_HlsSectorData[sector][2]];
<a name="l01435"></a>01435             }
<a name="l01436"></a>01436 
<a name="l01437"></a>01437             dst[bidx] = <a class="code" href="legacy_8hpp.html#ac04272e8ca865b8fba18d36edae9fd2a">b</a>;
<a name="l01438"></a>01438             dst[1] = g;
<a name="l01439"></a>01439             dst[bidx^2] = <a class="code" href="core__c_8h.html#a54709f3b06b33b66763f1613cc7fb571">r</a>;
<a name="l01440"></a>01440         }
<a name="l01441"></a>01441 
<a name="l01442"></a>01442         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> hr, <span class="keyword">typename</span> T&gt; <span class="keyword">static</span> __device__ <span class="keywordtype">void</span> HLS2RGBConvert(<span class="keyword">const</span> <a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>&amp; src, <a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* dst)
<a name="l01443"></a>01443         {
<a name="l01444"></a>01444             float3 buf;
<a name="l01445"></a>01445 
<a name="l01446"></a>01446             buf.x = src.x;
<a name="l01447"></a>01447             buf.y = src.y * (1.f / 255.f);
<a name="l01448"></a>01448             buf.z = src.z * (1.f / 255.f);
<a name="l01449"></a>01449 
<a name="l01450"></a>01450             HLS2RGBConvert&lt;bidx, hr&gt;(buf, &amp;buf.x);
<a name="l01451"></a>01451 
<a name="l01452"></a>01452             dst[0] = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(buf.x * 255.f);
<a name="l01453"></a>01453             dst[1] = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(buf.y * 255.f);
<a name="l01454"></a>01454             dst[2] = <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(buf.z * 255.f);
<a name="l01455"></a>01455         }
<a name="l01456"></a>01456 
<a name="l01457"></a>01457         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> hr&gt; <span class="keyword">static</span> __device__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> HLS2RGBConvert(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> src)
<a name="l01458"></a>01458         {
<a name="l01459"></a>01459             float3 buf;
<a name="l01460"></a>01460 
<a name="l01461"></a>01461             buf.x = 0xff &amp; <a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>;
<a name="l01462"></a>01462             buf.y = (0xff &amp; (src &gt;&gt; 8)) * (1.f / 255.f);
<a name="l01463"></a>01463             buf.z = (0xff &amp; (src &gt;&gt; 16)) * (1.f / 255.f);
<a name="l01464"></a>01464 
<a name="l01465"></a>01465             HLS2RGBConvert&lt;bidx, hr&gt;(buf, &amp;buf.x);
<a name="l01466"></a>01466 
<a name="l01467"></a>01467             <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> dst = 0xffu &lt;&lt; 24;
<a name="l01468"></a>01468 
<a name="l01469"></a>01469             dst |= <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(buf.x * 255.f);
<a name="l01470"></a>01470             dst |= <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(buf.y * 255.f) &lt;&lt; 8;
<a name="l01471"></a>01471             dst |= <a class="code" href="namespacecv_1_1gpu_1_1device.html#aad5e6b794784ec0e90cdcca7d8d8a7de">saturate_cast</a>&lt;<a class="code" href="core_2types__c_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(buf.z * 255.f) &lt;&lt; 16;
<a name="l01472"></a>01472 
<a name="l01473"></a>01473             <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l01474"></a>01474         }
<a name="l01475"></a>01475 
<a name="l01476"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_l_s2_r_g_b.html">01476</a>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keywordtype">int</span> scn, <span class="keywordtype">int</span> dcn, <span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> hr&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_l_s2_r_g_b.html">HLS2RGB</a>
<a name="l01477"></a>01477             : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;T, scn&gt;::vec_type, typename TypeVec&lt;T, dcn&gt;::vec_type&gt;
<a name="l01478"></a>01478         {
<a name="l01479"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_l_s2_r_g_b.html#a49e44f369f569573f56bb87929112faf">01479</a>             __device__ __forceinline__ <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_l_s2_r_g_b.html#a49e44f369f569573f56bb87929112faf">operator()</a>(<span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, scn&gt;::vec_type</a>&amp; src)<span class="keyword"> const</span>
<a name="l01480"></a>01480 <span class="keyword">            </span>{
<a name="l01481"></a>01481                 <span class="keyword">typename</span> <a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">TypeVec&lt;T, dcn&gt;::vec_type</a> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l01482"></a>01482 
<a name="l01483"></a>01483                 HLS2RGBConvert&lt;bidx, hr&gt;(<a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>, &amp;dst.x);
<a name="l01484"></a>01484                 setAlpha(dst, <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_color_channel.html">ColorChannel&lt;T&gt;::max</a>());
<a name="l01485"></a>01485 
<a name="l01486"></a>01486                 <span class="keywordflow">return</span> <a class="code" href="namespacecv.html#a52bb929b38b35664f16102ee054f0b3d">dst</a>;
<a name="l01487"></a>01487             }
<a name="l01488"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_l_s2_r_g_b.html#a05ea6b4827a0895b3859998b8b1606d5">01488</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_l_s2_r_g_b.html#a05ea6b4827a0895b3859998b8b1606d5">HLS2RGB</a>()
<a name="l01489"></a>01489                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l01490"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_l_s2_r_g_b.html#ab3f308852522ede8fadfa7496f3577b3">01490</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_l_s2_r_g_b.html#a05ea6b4827a0895b3859998b8b1606d5">HLS2RGB</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_l_s2_r_g_b.html">HLS2RGB</a>&amp; other_)
<a name="l01491"></a>01491                 : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, scn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>, typename TypeVec&lt;<a class="code" href="calib3d_8hpp.html#a3efb9551a871ddd0463079a808916717">T</a>, dcn&gt;::<a class="code" href="namespacecv_1_1gpu_1_1device.html#af309c2a110d80ed868c817e5fb2e2d72">vec_type</a>&gt;(){}
<a name="l01492"></a>01492         };
<a name="l01493"></a>01493 
<a name="l01494"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_l_s2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html">01494</a>         <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> b<span class="keywordtype">id</span>x, <span class="keywordtype">int</span> hr&gt; <span class="keyword">struct </span><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_l_s2_r_g_b.html">HLS2RGB</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a99411d773f33fa4902839cb12224e0e0">uchar</a>, 4, 4, bidx, hr&gt; : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;uint, uint&gt;
<a name="l01495"></a>01495         {
<a name="l01496"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_l_s2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html#a095706238495b953f43723e71b583b46">01496</a>             __device__ __forceinline__ <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_l_s2_r_g_b.html#a49e44f369f569573f56bb87929112faf">operator()</a>(<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a> src)<span class="keyword"> const</span>
<a name="l01497"></a>01497 <span class="keyword">            </span>{
<a name="l01498"></a>01498                 <span class="keywordflow">return</span> HLS2RGBConvert&lt;bidx, hr&gt;(<a class="code" href="core__c_8h.html#af29de26095c2ca3a13726f87a7e4ff4e">src</a>);
<a name="l01499"></a>01499             }
<a name="l01500"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_l_s2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html#a5d1f8529fc1565c9f5aa6d4402aaa061">01500</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_l_s2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html#a5d1f8529fc1565c9f5aa6d4402aaa061">HLS2RGB</a>() : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l01501"></a><a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_l_s2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html#a7bd2fe2a2817eae3c3e3a37ea120f46f">01501</a>             __device__ __forceinline__ <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_l_s2_r_g_b_3_01uchar_00_014_00_014_00_01bidx_00_01hr_01_4.html#a7bd2fe2a2817eae3c3e3a37ea120f46f">HLS2RGB</a>(<span class="keyword">const</span> <a class="code" href="structcv_1_1gpu_1_1device_1_1color__detail_1_1_h_l_s2_r_g_b.html">HLS2RGB</a>&amp; other_) : <a class="code" href="structcv_1_1gpu_1_1device_1_1unary__function.html">unary_function</a>&lt;<a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>, <a class="code" href="namespacecv_1_1gpu_1_1device.html#a44ac84f1053c91fa15022466b7a40d07">uint</a>&gt;(){}
<a name="l01502"></a>01502         };
<a name="l01503"></a>01503     }
<a name="l01504"></a>01504 
<a name="l01505"></a>01505 <span class="preprocessor">#define OPENCV_GPU_IMPLEMENT_HLS2RGB_TRAITS(name, scn, dcn, bidx) \</span>
<a name="l01506"></a>01506 <span class="preprocessor">    template &lt;typename T&gt; struct name ## _traits \</span>
<a name="l01507"></a>01507 <span class="preprocessor">    { \</span>
<a name="l01508"></a>01508 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::HLS2RGB&lt;T, scn, dcn, bidx, 180&gt; functor_type; \</span>
<a name="l01509"></a>01509 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l01510"></a>01510 <span class="preprocessor">        { \</span>
<a name="l01511"></a>01511 <span class="preprocessor">            return functor_type(); \</span>
<a name="l01512"></a>01512 <span class="preprocessor">        } \</span>
<a name="l01513"></a>01513 <span class="preprocessor">    }; \</span>
<a name="l01514"></a>01514 <span class="preprocessor">    template &lt;typename T&gt; struct name ## _full_traits \</span>
<a name="l01515"></a>01515 <span class="preprocessor">    { \</span>
<a name="l01516"></a>01516 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::HLS2RGB&lt;T, scn, dcn, bidx, 255&gt; functor_type; \</span>
<a name="l01517"></a>01517 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l01518"></a>01518 <span class="preprocessor">        { \</span>
<a name="l01519"></a>01519 <span class="preprocessor">            return functor_type(); \</span>
<a name="l01520"></a>01520 <span class="preprocessor">        } \</span>
<a name="l01521"></a>01521 <span class="preprocessor">    }; \</span>
<a name="l01522"></a>01522 <span class="preprocessor">    template &lt;&gt; struct name ## _traits&lt;float&gt; \</span>
<a name="l01523"></a>01523 <span class="preprocessor">    { \</span>
<a name="l01524"></a>01524 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::HLS2RGB&lt;float, scn, dcn, bidx, 360&gt; functor_type; \</span>
<a name="l01525"></a>01525 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l01526"></a>01526 <span class="preprocessor">        { \</span>
<a name="l01527"></a>01527 <span class="preprocessor">            return functor_type(); \</span>
<a name="l01528"></a>01528 <span class="preprocessor">        } \</span>
<a name="l01529"></a>01529 <span class="preprocessor">    }; \</span>
<a name="l01530"></a>01530 <span class="preprocessor">    template &lt;&gt; struct name ## _full_traits&lt;float&gt; \</span>
<a name="l01531"></a>01531 <span class="preprocessor">    { \</span>
<a name="l01532"></a>01532 <span class="preprocessor">        typedef ::cv::gpu::device::color_detail::HLS2RGB&lt;float, scn, dcn, bidx, 360&gt; functor_type; \</span>
<a name="l01533"></a>01533 <span class="preprocessor">        static __host__ __device__ __forceinline__ functor_type create_functor() \</span>
<a name="l01534"></a>01534 <span class="preprocessor">        { \</span>
<a name="l01535"></a>01535 <span class="preprocessor">            return functor_type(); \</span>
<a name="l01536"></a>01536 <span class="preprocessor">        } \</span>
<a name="l01537"></a>01537 <span class="preprocessor">    };</span>
<a name="l01538"></a>01538 <span class="preprocessor"></span>
<a name="l01539"></a>01539 <span class="preprocessor">    #undef CV_DESCALE</span>
<a name="l01540"></a>01540 <span class="preprocessor"></span>}}} <span class="comment">// namespace cv { namespace gpu { namespace device</span>
<a name="l01541"></a>01541 
<a name="l01542"></a>01542 <span class="preprocessor">#endif // __OPENCV_GPU_COLOR_DETAIL_HPP__</span>
</pre></div></div><!-- contents -->
	<div class="footer">
		<p> </p>
	</div>
</div>	
</body>
</html>
